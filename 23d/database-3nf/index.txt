2:I[579,["2202","static/chunks/2202-a70b76e16443b83b.js","9919","static/chunks/9919-fdd433cceba36e69.js","5122","static/chunks/app/(posts)/23d/database-3nf/page-8f3ab38648b10d38.js"],""]
3:I[5613,[],""]
4:I[1778,[],""]
5:I[389,["5250","static/chunks/5250-aaac40ffcdef4b77.js","1993","static/chunks/app/(posts)/layout-a1fc8e57c0d159ff.js"],""]
6:I[5694,["5250","static/chunks/5250-aaac40ffcdef4b77.js","3185","static/chunks/app/layout-16a924fc60f8c1d3.js"],"GlobalProvider"]
7:I[397,["5250","static/chunks/5250-aaac40ffcdef4b77.js","3185","static/chunks/app/layout-16a924fc60f8c1d3.js"],""]
0:["SRkklnWGqndd2Jk5RZEor",[[["",{"children":["(posts)",{"children":["23d",{"children":["database-3nf",{"children":["__PAGE__",{}]}]}]}]},"$undefined","$undefined",true],["",{"children":["(posts)",{"children":["23d",{"children":["database-3nf",{"children":["__PAGE__",{},["$L1",[["$","$L2",null,{}],["$","h1",null,{"className":"x-title","children":"数据库设计三大范式"}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"为了减少数据冗余，设计数据表时必须遵循一定的规则，在关系型数据库中这种规则就称为范式。<br/>严谨的定义可以参考维基百科<a href=\"https://zh.wikipedia.org/zh-cn/%E7%AC%AC%E4%B8%80%E6%AD%A3%E8%A6%8F%E5%8C%96\" target=\"_blank\" rel=\"noreferrer\" class=\"x-inline-link\">第一范式</a>、<a href=\"https://zh.wikipedia.org/zh-cn/%E7%AC%AC%E4%BA%8C%E6%AD%A3%E8%A6%8F%E5%8C%96\" target=\"_blank\" rel=\"noreferrer\" class=\"x-inline-link\">第二范式</a>、<a href=\"https://zh.wikipedia.org/zh-cn/%E7%AC%AC%E4%B8%89%E6%AD%A3%E8%A6%8F%E5%8C%96\" target=\"_blank\" rel=\"noreferrer\" class=\"x-inline-link\">第三范式</a>，互联网上也有很多优秀的技术博客。本文希望以简洁的语句和例子进行描述。"}}],["$","h2",null,{"className":"x-h1","children":"第一范式 - 1NF"}],["$","div",null,{"className":"x-highlightblock highlight-background-golden","children":["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"数据库表的每一列都是不可再分的。"}}]}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"下面是一个不符合第一范式的例子："}}],["$","div",null,{"className":"x-table-wrapper","children":["$","table",null,{"className":"x-table","children":["$","tbody",null,{"children":[["$","tr","0",{"children":[["$","th","0",{"children":"人员编号"}],["$","th","1",{"children":"姓名"}],["$","th","2",{"children":"地址"}],["$","th","3",{"children":"职务"}]]}],["$","tr","1",{"children":[["$","td","0",{"children":"1001"}],["$","td","1",{"children":"李雨晨"}],["$","td","2",{"children":"江苏省南京市"}],["$","td","3",{"children":"财务部经理"}]]}],["$","tr","2",{"children":[["$","td","0",{"children":"1002"}],["$","td","1",{"children":"张文浩"}],["$","td","2",{"children":"辽宁省沈阳市"}],["$","td","3",{"children":"财务部员工"}]]}],["$","tr","3",{"children":[["$","td","0",{"children":"1003"}],["$","td","1",{"children":"王洪"}],["$","td","2",{"children":"湖北省武汉市"}],["$","td","3",{"children":"销售部实习生"}]]}],["$","tr","4",{"children":[["$","td","0",{"children":"1004"}],["$","td","1",{"children":"陈宇航"}],["$","td","2",{"children":"吉林省长春市"}],["$","td","3",{"children":"销售部员工"}]]}]]}]}]}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"其中的<code class=\"x-inline-highlight\">职务</code>应该再分为<code class=\"x-inline-highlight\">部门</code>和<code class=\"x-inline-highlight\">职务</code>两个字段，因为业务中可能会经常分别用到这两个属性！"}}],["$","div",null,{"className":"x-table-wrapper","children":["$","table",null,{"className":"x-table","children":["$","tbody",null,{"children":[["$","tr","0",{"children":[["$","th","0",{"children":"人员编号"}],["$","th","1",{"children":"姓名"}],["$","th","2",{"children":"地址"}],["$","th","3",{"children":"部门"}],["$","th","4",{"children":"职务"}]]}],["$","tr","1",{"children":[["$","td","0",{"children":"1001"}],["$","td","1",{"children":"李雨晨"}],["$","td","2",{"children":"江苏省南京市"}],["$","td","3",{"children":"财务部"}],["$","td","4",{"children":"经理"}]]}],["$","tr","2",{"children":[["$","td","0",{"children":"1002"}],["$","td","1",{"children":"张文浩"}],["$","td","2",{"children":"辽宁省沈阳市"}],["$","td","3",{"children":"财务部"}],["$","td","4",{"children":"员工"}]]}],["$","tr","3",{"children":[["$","td","0",{"children":"1003"}],["$","td","1",{"children":"王洪"}],["$","td","2",{"children":"湖北省武汉市"}],["$","td","3",{"children":"销售部实"}],["$","td","4",{"children":"习生"}]]}],["$","tr","4",{"children":[["$","td","0",{"children":"1004"}],["$","td","1",{"children":"陈宇航"}],["$","td","2",{"children":"吉林省长春市"}],["$","td","3",{"children":"销售部"}],["$","td","4",{"children":"员工"}]]}]]}]}]}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"你可能在想<code class=\"x-inline-highlight\">地址</code>字段是否应该拆分。甚至<code class=\"x-inline-highlight\">姓名</code>也可以拆分成<code class=\"x-inline-highlight\">姓</code>和<code class=\"x-inline-highlight\">名</code>两个字段："}}],["$","div",null,{"className":"x-table-wrapper","children":["$","table",null,{"className":"x-table","children":["$","tbody",null,{"children":[["$","tr","0",{"children":[["$","th","0",{"children":"人员编号"}],["$","th","1",{"children":"姓"}],["$","th","2",{"children":"名"}],["$","th","3",{"children":"省"}],["$","th","4",{"children":"市"}],["$","th","5",{"children":"部门"}],["$","th","6",{"children":"职务"}]]}],["$","tr","1",{"children":[["$","td","0",{"children":"1001"}],["$","td","1",{"children":"李"}],["$","td","2",{"children":"雨晨"}],["$","td","3",{"children":"江苏省"}],["$","td","4",{"children":"南京市"}],["$","td","5",{"children":"财务部"}],["$","td","6",{"children":"经理"}]]}],["$","tr","2",{"children":[["$","td","0",{"children":"1002"}],["$","td","1",{"children":"张"}],["$","td","2",{"children":"文浩"}],["$","td","3",{"children":"辽宁省"}],["$","td","4",{"children":"沈阳市"}],["$","td","5",{"children":"财务部"}],["$","td","6",{"children":"员工"}]]}],["$","tr","3",{"children":[["$","td","0",{"children":"1003"}],["$","td","1",{"children":"王"}],["$","td","2",{"children":"洪"}],["$","td","3",{"children":"湖北省"}],["$","td","4",{"children":"武汉市"}],["$","td","5",{"children":"销售部实"}],["$","td","6",{"children":"习生"}]]}],["$","tr","4",{"children":[["$","td","0",{"children":"1004"}],["$","td","1",{"children":"陈"}],["$","td","2",{"children":"宇航"}],["$","td","3",{"children":"吉林省"}],["$","td","4",{"children":"长春市"}],["$","td","5",{"children":"销售部"}],["$","td","6",{"children":"员工"}]]}]]}]}]}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"这个例子比上一个更好吗？哪一种设计更符合第一范式？事实上，两个例子都是符合的，具体的取舍要参考具体的业务。例如<code class=\"x-inline-highlight\">姓名</code>、<code class=\"x-inline-highlight\">地址</code>在业务中都整体出现，那么第二个例子就是最佳选择。如果业务涉及<span class=\"x-inline-strong\">分别</span>对所属省、市的操作，那么就应该将<code class=\"x-inline-highlight\">地址</code>字段拆分为<code class=\"x-inline-highlight\">省</code>和<code class=\"x-inline-highlight\">市</code>。"}}],["$","h2",null,{"className":"x-h1","children":"第二范式 - 2NF"}],["$","div",null,{"className":"x-highlightblock highlight-background-golden","children":["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"符合第一范式，且非主键字段必须完全依赖于主键字段，不能只依赖主键的一部分。（主要针对联合主键而言）"}}]}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"下面是一个不符合第二范式的例子："}}],["$","div",null,{"className":"x-table-wrapper","children":["$","table",null,{"className":"x-table","children":["$","tbody",null,{"children":[["$","tr","0",{"children":[["$","th","0",{"children":"学号(主键)"}],["$","th","1",{"children":"课程代码(主键)"}],["$","th","2",{"children":"学生姓名"}],["$","th","3",{"children":"成绩"}]]}],["$","tr","1",{"children":[["$","td","0",{"children":"202101"}],["$","td","1",{"children":"001"}],["$","td","2",{"children":"Alice"}],["$","td","3",{"children":"97"}]]}],["$","tr","2",{"children":[["$","td","0",{"children":"202102"}],["$","td","1",{"children":"001"}],["$","td","2",{"children":"Bob"}],["$","td","3",{"children":"86"}]]}],["$","tr","3",{"children":[["$","td","0",{"children":"202103"}],["$","td","1",{"children":"001"}],["$","td","2",{"children":"Candy"}],["$","td","3",{"children":"80"}]]}],["$","tr","4",{"children":[["$","td","0",{"children":"202103"}],["$","td","1",{"children":"003"}],["$","td","2",{"children":"Candy"}],["$","td","3",{"children":"93"}]]}]]}]}]}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"这个例子中，<code class=\"x-inline-highlight\">成绩</code>是针对某一学生的某一课程而言的，因此需要<code class=\"x-inline-highlight\">学号</code>和<code class=\"x-inline-highlight\">课程代码</code>作为联合主键才能确定；然而学生的<code class=\"x-inline-highlight\">学生姓名</code>仅由<code class=\"x-inline-highlight\">学号</code>就可以唯一确定，这就叫部分依赖于主键，因此不符合第二范式。正确的做法是将<code class=\"x-inline-highlight\">学生姓名</code>和<code class=\"x-inline-highlight\">成绩</code>分开存放于两张表中："}}],["$","div",null,{"className":"x-flexrow","style":{"width":"$undefined","gap":"32px","justifyContent":"$undefined","alignItems":"$undefined"},"children":[["$","div",null,{"className":"x-table-wrapper","children":["$","table",null,{"className":"x-table","children":["$","tbody",null,{"children":[["$","tr","0",{"children":[["$","th","0",{"children":"学号(主键)"}],["$","th","1",{"children":"学生姓名"}]]}],["$","tr","1",{"children":[["$","td","0",{"children":"202101"}],["$","td","1",{"children":"Alice"}]]}],["$","tr","2",{"children":[["$","td","0",{"children":"202102"}],["$","td","1",{"children":"Bob"}]]}],["$","tr","3",{"children":[["$","td","0",{"children":"202103"}],["$","td","1",{"children":"Candy"}]]}]]}]}]}],["$","div",null,{"className":"x-table-wrapper","children":["$","table",null,{"className":"x-table","children":["$","tbody",null,{"children":[["$","tr","0",{"children":[["$","th","0",{"children":"学号(主键)"}],["$","th","1",{"children":"课程代码(主键)"}],["$","th","2",{"children":"成绩"}]]}],["$","tr","1",{"children":[["$","td","0",{"children":"202101"}],["$","td","1",{"children":"001"}],["$","td","2",{"children":"97"}]]}],["$","tr","2",{"children":[["$","td","0",{"children":"202102"}],["$","td","1",{"children":"001"}],["$","td","2",{"children":"86"}]]}],["$","tr","3",{"children":[["$","td","0",{"children":"202103"}],["$","td","1",{"children":"001"}],["$","td","2",{"children":"80"}]]}],["$","tr","4",{"children":[["$","td","0",{"children":"202103"}],["$","td","1",{"children":"003"}],["$","td","2",{"children":"93"}]]}]]}]}]}]]}],["$","h2",null,{"className":"x-h1","children":"第三范式 - 3NF"}],["$","div",null,{"className":"x-highlightblock highlight-background-golden","children":["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"符合第二范式，且非主键列都和主键直接相关，而不能间接相关（依赖于其他非主键字段）。"}}]}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"即第三范式要求不存在<span class=\"x-inline-strong\">传递依赖</span>，非主键属性之间应该是独立无关的。"}}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"下面是一个不符合第三范式的例子："}}],["$","div",null,{"className":"x-table-wrapper","children":["$","table",null,{"className":"x-table","children":["$","tbody",null,{"children":[["$","tr","0",{"children":[["$","th","0",{"children":"id"}],["$","th","1",{"children":"姓名"}],["$","th","2",{"children":"城市"}],["$","th","3",{"children":"城市人口/万"}]]}],["$","tr","1",{"children":[["$","td","0",{"children":"1"}],["$","td","1",{"children":"张三"}],["$","td","2",{"children":"重庆市"}],["$","td","3",{"children":"3100"}]]}],["$","tr","2",{"children":[["$","td","0",{"children":"2"}],["$","td","1",{"children":"李四"}],["$","td","2",{"children":"武汉市"}],["$","td","3",{"children":"1418"}]]}],["$","tr","3",{"children":[["$","td","0",{"children":"3"}],["$","td","1",{"children":"王五"}],["$","td","2",{"children":"北京市"}],["$","td","3",{"children":"2154"}]]}]]}]}]}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"这个例子不符合第三范式，因为存在间接的传递决定关系：<code class=\"x-inline-highlight\">id → 城市 → 城市人口</code>。<code class=\"x-inline-highlight\">城市人口</code>字段直接依赖的是<code class=\"x-inline-highlight\">城市</code>字段，而不是主键<code class=\"x-inline-highlight\">id</code>。正确的做法是设计两张表："}}],["$","div",null,{"className":"x-flexrow","style":{"width":"$undefined","gap":"32px","justifyContent":"$undefined","alignItems":"$undefined"},"children":[["$","div",null,{"className":"x-table-wrapper","children":["$","table",null,{"className":"x-table","children":["$","tbody",null,{"children":[["$","tr","0",{"children":[["$","th","0",{"children":"id"}],["$","th","1",{"children":"姓名"}],["$","th","2",{"children":"城市"}]]}],["$","tr","1",{"children":[["$","td","0",{"children":"1"}],["$","td","1",{"children":"张三"}],["$","td","2",{"children":"重庆市"}]]}],["$","tr","2",{"children":[["$","td","0",{"children":"2"}],["$","td","1",{"children":"李四"}],["$","td","2",{"children":"武汉市"}]]}],["$","tr","3",{"children":[["$","td","0",{"children":"3"}],["$","td","1",{"children":"王五"}],["$","td","2",{"children":"北京市"}]]}]]}]}]}],["$","div",null,{"className":"x-table-wrapper","children":["$","table",null,{"className":"x-table","children":["$","tbody",null,{"children":[["$","tr","0",{"children":[["$","th","0",{"children":"城市"}],["$","th","1",{"children":"城市人口/万"}]]}],["$","tr","1",{"children":[["$","td","0",{"children":"重庆市"}],["$","td","1",{"children":"3100"}]]}],["$","tr","2",{"children":[["$","td","0",{"children":"武汉市"}],["$","td","1",{"children":"1418"}]]}],["$","tr","3",{"children":[["$","td","0",{"children":"北京市"}],["$","td","1",{"children":"2154"}]]}]]}]}]}]]}]],null]]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","(posts)","children","23d","children","database-3nf","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/bb28853473d225b5.css","precedence":"next","crossOrigin":""}]]}]]},["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","(posts)","children","23d","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}]]},[null,["$","div",null,{"id":"post-layout","children":[["$","div",null,{"id":"main","className":"y-center-wrapper","children":["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children","(posts)","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":null}]}],["$","$L5",null,{}]]}],null]]},[null,["$","html",null,{"lang":"zh-CN","suppressHydrationWarning":true,"children":[["$","head",null,{"children":[["$","link",null,{"rel":"icon","href":"/favicon.ico","type":"image/x-icon"}],["$","script",null,{"async":true,"src":"https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"}],["$","script",null,{"async":true,"src":"https://www.googletagmanager.com/gtag/js?id=G-45BYSZ6WPY"}],["$","script",null,{"dangerouslySetInnerHTML":{"__html":"\nwindow.dataLayer = window.dataLayer || [];\nfunction gtag() {\n    dataLayer.push(arguments);\n}\ngtag('js', new Date());\ngtag('config', 'G-45BYSZ6WPY');\n"}}],["$","script",null,{"dangerouslySetInnerHTML":{"__html":"const a=z=>h.getItem(z),b=(y,z)=>h.setItem(y,z),c=(y,z)=>document.documentElement.setAttribute(y,z),d='theme',e='dark',f='light',g='class',h=localStorage;a(d)!==e&&a(d)!==f&&b(d,f);a(d)===e?c(g,e):c(g,f);"}}],["$","script",null,{"dangerouslySetInnerHTML":{"__html":"\nif (!Array.prototype.findLast) {\n    Array.prototype.findLast = function (callback) {\n        for (let i = this.length - 1; i >= 0; i--) {\n            if (callback(this[i])) return this[i];\n        }\n        return undefined;\n    };\n}\nif (!Array.prototype.findLastIndex) {\n    Array.prototype.findLastIndex = function (callback) {\n        for (let i = this.length - 1; i >= 0; i--) {\n            if (callback(this[i])) return i;\n        }\n        return -1;\n    };\n}\n"}}]]}],["$","body",null,{"children":["$","$L6",null,{"children":[["$","$L7",null,{}],["$","$L3",null,{"parallelRouterKey":"children","segmentPath":["children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L4",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":["$","div",null,{"id":"notfound","children":[["$","img",null,{"alt":"img","src":"/images/cry.gif"}],["$","div",null,{"id":"notfound-404","children":"404"}],["$","div",null,{"id":"notfound-text","children":"Page Not Found"}]]}],"notFoundStyles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/0f7cce8b0dae9908.css","precedence":"next","crossOrigin":""}]],"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/615f855f1eaa8d62.css","precedence":"next","crossOrigin":""}]]}]]}]}]]}],null]],[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/1279e9e476ea3436.css","precedence":"next","crossOrigin":""}]],"$L8"]]]]
8:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"数据库设计三大范式 - 铃木的网络日记"}],["$","link","3",{"rel":"canonical","href":"https://1kuzus.github.io/23d/database-3nf/"}]]
1:null
