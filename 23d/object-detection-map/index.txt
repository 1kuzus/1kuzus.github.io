1:HL["/_next/static/css/8ac0b0e7f508d966.css","style",{"crossOrigin":""}]
0:["aCGhGRfB6AbKUEnvQWAtS",[[["",{"children":["(blogs)",{"children":["23d",{"children":["object-detection-map",{"children":["__PAGE__",{}]}]}]}]},"$undefined","$undefined",true],"$L2",[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/8ac0b0e7f508d966.css","precedence":"next","crossOrigin":""}]],"$L3"]]]]
4:HL["/_next/static/css/c84b60895b980f14.css","style",{"crossOrigin":""}]
5:HL["/_next/static/css/f70c26425a044d6b.css","style",{"crossOrigin":""}]
6:I[9226,["185","static/chunks/app/layout-e12e822557cc964c.js"],"GlobalProvider"]
7:I[9330,["185","static/chunks/app/layout-e12e822557cc964c.js"],""]
8:I[6954,[],""]
9:I[7264,[],""]
a:I[5285,["176","static/chunks/176-6509553bec92a789.js","135","static/chunks/app/(blogs)/layout-75f88dfdcbd0ba18.js"],""]
c:I[4484,["954","static/chunks/d3ac728e-1e5d8b71e3d43fec.js","202","static/chunks/202-7b9f876bcb1bf7b4.js","666","static/chunks/app/(blogs)/23d/object-detection-map/page-9a29c3c3270b3b0f.js"],"Title"]
d:I[8411,["954","static/chunks/d3ac728e-1e5d8b71e3d43fec.js","202","static/chunks/202-7b9f876bcb1bf7b4.js","666","static/chunks/app/(blogs)/23d/object-detection-map/page-9a29c3c3270b3b0f.js"],""]
e:I[4484,["954","static/chunks/d3ac728e-1e5d8b71e3d43fec.js","202","static/chunks/202-7b9f876bcb1bf7b4.js","666","static/chunks/app/(blogs)/23d/object-detection-map/page-9a29c3c3270b3b0f.js"],"H1"]
f:I[4484,["954","static/chunks/d3ac728e-1e5d8b71e3d43fec.js","202","static/chunks/202-7b9f876bcb1bf7b4.js","666","static/chunks/app/(blogs)/23d/object-detection-map/page-9a29c3c3270b3b0f.js"],"H3"]
10:I[8275,["954","static/chunks/d3ac728e-1e5d8b71e3d43fec.js","202","static/chunks/202-7b9f876bcb1bf7b4.js","666","static/chunks/app/(blogs)/23d/object-detection-map/page-9a29c3c3270b3b0f.js"],"Uli"]
2:[null,["$","html",null,{"lang":"en","children":["$","body",null,{"children":["$","$L6",null,{"children":[["$","$L7",null,{}],["$","$L8",null,{"parallelRouterKey":"children","segmentPath":["children"],"loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","template":["$","$L9",null,{}],"templateStyles":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"childProp":{"current":[null,["$","$La",null,{"children":["$","$L8",null,{"parallelRouterKey":"children","segmentPath":["children","(blogs)","children"],"loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","template":["$","$L9",null,{}],"templateStyles":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"childProp":{"current":["$","$L8",null,{"parallelRouterKey":"children","segmentPath":["children","(blogs)","children","23d","children"],"loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","template":["$","$L9",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$","$L8",null,{"parallelRouterKey":"children","segmentPath":["children","(blogs)","children","23d","children","object-detection-map","children"],"loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","template":["$","$L9",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$Lb",[["$","$Lc",null,{"children":"$undefined"}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"<span class=\"x-inline-strong\">全类平均精度</span><code class=\"x-inline-highlight\">(mean Average Precision, mAP)</code>用于评估目标检测模型性能。"}}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"接下来围绕下面的例子逐步介绍<code class=\"x-inline-highlight\">mAP</code>的计算。在下面的<code class=\"x-inline-highlight\">7</code>张图片中共有<code class=\"x-inline-highlight\">15</code>个目标，用绿色框标出；并且有<code class=\"x-inline-highlight\">24</code>个检测框，用红色框标出，百分比数值表示置信度。"}}],["$","$Ld",null,{"src":{"default":{"src":"/_next/static/media/fig1.2e7a4e01.png","height":446,"width":809,"blurDataURL":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAECAIAAAA8r+mnAAAAbUlEQVR42mOISwspio3LiY2JyItKzI6py4wtyU5ISAtjiAsNyMuNr85PyElKzE9JqM5NrE1KDA/1Y/j85Ut/X1tDZVlDY2VzXXVDa3Fvd+eXL18Zvn/7nhvtzMDAYOvFYKDKoM/N4OPn/P37DwAYtypf2X4ThAAAAABJRU5ErkJggg==","blurWidth":8,"blurHeight":4}},"width":"600px"}],["$","$Le",null,{"children":"交并比"}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"<span class=\"x-inline-strong\">交并比</span><code class=\"x-inline-highlight\">(Intersection over Union, IoU)</code>是产生的检测框与真实检测框的交集与并集的比值。"}}],["$","$Ld",null,{"src":{"default":{"src":"/_next/static/media/fig2.c8900d3e.jpg","height":211,"width":341,"blurDataURL":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAUACAMBIgACEQEDEQH/xAAnAAEBAAAAAAAAAAAAAAAAAAAABwEBAAAAAAAAAAAAAAAAAAAAA//aAAwDAQACEAMQAAAAqIcf/8QAHBABAAIBBQAAAAAAAAAAAAAAAQIEAAMRE0HB/9oACAEBAAE/AL/JpXK4Siht0+Jn/8QAGREAAQUAAAAAAAAAAAAAAAAAAQADEiFB/9oACAECAQE/ACBBusX/xAAYEQEAAwEAAAAAAAAAAAAAAAABAAIDcf/aAAgBAwEBPwAUvp2f/9k=","blurWidth":8,"blurHeight":5}},"width":"300px","invertInDarkTheme":true}],["$","$Le",null,{"children":"查准率和查全率"}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"对于一组图像的目标检测结果来说，假如规定<code class=\"x-inline-highlight\">IoU</code>大于某一阈值就把检测结果视为真正例<code class=\"x-inline-highlight\">TP</code>，否则视为假正例<code class=\"x-inline-highlight\">FP</code>；并且如果出现多个检测重叠一个真值的情况，只有最高置信度的检测框被视为<code class=\"x-inline-highlight\">TP</code>，其他则视为<code class=\"x-inline-highlight\">FP</code>。"}}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"接下来计算两个指标：<span class=\"x-inline-strong\">查准率</span>或<span class=\"x-inline-strong\">精确率</span><code class=\"x-inline-highlight\">Precision</code>，即预测为正的样本中的正确率<code class=\"x-inline-highlight\">TP/All Detections</code>；<span class=\"x-inline-strong\">查全率</span>或<span class=\"x-inline-strong\">召回率</span><code class=\"x-inline-highlight\">Recall</code>，即正确检测出的正样本占所有正样本的比例<code class=\"x-inline-highlight\">TP/All Ground Truths</code>。"}}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"对于上面的例子，按照置信度由高到低做出如下表格："}}],["$","$Ld",null,{"src":{"default":{"src":"/_next/static/media/fig3.a4f22244.png","height":489,"width":860,"blurDataURL":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAFCAIAAAD38zoCAAAAY0lEQVR42i3DQQ5BQRAE0OqaJiKsxP2v4gbiBo5gg2Gmq8jPT96Ly/W22x/UX227MRP2d47T4569ztRRenOmM1HVZ+nzTKICA2k00UMQo4JFAxFhBFYgW7ClbWkZdEBS/VX9AOlBPTCvTu4XAAAAAElFTkSuQmCC","blurWidth":8,"blurHeight":5}},"width":"80%"}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"表格的前三列分别是图片编号、检测框编号和置信度；<br/><code class=\"x-inline-highlight\">TP</code><code class=\"x-inline-highlight\">FP</code>列标识出这个检测框是否为一个真正例；<br/><code class=\"x-inline-highlight\">Acc TP</code><code class=\"x-inline-highlight\">Acc FP</code>列是截至此行累计的<code class=\"x-inline-highlight\">TP</code>和<code class=\"x-inline-highlight\">FP</code>个数，用于<code class=\"x-inline-highlight\">Precision</code>和<code class=\"x-inline-highlight\">Recall</code>的计算；<br/><code class=\"x-inline-highlight\">Precision</code>列由<code class=\"x-inline-highlight\">Acc TP/(Acc TP + Acc FP)</code>得到；<br/><code class=\"x-inline-highlight\">Recall</code>列由<code class=\"x-inline-highlight\">Acc TP/15</code>得到（共有<code class=\"x-inline-highlight\">15</code>个目标，因此<code class=\"x-inline-highlight\">All Ground Truths</code>=<code class=\"x-inline-highlight\">15</code>）。"}}],["$","$Le",null,{"children":"平均精度AP"}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"<span class=\"x-inline-strong\">平均精度</span><code class=\"x-inline-highlight\">(Average Precision, AP)</code>由近似计算<code class=\"x-inline-highlight\">Precision</code>-<code class=\"x-inline-highlight\">Recall</code>曲线下面积得出。"}}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"通常的计算方法是取曲线<code class=\"x-inline-highlight\">11</code>点插值，不过无论如何计算，最后的含义都是希望得到近似的曲线下面积。因此在这里不展开介绍计算过程，而是讨论“曲线下面积”是如何与“平均精度”建立起联系的。"}}],["$","div",null,{"className":"x-highlightblock highlight-background-gray","children":[["$","$Lf",null,{"children":"个人理解"}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"当我们说模型在一个类别上预测精度是<code class=\"x-inline-highlight\">80%</code>时，直观上的体会是“模型的<code class=\"x-inline-highlight\">10</code>个预测框中，大约有<code class=\"x-inline-highlight\">8</code>个是对目标的正确预测”。然而这并不能与<code class=\"x-inline-highlight\">Precision</code>-<code class=\"x-inline-highlight\">Recall</code>曲线下的面积建立起直观的联系。但注意到曲线的纵坐标的含义就是精度，从这个角度出发，以下是对<code class=\"x-inline-highlight\">AP</code>指标的个人理解："}}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"下面是一个常见的<code class=\"x-inline-highlight\">Precision</code>-<code class=\"x-inline-highlight\">Recall</code>曲线示意图。尽管现实任务中的曲线通常是不平滑、不单调的，但大致可以用图中的较为理想的曲线走势描述。我们通常用<span class=\"x-inline-strong\">平衡点</span>去衡量一个模型的好坏，也就是曲线上<code class=\"x-inline-highlight\">Precision</code>=<code class=\"x-inline-highlight\">Recall</code>的点。"}}],["$","$Ld",null,{"src":{"default":{"src":"/_next/static/media/fig4.124606ff.jpg","height":354,"width":437,"blurDataURL":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAYACAMBIgACEQEDEQH/xAAnAAEBAAAAAAAAAAAAAAAAAAAABwEBAAAAAAAAAAAAAAAAAAAAAP/aAAwDAQACEAMQAAAAr4P/xAAXEAEAAwAAAAAAAAAAAAAAAAABABFS/9oACAEBAAE/AGhNT//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQIBAT8Af//EABQRAQAAAAAAAAAAAAAAAAAAAAD/2gAIAQMBAT8Af//Z","blurWidth":8,"blurHeight":6}},"width":"40%","invertInDarkTheme":true}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"模型在平衡点处的精度与曲线下面积有没有联系呢？下图的蓝色折线<code class=\"x-inline-highlight\">D</code>将曲线<code class=\"x-inline-highlight\">A</code>的平衡点两侧的两段单调递减的曲线近似为直线，如果以折线<code class=\"x-inline-highlight\">D</code>下面积近似曲线<code class=\"x-inline-highlight\">A</code>下面积，将黄色三角形补到右侧后，可以发现蓝色折线<code class=\"x-inline-highlight\">D</code>下的面积恰好反映了平衡点处的精度。"}}],["$","$Ld",null,{"src":{"default":{"src":"/_next/static/media/fig5.eb76009d.jpg","height":355,"width":878,"blurDataURL":"data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoKCgoKCgsMDAsPEA4QDxYUExMUFiIYGhgaGCIzICUgICUgMy03LCksNy1RQDg4QFFeT0pPXnFlZXGPiI+7u/sBCgoKCgoKCwwMCw8QDhAPFhQTExQWIhgaGBoYIjMgJSAgJSAzLTcsKSw3LVFAODhAUV5PSk9ecWVlcY+Ij7u7+//CABEIAAMACAMBIgACEQEDEQH/xAAoAAEBAAAAAAAAAAAAAAAAAAAABwEBAQAAAAAAAAAAAAAAAAAAAgP/2gAMAwEAAhADEAAAAKuHH//EABgQAAIDAAAAAAAAAAAAAAAAAAABAiJy/9oACAEBAAE/AGqy2f/EABURAQEAAAAAAAAAAAAAAAAAAAAB/9oACAECAQE/AK//xAAUEQEAAAAAAAAAAAAAAAAAAAAA/9oACAEDAQE/AH//2Q==","blurWidth":8,"blurHeight":3}},"width":"85%","invertInDarkTheme":true}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"因此可以认为，平均精度<code class=\"x-inline-highlight\">AP</code>某种意义上是用<code class=\"x-inline-highlight\">Precision</code>-<code class=\"x-inline-highlight\">Recall</code>曲线下面积近似反映了平衡点处的<code class=\"x-inline-highlight\">Precision</code>值。"}}]]}],["$","$Le",null,{"children":"全类平均精度mAP"}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"上述步骤算出的是针对一个类别的平均精度<code class=\"x-inline-highlight\">AP</code>，而全类平均精度<code class=\"x-inline-highlight\">mAP</code>是所有检测到的类别的<code class=\"x-inline-highlight\">AP</code>均值。"}}],["$","$Lf",null,{"children":"为什么要分类计算AP，再取均值？"}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"评估模型在目标检测任务上的性能时，通常用所有类别的<code class=\"x-inline-highlight\">AP</code>的平均值，而不是将所有类别的检测结果混在一起，直接计算出一个数值，其中一个原因是：<br/>当类别数量不平衡时，可能某个少样本类别的检测效果很差。如果混在一起计算，由于该类别样本数量较少，因此并不会对最终的结果产生很大的影响。此时对模型的性能评估是不准确的。因此需要逐类测量<code class=\"x-inline-highlight\">AP</code>再取均值，作为最终的<code class=\"x-inline-highlight\">mAP</code>检测结果。"}}],["$","$Le",null,{"children":"参考资料"}],["$","p",null,{"className":"x-p no-margin-bottom","dangerouslySetInnerHTML":{"__html":"本文的部分内容、图片来源于："}}],["$","$L10",null,{"children":"@动手学深度学习 - 计算机视觉[https://zh-v2.d2l.ai/chapter_computer-vision]@"}],["$","$L10",null,{"children":"@目标检测中的mAP是什么含义？[https://www.zhihu.com/question/53405779/answer/2481182203]@"}],["$","$L10",null,{"children":"@深入了解平均精度(mAP)：通过精确率-召回率曲线评估目标检测性能[https://baijiahao.baidu.com/s?id=1767101899839497831]@"}]],null],"segment":"__PAGE__"},"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/f70c26425a044d6b.css","precedence":"next","crossOrigin":""}]]}],"segment":"object-detection-map"},"styles":[]}],"segment":"23d"},"styles":[]}],"params":{}}],null],"segment":"(blogs)"},"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/c84b60895b980f14.css","precedence":"next","crossOrigin":""}]]}]]}]}]}],null]
3:[["$","meta","0",{"charSet":"utf-8"}],["$","title","1",{"children":"Create Next App"}],["$","meta","2",{"name":"description","content":"Generated by create next app"}],["$","meta","3",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","link","4",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"48x48"}]]
b:null
