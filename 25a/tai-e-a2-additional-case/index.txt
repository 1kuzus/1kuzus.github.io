2:I[55329,["481","static/chunks/457b8330-b5c9cf3fcf214847.js","954","static/chunks/d3ac728e-0c798b3b8aa3bf53.js","250","static/chunks/250-0ef8476c0fa8ee24.js","612","static/chunks/612-fa632c1349770315.js","551","static/chunks/551-19232c47cd1e883a.js","842","static/chunks/842-f04c1e7fbbe987af.js","877","static/chunks/app/%5B...slug%5D/page-1ec1b44727de87a0.js"],""]
3:I[76842,["481","static/chunks/457b8330-b5c9cf3fcf214847.js","954","static/chunks/d3ac728e-0c798b3b8aa3bf53.js","250","static/chunks/250-0ef8476c0fa8ee24.js","612","static/chunks/612-fa632c1349770315.js","551","static/chunks/551-19232c47cd1e883a.js","842","static/chunks/842-f04c1e7fbbe987af.js","877","static/chunks/app/%5B...slug%5D/page-1ec1b44727de87a0.js"],"PostMeta"]
4:"$Sreact.suspense"
6:I[76842,["481","static/chunks/457b8330-b5c9cf3fcf214847.js","954","static/chunks/d3ac728e-0c798b3b8aa3bf53.js","250","static/chunks/250-0ef8476c0fa8ee24.js","612","static/chunks/612-fa632c1349770315.js","551","static/chunks/551-19232c47cd1e883a.js","842","static/chunks/842-f04c1e7fbbe987af.js","877","static/chunks/app/%5B...slug%5D/page-1ec1b44727de87a0.js"],"LikeButton"]
7:I[30389,["481","static/chunks/457b8330-b5c9cf3fcf214847.js","954","static/chunks/d3ac728e-0c798b3b8aa3bf53.js","250","static/chunks/250-0ef8476c0fa8ee24.js","612","static/chunks/612-fa632c1349770315.js","551","static/chunks/551-19232c47cd1e883a.js","842","static/chunks/842-f04c1e7fbbe987af.js","877","static/chunks/app/%5B...slug%5D/page-1ec1b44727de87a0.js"],""]
8:I[5613,[],""]
a:I[31778,[],""]
b:I[25694,["250","static/chunks/250-0ef8476c0fa8ee24.js","185","static/chunks/app/layout-adcd83bc3c8eff9d.js"],"GlobalProvider"]
c:I[30397,["250","static/chunks/250-0ef8476c0fa8ee24.js","185","static/chunks/app/layout-adcd83bc3c8eff9d.js"],""]
9:["slug","25a/tai-e-a2-additional-case","c"]
0:["qxZrEDOxbNmPb4vYSU2iW",[[["",{"children":[["slug","25a/tai-e-a2-additional-case","c"],{"children":["__PAGE__?{\"slug\":[\"25a\",\"tai-e-a2-additional-case\"]}",{}]}]},"$undefined","$undefined",true],["",{"children":[["slug","25a/tai-e-a2-additional-case","c"],{"children":["__PAGE__",{},["$L1",[["$","$L2",null,{}],["$","div",null,{"id":"post-layout","children":[false,["$","div",null,{"id":"main","className":"center-wrapper","children":[["$","h1",null,{"className":"post-title","children":"南京大学程序分析Lab2（常量传播）易错样例补充"}],["$","$L3",null,{"path":"/25a/tai-e-a2-additional-case/"}],["$","$4",null,{"fallback":["$","p",null,{"children":"Loading component..."}],"children":"$L5"}],["$","$L6",null,{"path":"/25a/tai-e-a2-additional-case/"}]]}],["$","$L7",null,{}]]}]],null]]},["$","$L8",null,{"parallelRouterKey":"children","segmentPath":["children","$9","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$La",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/34565287a23191ed.css","precedence":"next","crossOrigin":""}]]}]]},[null,["$","html",null,{"lang":"zh-CN","suppressHydrationWarning":true,"children":[["$","head",null,{"children":[["$","link",null,{"rel":"icon","href":"/favicon.ico","type":"image/x-icon"}],["$","script",null,{"async":true,"src":"https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"}],["$","script",null,{"async":true,"src":"https://www.googletagmanager.com/gtag/js?id=G-45BYSZ6WPY"}],["$","script",null,{"dangerouslySetInnerHTML":{"__html":"\nwindow.dataLayer = window.dataLayer || [];\nfunction gtag() {\n    dataLayer.push(arguments);\n}\ngtag('js', new Date());\ngtag('config', 'G-45BYSZ6WPY');\n"}}],["$","script",null,{"dangerouslySetInnerHTML":{"__html":"const a=z=>h.getItem(z),b=(y,z)=>h.setItem(y,z),c=(y,z)=>document.documentElement.setAttribute(y,z),d='theme',e='dark',f='light',g='class',h=localStorage;a(d)!==e&&a(d)!==f&&b(d,f);a(d)===e?c(g,e):c(g,f);"}}],["$","script",null,{"dangerouslySetInnerHTML":{"__html":"\nif (!Array.prototype.findLast) {\n    Array.prototype.findLast = function (callback) {\n        for (let i = this.length - 1; i >= 0; i--) {\n            if (callback(this[i])) return this[i];\n        }\n        return undefined;\n    };\n}\nif (!Array.prototype.findLastIndex) {\n    Array.prototype.findLastIndex = function (callback) {\n        for (let i = this.length - 1; i >= 0; i--) {\n            if (callback(this[i])) return i;\n        }\n        return -1;\n    };\n}\n"}}]]}],["$","body",null,{"children":["$","$Lb",null,{"children":[["$","$Lc",null,{}],["$","$L8",null,{"parallelRouterKey":"children","segmentPath":["children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$La",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":["$","div",null,{"id":"notfound","children":[["$","img",null,{"alt":"img","src":"/images/cry.gif"}],["$","code",null,{"id":"notfound-404","children":"404"}],["$","code",null,{"id":"notfound-text","children":"Page Not Found"}]]}],"notFoundStyles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/98e601cf5ba3633d.css","precedence":"next","crossOrigin":""}]],"styles":null}]]}]}]]}],null]],[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/cd6b648520195f61.css","precedence":"next","crossOrigin":""}]],"$Ld"]]]]
e:I[62029,["481","static/chunks/457b8330-b5c9cf3fcf214847.js","954","static/chunks/d3ac728e-0c798b3b8aa3bf53.js","250","static/chunks/250-0ef8476c0fa8ee24.js","612","static/chunks/612-fa632c1349770315.js","551","static/chunks/551-19232c47cd1e883a.js","842","static/chunks/842-f04c1e7fbbe987af.js","877","static/chunks/app/%5B...slug%5D/page-1ec1b44727de87a0.js"],""]
12:I[74365,["481","static/chunks/457b8330-b5c9cf3fcf214847.js","954","static/chunks/d3ac728e-0c798b3b8aa3bf53.js","250","static/chunks/250-0ef8476c0fa8ee24.js","612","static/chunks/612-fa632c1349770315.js","551","static/chunks/551-19232c47cd1e883a.js","842","static/chunks/842-f04c1e7fbbe987af.js","877","static/chunks/app/%5B...slug%5D/page-1ec1b44727de87a0.js"],""]
f:Tf04,<span class="token keyword">class</span> <span class="token class-name">MyCase</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> m<span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token class-name">WithParameter</span><span class="token punctuation">(</span><span class="token keyword">int</span> x<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> a <span class="token operator">=</span> x<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>a <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            a <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token class-name">CantHoldInt</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">double</span> a <span class="token operator">=</span> <span class="token number">3.14</span><span class="token punctuation">;</span>
        a <span class="token operator">+=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token class-name">LvalNonVar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>m <span class="token operator">=</span> a<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token class-name">OtherExpression</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> b <span class="token operator">=</span> <span class="token operator">-</span>a<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">void</span> <span class="token class-name">DivisionByZero</span><span class="token punctuation">(</span><span class="token keyword">int</span> nac<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> a <span class="token operator">=</span> nac <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> b <span class="token operator">=</span> a <span class="token operator">%</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> c <span class="token operator">=</span> <span class="token number">3</span> <span class="token operator">/</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
10:T61f,-------------------- <MyCase: void <init>()> (constprop) --------------------
[0@L1] invokespecial %this.<java.lang.Object: void <init>()>(); {}
[1@L1] return; {}

-------------------- <MyCase: void WithParameter(int)> (constprop) --------------------
[0@L6] a = x; {a=NAC, x=NAC}
[1@L7] %intconst0 = 0; {%intconst0=0, a=NAC, x=NAC}
[2@L7] if (a < %intconst0) goto 4; {%intconst0=0, a=NAC, x=NAC}
[3@L7] goto 6; {%intconst0=0, a=NAC, x=NAC}
[4@L7] nop; {%intconst0=0, a=NAC, x=NAC}
[5@L8] a = 0; {%intconst0=0, a=0, x=NAC}
[6@L8] nop; {%intconst0=0, a=NAC, x=NAC}
[7@L8] return; {%intconst0=0, a=NAC, x=NAC}

-------------------- <MyCase: void CantHoldInt()> (constprop) --------------------
[0@L13] a = 3.14; {}
[1@L14] %doubleconst0 = 1.0; {}
[2@L14] a = a + %doubleconst0; {}
[3@L14] return; {}

-------------------- <MyCase: void LvalNonVar()> (constprop) --------------------
[0@L18] a = 3; {a=3}
[1@L19] %this.<MyCase: int m> = a; {a=3}
[2@L19] return; {a=3}

-------------------- <MyCase: void OtherExpression()> (constprop) --------------------
[0@L23] a = 3; {a=3}
[1@L24] b = -a; {a=3, b=NAC}
[2@L24] return; {a=3, b=NAC}

-------------------- <MyCase: void DivisionByZero(int)> (constprop) --------------------
[0@L28] %intconst0 = 0; {%intconst0=0, nac=NAC}
[1@L28] a = nac / %intconst0; {%intconst0=0, nac=NAC}
[2@L29] b = a % %intconst0; {%intconst0=0, nac=NAC}
[3@L30] %intconst1 = 3; {%intconst0=0, %intconst1=3, nac=NAC}
[4@L30] c = %intconst1 / %intconst0; {%intconst0=0, %intconst1=3, nac=NAC}
[5@L30] return; {%intconst0=0, %intconst1=3, nac=NAC}
11:T640,-------------------- &lt;MyCase: void &lt;init>()> (constprop) --------------------
[0@L1] invokespecial %this.&lt;java.lang.Object: void &lt;init>()>(); {}
[1@L1] return; {}

-------------------- &lt;MyCase: void WithParameter(int)> (constprop) --------------------
[0@L6] a = x; {a=NAC, x=NAC}
[1@L7] %intconst0 = 0; {%intconst0=0, a=NAC, x=NAC}
[2@L7] if (a &lt; %intconst0) goto 4; {%intconst0=0, a=NAC, x=NAC}
[3@L7] goto 6; {%intconst0=0, a=NAC, x=NAC}
[4@L7] nop; {%intconst0=0, a=NAC, x=NAC}
[5@L8] a = 0; {%intconst0=0, a=0, x=NAC}
[6@L8] nop; {%intconst0=0, a=NAC, x=NAC}
[7@L8] return; {%intconst0=0, a=NAC, x=NAC}

-------------------- &lt;MyCase: void CantHoldInt()> (constprop) --------------------
[0@L13] a = 3.14; {}
[1@L14] %doubleconst0 = 1.0; {}
[2@L14] a = a + %doubleconst0; {}
[3@L14] return; {}

-------------------- &lt;MyCase: void LvalNonVar()> (constprop) --------------------
[0@L18] a = 3; {a=3}
[1@L19] %this.&lt;MyCase: int m> = a; {a=3}
[2@L19] return; {a=3}

-------------------- &lt;MyCase: void OtherExpression()> (constprop) --------------------
[0@L23] a = 3; {a=3}
[1@L24] b = -a; {a=3, b=NAC}
[2@L24] return; {a=3, b=NAC}

-------------------- &lt;MyCase: void DivisionByZero(int)> (constprop) --------------------
[0@L28] %intconst0 = 0; {%intconst0=0, nac=NAC}
[1@L28] a = nac / %intconst0; {%intconst0=0, nac=NAC}
[2@L29] b = a % %intconst0; {%intconst0=0, nac=NAC}
[3@L30] %intconst1 = 3; {%intconst0=0, %intconst1=3, nac=NAC}
[4@L30] c = %intconst1 / %intconst0; {%intconst0=0, %intconst1=3, nac=NAC}
[5@L30] return; {%intconst0=0, %intconst1=3, nac=NAC}
5:[["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"NJU程序分析<a href=\"https://tai-e.pascal-lab.net/pa2.html\" target=\"_blank\" rel=\"noreferrer\" class=\"x-inline-link\">常量传播的Lab</a>在仓库的测试用例中给出的都是比较简单的例子，有一些易错情况没有包括。这个Lab通过率比较低，自己也参考了一些博客改了几次才过OJ，因此这里把一些易错的样例整理出来，便于调试。"}}],["$","h2",null,{"className":"x-h1","children":"易错情况"}],["$","div",null,{"className":"x-oli","children":[["$","div",null,{"className":"x-oli-number","children":"1."}],["$","div",null,{"className":"x-oli-content-wrapper","children":["$","p",null,{"dangerouslySetInnerHTML":{"__html":"方法参数的初始化：要初始化成<code class=\"x-inline-highlight\">NAC</code>，见作业文档。<br/>对应的测试方法：<code class=\"x-inline-highlight\">WithParameter</code>"}}]}]]}],["$","div",null,{"className":"x-oli","children":[["$","div",null,{"className":"x-oli-number","children":"2."}],["$","div",null,{"className":"x-oli-content-wrapper","children":["$","p",null,{"dangerouslySetInnerHTML":{"__html":"非整型：此Lab只考虑整型的变量，注意在初始化以及<code class=\"x-inline-highlight\">transferNode</code>中判断左值时，要用<code class=\"x-inline-highlight\">canHoldInt</code>判断下。<br/>对应的测试方法：<code class=\"x-inline-highlight\">CantHoldInt</code>"}}]}]]}],["$","div",null,{"className":"x-oli","children":[["$","div",null,{"className":"x-oli-number","children":"3."}],["$","div",null,{"className":"x-oli-content-wrapper","children":["$","p",null,{"dangerouslySetInnerHTML":{"__html":"左值不是<code class=\"x-inline-highlight\">Var</code>类型：即便判断一条语句<code class=\"x-inline-highlight\">stmt</code>是<code class=\"x-inline-highlight\">DefinitionStmt</code>类型，<code class=\"x-inline-highlight\">stmt.getLValue()</code>也不一定返回<code class=\"x-inline-highlight\">Var</code>类型，比如函数调用语句（<code class=\"x-inline-highlight\">Invoke</code>）的左值可能为<code class=\"x-inline-highlight\">null</code>（如果没有变量接收返回值），对类的成员变量赋值左值类型为<code class=\"x-inline-highlight\">InstanceFieldAccess</code>。<br/>对应的测试方法：<code class=\"x-inline-highlight\">LvalNonVar</code>"}}]}]]}],["$","div",null,{"className":"x-oli","children":[["$","div",null,{"className":"x-oli-number","children":"4."}],["$","div",null,{"className":"x-oli-content-wrapper","children":["$","p",null,{"dangerouslySetInnerHTML":{"__html":"非二元表达式：比如单目运算符取反，此Lab不考虑，按照<code class=\"x-inline-highlight\">NAC</code>处理。<br/>对应的测试方法：<code class=\"x-inline-highlight\">OtherExpression</code>"}}]}]]}],["$","div",null,{"className":"x-oli","children":[["$","div",null,{"className":"x-oli-number","children":"5."}],["$","div",null,{"className":"x-oli-content-wrapper","children":["$","p",null,{"dangerouslySetInnerHTML":{"__html":"除零：除零和模零规定结果为<code class=\"x-inline-highlight\">UNDEF</code>，见作业文档。<br/>对应的测试方法：<code class=\"x-inline-highlight\">DivisionByZero</code>"}}]}]]}],["$","h2",null,{"className":"x-h1","children":"测试样例"}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"<code class=\"x-inline-highlight\">MyCase.java</code>："}}],["$","div",null,{"className":"x-codeblock","children":[["$","div",null,{"className":"x-codeblock-header","children":[["$","div",null,{"className":"x-codeblock-header-language","children":"Java"}],["$","$Le",null,{"className":"x-codeblock-header-copy","text":"class MyCase {\n\n    private int m;\n\n    void WithParameter(int x) {\n        int a = x;\n        if (a < 0) {\n            a = 0;\n        }\n    }\n\n    void CantHoldInt() {\n        double a = 3.14;\n        a += 1;\n    }\n\n    void LvalNonVar() {\n        int a = 3;\n        this.m = a;\n    }\n\n    void OtherExpression() {\n        int a = 3;\n        int b = -a;\n    }\n\n    void DivisionByZero(int nac) {\n        int a = nac / 0;\n        int b = a % 0;\n        int c = 3 / 0;\n    }\n}\n"}]]}],["$","pre",null,{"style":{"background":null},"children":["$","code",null,{"dangerouslySetInnerHTML":{"__html":"$f"}}]}]]}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"<code class=\"x-inline-highlight\">MyCase-constprop-expected.txt</code>："}}],["$","div",null,{"className":"x-codeblock","children":[["$","div",null,{"className":"x-codeblock-header","children":[["$","div",null,{"className":"x-codeblock-header-language","children":"Plain Text"}],["$","$Le",null,{"className":"x-codeblock-header-copy","text":"$10"}]]}],["$","pre",null,{"style":{"background":null},"children":["$","code",null,{"dangerouslySetInnerHTML":{"__html":"$11"}}]}]]}],["$","h2",null,{"className":"x-h1","children":"使用方法"}],["$","h3",null,{"className":"x-h2","children":"单独运行"}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"创建<code class=\"x-inline-highlight\">src/test/resources/dataflow/constprop/MyCase.java</code>，然后如图修改运行配置："}}],["$","$L12",null,{"src":"fig1.jpg"}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"可以参考<a href=\"https://tai-e.pascal-lab.net/intro/setup.html#_3-%E4%BB%A5%E5%BA%94%E7%94%A8%E8%BD%AF%E4%BB%B6%E7%9A%84%E5%BD%A2%E5%BC%8F%E8%BF%90%E8%A1%8C-tai-e\" target=\"_blank\" rel=\"noreferrer\" class=\"x-inline-link\">以应用软件的形式运行 Tai-e</a>。这种方法需要手动比对输出结果。"}}],["$","h3",null,{"className":"x-h2","children":"单元测试"}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"将<code class=\"x-inline-highlight\">MyCase.java</code>和<code class=\"x-inline-highlight\">MyCase-constprop-expected.txt</code>都放到<code class=\"x-inline-highlight\">src/test/resources/dataflow/constprop</code>目录下："}}],["$","$L12",null,{"src":"fig2.jpg"}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"然后编辑<code class=\"x-inline-highlight\">src/test/java/pascal/taie/analysis/dataflow/analysis/constprop/CPTest.java</code>，加入代码："}}],["$","div",null,{"className":"x-codeblock","children":[["$","div",null,{"className":"x-codeblock-header","children":[["$","div",null,{"className":"x-codeblock-header-language","children":"Java"}],["$","$Le",null,{"className":"x-codeblock-header-copy","text":"@Test\npublic void testMyCase() {\n    testCP(\"MyCase\");\n}\n"}]]}],["$","pre",null,{"style":{"background":null},"children":["$","code",null,{"dangerouslySetInnerHTML":{"__html":"<span class=\"token annotation punctuation\">@Test</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">testMyCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">testCP</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"MyCase\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n"}}]}]]}],["$","$L12",null,{"src":"fig3.jpg"}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"运行测试："}}],["$","div",null,{"className":"x-codeblock","children":[["$","div",null,{"className":"x-codeblock-header","children":[["$","div",null,{"className":"x-codeblock-header-language","children":"Plain Text"}],["$","$Le",null,{"className":"x-codeblock-header-copy","text":"./gradlew clean test"}]]}],["$","pre",null,{"style":{"background":null},"children":["$","code",null,{"dangerouslySetInnerHTML":{"__html":"./gradlew clean test"}}]}]]}]]
d:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"南京大学程序分析Lab2（常量传播）易错样例补充 - 铃木的网络日记"}],["$","link","3",{"rel":"canonical","href":"https://1kuzus.github.io/25a/tai-e-a2-additional-case/"}]]
1:null
