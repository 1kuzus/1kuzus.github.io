<!DOCTYPE html><html lang="zh-CN"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="/_next/static/css/268aef745a7b3740.css" crossorigin="" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/34565287a23191ed.css" crossorigin="" data-precedence="next"/><link rel="preload" as="script" fetchPriority="low" href="/_next/static/chunks/webpack-e1a5f2ba60e36b85.js" crossorigin=""/><script src="/_next/static/chunks/fd9d1056-e278622fa62dc0bf.js" async="" crossorigin=""></script><script src="/_next/static/chunks/69-faab496ef6116e58.js" async="" crossorigin=""></script><script src="/_next/static/chunks/main-app-ed6799cd4e1df27b.js" async="" crossorigin=""></script><script src="/_next/static/chunks/457b8330-b5c9cf3fcf214847.js" async=""></script><script src="/_next/static/chunks/d3ac728e-0c798b3b8aa3bf53.js" async=""></script><script src="/_next/static/chunks/250-0ef8476c0fa8ee24.js" async=""></script><script src="/_next/static/chunks/612-fa632c1349770315.js" async=""></script><script src="/_next/static/chunks/551-19232c47cd1e883a.js" async=""></script><script src="/_next/static/chunks/842-812b9489b5c7f4d9.js" async=""></script><script src="/_next/static/chunks/app/%5B...slug%5D/page-5eb8e12f7c16248f.js" async=""></script><script src="/_next/static/chunks/app/page-8a7b32c8a4befa3e.js" async=""></script><script src="/_next/static/chunks/app/layout-8f33aca7be8ff34b.js" async=""></script><script async="" src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-45BYSZ6WPY"></script><title>Python面向对象编程 - 铃木的网络日记</title><link rel="canonical" href="https://1kuzus.github.io/24a/object-oriented-programming-python/"/><link rel="icon" href="/favicon.ico" type="image/x-icon"/><script>
window.dataLayer = window.dataLayer || [];
function gtag() {
    dataLayer.push(arguments);
}
gtag('js', new Date());
gtag('config', 'G-45BYSZ6WPY');
</script><script>const a=z=>h.getItem(z),b=(y,z)=>h.setItem(y,z),c=(y,z)=>document.documentElement.setAttribute(y,z),d='theme',e='dark',f='light',g='class',h=localStorage;a(d)!==e&&a(d)!==f&&b(d,f);a(d)===e?c(g,e):c(g,f);</script><script>
if (!Array.prototype.findLast) {
    Array.prototype.findLast = function (callback) {
        for (let i = this.length - 1; i >= 0; i--) {
            if (callback(this[i])) return this[i];
        }
        return undefined;
    };
}
if (!Array.prototype.findLastIndex) {
    Array.prototype.findLastIndex = function (callback) {
        for (let i = this.length - 1; i >= 0; i--) {
            if (callback(this[i])) return i;
        }
        return -1;
    };
}
</script><script src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" crossorigin="" noModule=""></script></head><body><div id="header"><div id="header-left-wrapper"><a href="/"><div id="header-logo-bg"><svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 1560 1560"><path fill="#00A8C4" d="M644 97h273l272 683H916z"></path><path fill="#30303C" d="M98 97h273l409 1024L1189 97h273L916 1462H644z"></path><path fill="#00F8FF" d="M98 1462 643 97h273L371 1462z"></path></svg></div></a></div><div id="header-right-wrapper"><button id="header-show-sidebar-button" class="header-button-bg"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024"><rect fill="#FCFCFC" x="100" y="148" width="824" height="128" rx="64"></rect><rect fill="#FCFCFC" x="100" y="448" width="824" height="128" rx="64"></rect><rect fill="#FCFCFC" x="100" y="748" width="824" height="128" rx="64"></rect></svg></button><button class="header-button-bg"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-dark-theme-icon"><path d="M525 939h-4a440 440 0 0 1-314-135 446 446 0 0 1-11-597A432 432 0 0 1 367 90a43 43 0 0 1 45 9 43 43 0 0 1 10 43 358 358 0 0 0 83 376 361 361 0 0 0 377 83 43 43 0 0 1 54 55 433 433 0 0 1-100 155 439 439 0 0 1-311 128z" fill="#FCFCFC"></path></svg><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-light-theme-icon"><path d="M512 61c13 0 25 8 30 20l28 68c11 29-5 62-36 73a66 66 0 0 1-22 3c-34 0-61-25-61-56 0-7 1-14 3-20l28-68c5-12 17-20 30-20zm0 902c-13 0-25-8-30-20l-28-68a53 53 0 0 1-3-20c0-31 27-56 61-56a66 66 0 0 1 22 3c31 11 47 44 36 73l-28 68c-5 12-17 20-30 20zm451-451c0 13-8 25-20 30l-68 28c-29 11-62-5-73-36a66 66 0 0 1-3-22c0-34 25-61 56-61 7 0 14 1 20 3l68 28c12 5 20 17 20 30zm-902 0c0-13 8-25 20-30l68-28a53 53 0 0 1 20-3c31 0 56 27 56 61a66 66 0 0 1-3 22 57 57 0 0 1-73 36l-68-28c-12-5-20-17-20-30zm132-319c10-9 24-12 35-7l68 28c29 13 41 47 26 77a66 66 0 0 1-13 18c-24 24-61 26-83 4a53 53 0 0 1-12-17l-28-68c-5-11-2-25 7-35zm638 638c-10 9-24 12-35 7l-68-28a53 53 0 0 1-17-12c-22-22-20-59 4-83a66 66 0 0 1 18-13c30-15 64-3 77 26l28 68c5 11 2 25-7 35zm0-638c9 10 12 24 7 35l-28 68a56 56 0 0 1-77 26 66 66 0 0 1-18-13c-24-24-26-61-4-83 5-5 11-9 17-12l68-28c11-5 25-2 35 7zM193 831c-9-10-12-24-7-35l28-68a53 53 0 0 1 12-17c22-22 59-20 83 4a66 66 0 0 1 13 18c15 30 3 64-26 77l-68 28c-11 5-25 2-35-7zm319-94a225 225 0 1 1 0-450 225 225 0 0 1 0 450z" fill="#FCFCFC"></path></svg></button><a href="https://github.com/1kuzus/1kuzus.github.io" target="_blank" rel="noreferrer"><div class="header-button-bg"><svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 1024 1024"><path d="M411 831c4-5 7-10 7-12v-70c-106 22-128-44-128-44-17-45-43-56-43-56-34-24 4-24 4-24 37 3 58 39 58 39 34 58 89 41 111 32 3-24 13-41 24-51-86-10-174-43-174-188 0-41 15-75 39-102-4-10-17-48 3-101 0 0 33-10 104 40 31-9 64-12 96-12s65 5 96 12c73-50 104-40 104-40 20 53 8 91 3 101 24 27 39 60 39 102 0 145-88 178-174 188 14 12 26 34 26 70v104c0 4 2 7 7 12 5 7 3 19-4 24-3 2-7 3-10 3H425c-10 0-17-6-17-17 0-5 2-8 3-10z" fill="#FCFCFC"></path></svg></div></a></div></div><div id="contents"><h4 id="contents-header">本页目录</h4></div><div id="post-layout"><div id="main" class="center-wrapper"><h1 class="post-title">Python面向对象编程</h1><div class="post-meta"><code class="not-loaded">null likes<!-- --> · </code><code class="not-loaded">null views<!-- --> · </code><code>2024-02-29</code></div><!--$--><p class="x-p">本文对面向对象的基本理论（为什么要有类、什么是属性、什么是方法等）不多做解释，重点在Python中的编程实现。</p><h2 class="x-h1">基本操作</h2><h3 class="x-h2">定义一个类</h3><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre style="background:linear-gradient(180deg, transparent 72px, var(--bg-transparent-golden) 72px 192px, transparent 192px)"><code><span class="token keyword">class</span> <span class="token class-name">Unit</span><span class="token punctuation">:</span>
    <span class="token comment"># 初始化方法/构造函数</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> hp<span class="token punctuation">,</span> damage<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 实例属性</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>hp <span class="token operator">=</span> hp
        self<span class="token punctuation">.</span>damage <span class="token operator">=</span> damage

    <span class="token comment"># 实例方法</span>
    <span class="token keyword">def</span> <span class="token function">sayhi</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"hi, I'm </span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>

u1 <span class="token operator">=</span> Unit<span class="token punctuation">(</span><span class="token string">"u1"</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
u2 <span class="token operator">=</span> Unit<span class="token punctuation">(</span><span class="token string">"u2"</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>

u1<span class="token punctuation">.</span>sayhi<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># Hi, I'm u1</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>u1<span class="token punctuation">.</span>hp<span class="token punctuation">)</span>  <span class="token comment"># 100</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>u1<span class="token punctuation">.</span>damage<span class="token punctuation">)</span>  <span class="token comment"># 20</span>
</code></pre></div><p class="x-p">上面的代码定义了一个<code class="x-inline-highlight">Unit</code>类，这个例子中暂且理解为一个游戏中的作战单位，每个单位具有名字<code class="x-inline-highlight">name</code>、生命值<code class="x-inline-highlight">hp</code>、攻击力<code class="x-inline-highlight">damage</code>这些属性。</p><p class="x-p"><code class="x-inline-highlight">__init__</code>方法称作类的<span class="x-inline-strong">初始化方法</span>/<span class="x-inline-strong">构造函数</span>，实例本身会作为函数的第一个参数<code class="x-inline-highlight">self</code>被传入。从这个角度理解，实际上<code class="x-inline-highlight">__init__</code>方法是将传入的参数“绑定”到新创建的实例上。</p><h3 class="x-h2">类属性和实例属性</h3><p class="x-p">我们在类下直接定义了一个属性<code class="x-inline-highlight">utype</code>，它是一个<code class="x-inline-highlight">类属性</code>；与之对应的是<code class="x-inline-highlight">__init__</code>方法为实例创建的属性，我们称之为<code class="x-inline-highlight">实例属性</code>。</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre style="background:linear-gradient(180deg, transparent 72px, var(--bg-transparent-golden) 72px 96px, transparent 96px)"><code><span class="token keyword">class</span> <span class="token class-name">Unit</span><span class="token punctuation">:</span>
    <span class="token comment"># 类属性，占用同一块地址</span>
    utype <span class="token operator">=</span> <span class="token string">"unit"</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> hp<span class="token punctuation">,</span> damage<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 实例属性，独属于每个实例</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>hp <span class="token operator">=</span> hp
        self<span class="token punctuation">.</span>damage <span class="token operator">=</span> damage

    <span class="token keyword">def</span> <span class="token function">sayhi</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"hi, I'm %s"</span> <span class="token operator">%</span> self<span class="token punctuation">.</span>name<span class="token punctuation">)</span>

u1 <span class="token operator">=</span> Unit<span class="token punctuation">(</span><span class="token string">"u1"</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
u2 <span class="token operator">=</span> Unit<span class="token punctuation">(</span><span class="token string">"u2"</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
</code></pre></div><p class="x-p">访问实例属性时，把它们当作普通变量就好了；实例属性也可以在<code class="x-inline-highlight">__init__</code>方法之外动态的添加。</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre><code><span class="token keyword">print</span><span class="token punctuation">(</span>u1<span class="token punctuation">.</span>hp<span class="token punctuation">)</span>  <span class="token comment"># 100</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>u1<span class="token punctuation">.</span>damage<span class="token punctuation">)</span>  <span class="token comment"># 20</span>
u1<span class="token punctuation">.</span>level <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>u1<span class="token punctuation">.</span>level<span class="token punctuation">)</span>  <span class="token comment"># 1</span>
</code></pre></div><p class="x-p">类属性可以在类上取得，也可以在实例上取得。类属性共享内存地址。</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre><code><span class="token keyword">print</span><span class="token punctuation">(</span>Unit<span class="token punctuation">.</span>utype<span class="token punctuation">,</span> u1<span class="token punctuation">.</span>utype<span class="token punctuation">,</span> u2<span class="token punctuation">.</span>utype<span class="token punctuation">)</span>  <span class="token comment"># unit unit unit</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">id</span><span class="token punctuation">(</span>Unit<span class="token punctuation">.</span>utype<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 2197356757808</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">id</span><span class="token punctuation">(</span>u1<span class="token punctuation">.</span>utype<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># 2197356757808</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">id</span><span class="token punctuation">(</span>u2<span class="token punctuation">.</span>utype<span class="token punctuation">)</span><span class="token punctuation">)</span>    <span class="token comment"># 2197356757808</span>
</code></pre></div><p class="x-p">由于共享内存地址，因此修改类属性具有全局性：</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre><code>Unit<span class="token punctuation">.</span>utype <span class="token operator">=</span> <span class="token string">"spell"</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>Unit<span class="token punctuation">.</span>utype<span class="token punctuation">,</span> u1<span class="token punctuation">.</span>utype<span class="token punctuation">,</span> u2<span class="token punctuation">.</span>utype<span class="token punctuation">)</span>  <span class="token comment"># spell spell spell</span>
</code></pre></div><div class="x-highlightblock highlight-background-golden"><h4 class="x-h3">注意</h4><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre><code>u1<span class="token punctuation">.</span>utype <span class="token operator">=</span> <span class="token string">"hero"</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>Unit<span class="token punctuation">.</span>utype<span class="token punctuation">,</span> u1<span class="token punctuation">.</span>utype<span class="token punctuation">,</span> u2<span class="token punctuation">.</span>utype<span class="token punctuation">)</span>  <span class="token comment"># spell hero spell</span>
</code></pre></div><p class="x-p">如果同样的属性名称同时出现在实例和类中，则属性查找会优先选择实例属性。上面的例子相当于给<code class="x-inline-highlight">u1</code>添加了一个与类属性同名实例属性，<code class="x-inline-highlight">u1.utype</code>访问到的不是类属性。</p><p class="x-p">要想访问<code class="x-inline-highlight">u1</code>的类属性，可以通过<code class="x-inline-highlight">__class__</code>访问：</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre><code><span class="token keyword">print</span><span class="token punctuation">(</span>u1<span class="token punctuation">.</span>__class__<span class="token punctuation">.</span>utype<span class="token punctuation">)</span>  <span class="token comment"># spell</span></code></pre></div></div><h2 class="x-h1">继承</h2><h3 class="x-h2">实现一个子类</h3><p class="x-p">我们还是定义一个<code class="x-inline-highlight">Unit</code>类，并实现两个方法：<code class="x-inline-highlight">info</code>用于输出自身基本信息，<code class="x-inline-highlight">attack</code>模拟攻击另一个单位。</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre><code><span class="token keyword">class</span> <span class="token class-name">Unit</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> hp<span class="token punctuation">,</span> damage<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>hp <span class="token operator">=</span> hp
        self<span class="token punctuation">.</span>damage <span class="token operator">=</span> damage

    <span class="token keyword">def</span> <span class="token function">info</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"name: </span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string">, hp: </span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>hp<span class="token punctuation">}</span></span><span class="token string">, damage: </span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>damage<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">attack</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> unit<span class="token punctuation">)</span><span class="token punctuation">:</span>
        unit<span class="token punctuation">.</span>hp <span class="token operator">-=</span> self<span class="token punctuation">.</span>damage
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string"> attacks </span><span class="token interpolation"><span class="token punctuation">{</span>unit<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token punctuation">{</span>unit<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string">.hp = </span><span class="token interpolation"><span class="token punctuation">{</span>unit<span class="token punctuation">.</span>hp<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>
</code></pre></div><p class="x-p">现在我们希望实现一个<code class="x-inline-highlight">GroundUnit</code>类，表示地面单位，并且地面单位具有特有的伤害加成，用属性<code class="x-inline-highlight">buff</code>定义。显然，会有大量的逻辑与<code class="x-inline-highlight">Unit</code>类是重复的。这时可以通过继承来实现：</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre style="background:linear-gradient(180deg, transparent 72px, var(--bg-transparent-golden) 72px 96px, transparent 96px)"><code><span class="token keyword">class</span> <span class="token class-name">GroundUnit</span><span class="token punctuation">(</span>Unit<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> hp<span class="token punctuation">,</span> damage<span class="token punctuation">,</span> buff<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>name<span class="token punctuation">,</span> hp<span class="token punctuation">,</span> damage<span class="token punctuation">)</span>
        <span class="token comment"># 子类新增的实例属性</span>
        self<span class="token punctuation">.</span>buff <span class="token operator">=</span> buff

    <span class="token comment"># 重写父类方法</span>
    <span class="token keyword">def</span> <span class="token function">attack</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> unit<span class="token punctuation">)</span><span class="token punctuation">:</span>
        unit<span class="token punctuation">.</span>hp <span class="token operator">-=</span> self<span class="token punctuation">.</span>damage <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">1</span> <span class="token operator">+</span> self<span class="token punctuation">.</span>buff<span class="token punctuation">)</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string"> attacks </span><span class="token interpolation"><span class="token punctuation">{</span>unit<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token punctuation">{</span>unit<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string">.hp = </span><span class="token interpolation"><span class="token punctuation">{</span>unit<span class="token punctuation">.</span>hp<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>

gu1 <span class="token operator">=</span> GroundUnit<span class="token punctuation">(</span><span class="token string">"gu1"</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">)</span>
gu2 <span class="token operator">=</span> GroundUnit<span class="token punctuation">(</span><span class="token string">"gu2"</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">)</span>

gu2<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># name: gu2, hp: 200, damage: 10</span>
gu1<span class="token punctuation">.</span>attack<span class="token punctuation">(</span>gu2<span class="token punctuation">)</span>  <span class="token comment"># gu1 attacks gu2, gu2.hp = 176.0</span>
gu2<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># name: gu2, hp: 176.0, damage: 10</span>
</code></pre></div><p class="x-p">定义类时，用<code class="x-inline-highlight">class 子类(父类):</code>表示继承。如果子类有自己的构造函数，会覆盖父类的构造函数；否则会继承父类的构造函数。</p><p class="x-p">代码中<code class="x-inline-highlight">super()</code>函数可以找到父类，高亮的代码等价于<code class="x-inline-highlight">Unit.__init__(self, name, hp, damage)</code>。</p><p class="x-p">如果子类需要对父类的方法进行重写，只需要在子类下定义同名方法，然后重写逻辑。其他父类的方法会被继承到子类中，例如这个例子中的<code class="x-inline-highlight">info()</code>。</p><h3 class="x-h2">isinstance函数</h3><p class="x-p"><code class="x-inline-highlight">isinstance(实例,类)</code>可以判断一个实例是否属于给定的类。<span class="x-inline-strong">子类的实例同时也是父类的实例</span>。</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre><code>u1 <span class="token operator">=</span> Unit<span class="token punctuation">(</span><span class="token string">"u1"</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
gu1 <span class="token operator">=</span> GroundUnit<span class="token punctuation">(</span><span class="token string">"gu1"</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">isinstance</span><span class="token punctuation">(</span>u1<span class="token punctuation">,</span> Unit<span class="token punctuation">)</span><span class="token punctuation">)</span>         <span class="token comment"># True</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">isinstance</span><span class="token punctuation">(</span>u1<span class="token punctuation">,</span> GroundUnit<span class="token punctuation">)</span><span class="token punctuation">)</span>   <span class="token comment"># False</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">isinstance</span><span class="token punctuation">(</span>gu1<span class="token punctuation">,</span> Unit<span class="token punctuation">)</span><span class="token punctuation">)</span>        <span class="token comment"># True</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">isinstance</span><span class="token punctuation">(</span>gu1<span class="token punctuation">,</span> GroundUnit<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># True</span>
</code></pre></div><h3 class="x-h2">多继承</h3><p class="x-p">假设我们的游戏复杂起来，引入了稀有度系统，每个单位有一个所属的稀有度，例如普通、稀有、史诗、传奇等等。以史诗级为例，假设对于这些不同稀有度的单位有着其他独特的机制，以至于我们不得不新创建一个<code class="x-inline-highlight">EpicRarity</code>类：</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre><code><span class="token keyword">class</span> <span class="token class-name">EpicRarity</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> level<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>level <span class="token operator">=</span> level

    <span class="token keyword">def</span> <span class="token function">info</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"This is a lv.</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>level<span class="token punctuation">}</span></span><span class="token string"> epic unit"</span></span><span class="token punctuation">)</span>
</code></pre></div><p class="x-p">当然，为了便于演示，我们只定义了一个<code class="x-inline-highlight">level</code>属性和<code class="x-inline-highlight">info</code>方法。</p><p class="x-p">现在，我们想实现<code class="x-inline-highlight">EpicGroundUnit</code>子类，表示史诗级地面单位。显然它需要同时继承父类<code class="x-inline-highlight">EpicRarity</code>和<code class="x-inline-highlight">GroundUnit</code>，这就是<span class="x-inline-strong">多继承</span>。</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre style="background:linear-gradient(180deg, transparent 72px, var(--bg-transparent-golden) 72px 120px, transparent 120px)"><code><span class="token keyword">class</span> <span class="token class-name">EpicGroundUnit</span><span class="token punctuation">(</span>EpicRarity<span class="token punctuation">,</span> GroundUnit<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> hp<span class="token punctuation">,</span> damage<span class="token punctuation">,</span> buff<span class="token punctuation">,</span> level<span class="token punctuation">)</span><span class="token punctuation">:</span>
        GroundUnit<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> hp<span class="token punctuation">,</span> damage<span class="token punctuation">,</span> buff<span class="token punctuation">)</span>
        EpicRarity<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">,</span> level<span class="token punctuation">)</span>

egu1 <span class="token operator">=</span> EpicGroundUnit<span class="token punctuation">(</span><span class="token string">"egu1"</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>

egu1<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># This is a lv.1 epic unit</span>
</code></pre></div><p class="x-p">在构造函数中我们需要分别对父类进行初始化。</p><p class="x-p">注意到两个父类都实现了<code class="x-inline-highlight">info</code>方法并且没有被子类重写。调用之后我们发现，子类继承的是<code class="x-inline-highlight">EpicRarity</code>的<code class="x-inline-highlight">info</code>方法。如果代码改写为：</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre style="background:linear-gradient(180deg, transparent 24px, var(--bg-transparent-golden) 24px 48px, transparent 48px)"><code><span class="token keyword">class</span> <span class="token class-name">EpicGroundUnit</span><span class="token punctuation">(</span>GroundUnit<span class="token punctuation">,</span> EpicRarity<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> hp<span class="token punctuation">,</span> damage<span class="token punctuation">,</span> buff<span class="token punctuation">,</span> level<span class="token punctuation">)</span><span class="token punctuation">:</span>
        GroundUnit<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> hp<span class="token punctuation">,</span> damage<span class="token punctuation">,</span> buff<span class="token punctuation">)</span>
        EpicRarity<span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>self<span class="token punctuation">,</span> level<span class="token punctuation">)</span>

egu1 <span class="token operator">=</span> EpicGroundUnit<span class="token punctuation">(</span><span class="token string">"egu1"</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">0.2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>

egu1<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># name: egu1, hp: 100, damage: 20</span>
</code></pre></div><p class="x-p">就会发现，调换父类的顺序后，现在子类继承的是<code class="x-inline-highlight">GroundUnit</code>的<code class="x-inline-highlight">info</code>方法。这就引出了下一节的内容：<span class="x-inline-strong">方法解析顺序</span>。</p><h3 class="x-h2">方法解析顺序MRO</h3><p class="x-p">对于多继承情况下的同名方法，如何从父类中找应该优先使用哪个父类的方法就叫<span class="x-inline-strong">方法解析顺序</span><code class="x-inline-highlight">(Method Resolution Order, MRO)</code>。 Python采用<a href="https://zh.wikipedia.org/zh-cn/C3%E7%BA%BF%E6%80%A7%E5%8C%96" target="_blank" rel="noreferrer" class="x-inline-link">C3线性化</a>算法来计算线性化列表，保证继承顺序列表中每个类只出现一次。</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre><code><span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">test</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'A'</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">B</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">test</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">'B'</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">C</span><span class="token punctuation">(</span>A<span class="token punctuation">,</span> B<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>

<span class="token keyword">class</span> <span class="token class-name">D</span><span class="token punctuation">(</span>C<span class="token punctuation">,</span> B<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>

obj <span class="token operator">=</span> D<span class="token punctuation">(</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span>test<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># A</span>
</code></pre></div><p class="x-p">上述代码描述了一个如下图所示的复杂继承关系：</p><img alt="img" loading="lazy" width="505" height="374" decoding="async" data-nimg="1" class="x-image x-image-invert" style="color:transparent;width:300px;height:auto" src="/_next/static/media/mro.39176437.jpg"/><p class="x-p">可以通过<code class="x-inline-highlight">mro()</code>函数得到类的方法解析顺序：</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre><code><span class="token comment"># 注意是类名，不是实例名</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>D<span class="token punctuation">.</span>mro<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># [&lt;class '__main__.D'>, &lt;class '__main__.C'>, &lt;class '__main__.A'>, &lt;class '__main__.B'>, &lt;class 'object'>]</span>
</code></pre></div><p class="x-p">输出的列表中，从左到右的顺序为查找方法的顺序。上述例子中，<code class="x-inline-highlight">D</code>和<code class="x-inline-highlight">C</code>类都没有定义<code class="x-inline-highlight">test</code>方法，因此顺次使用了<code class="x-inline-highlight">A</code>类的<code class="x-inline-highlight">test</code>方法。</p><div class="x-highlightblock highlight-background-golden"><h4 class="x-h3">注意</h4><p class="x-p">MRO顺序不是简单的深度优先或广度优先！</p></div><h2 class="x-h1">封装</h2><p class="x-p">在前面<code class="x-inline-highlight">Unit</code>类的例子中，我们可以通过直接访问<code class="x-inline-highlight">u1.hp</code>修改其值，这样并不安全（这岂不是像外挂一样）！<span class="x-inline-strong">封装</span>的目的是为了保护数据，不让外部直接访问和修改。在Python中，约定通过在属性名称前加两个下划线<code class="x-inline-highlight">__</code>来将属性私有化。这种命名约定会使Python解释器修改变量名为<code class="x-inline-highlight">_类名__属性名</code>的形式，使其在类外部变得难以访问。</p><h3 class="x-h2">将实例属性私有化</h3><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre style="background:linear-gradient(180deg, transparent 120px, var(--bg-transparent-golden) 120px 168px, transparent 168px)"><code><span class="token keyword">class</span> <span class="token class-name">Unit</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> hp<span class="token punctuation">,</span> damage<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name
        <span class="token comment"># 私有属性</span>
        self<span class="token punctuation">.</span>__hp <span class="token operator">=</span> hp
        self<span class="token punctuation">.</span>__damage <span class="token operator">=</span> damage

    <span class="token keyword">def</span> <span class="token function">attack</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> unit<span class="token punctuation">)</span><span class="token punctuation">:</span>
        unit<span class="token punctuation">.</span>__hp <span class="token operator">-=</span> self<span class="token punctuation">.</span>__damage
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string"> attacks </span><span class="token interpolation"><span class="token punctuation">{</span>unit<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token punctuation">{</span>unit<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string">.__hp = </span><span class="token interpolation"><span class="token punctuation">{</span>unit<span class="token punctuation">.</span>__hp<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>

    <span class="token comment"># 通过公有方法访问私有属性</span>
    <span class="token keyword">def</span> <span class="token function">get_hp</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__hp
</code></pre></div><p class="x-p">在定义私有属性后，对外开放一个公有方法<code class="x-inline-highlight">get_hp</code>，通过这个公有方法可以间接的访问到<code class="x-inline-highlight">__hp</code>属性。这样相当于让此属性对外部“只读”。</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre><code>u1 <span class="token operator">=</span> Unit<span class="token punctuation">(</span><span class="token string">"u1"</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>u1<span class="token punctuation">.</span>get_hp<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 100</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>u1<span class="token punctuation">.</span>__hp<span class="token punctuation">)</span>  <span class="token comment"># AttributeError: 'Unit' object has no attribute '__hp'</span>
</code></pre></div><p class="x-p">通过<code class="x-inline-highlight">_类名__属性名</code>的形式可以强制访问私有属性：</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre><code><span class="token keyword">print</span><span class="token punctuation">(</span>u1<span class="token punctuation">.</span>_Unit__hp<span class="token punctuation">)</span>  <span class="token comment"># 100</span></code></pre></div><div class="x-highlightblock highlight-background-golden"><h4 class="x-h3">注意</h4><p class="x-p">在类外绑定的双下划线变量是公有的。</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre><code>u1<span class="token punctuation">.</span>__var <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>u1<span class="token punctuation">.</span>__var<span class="token punctuation">)</span>  <span class="token comment"># 1</span>
</code></pre></div></div><h3 class="x-h2">类比于C++</h3><p class="x-p">C++中的封装有三种：<code class="x-inline-highlight">public</code>、<code class="x-inline-highlight">protected</code>、<code class="x-inline-highlight">private</code>；Python中没有这些关键字，但是可以通过属性名命名约定来实现。</p><div class="x-uli"><div class="x-uli-marker"><div class="x-uli-marker-dot"></div></div><div class="x-uli-content-wrapper"><p><code class="x-inline-highlight">public</code>：公有变量，可以在<span class="x-inline-strong">类的内部和外部</span>访问，正常命名即可。</p></div></div><div class="x-uli"><div class="x-uli-marker"><div class="x-uli-marker-dot"></div></div><div class="x-uli-content-wrapper"><p><code class="x-inline-highlight">protected</code>：保护变量，只能在<span class="x-inline-strong">类内和子类</span>访问，属性名前加单下划线<code class="x-inline-highlight">_</code>。这只是一种命名约定，实际上是可以访问的。</p></div></div><div class="x-uli"><div class="x-uli-marker"><div class="x-uli-marker-dot"></div></div><div class="x-uli-content-wrapper"><p><code class="x-inline-highlight">private</code>：私有变量，只能在<span class="x-inline-strong">类的内部</span>访问，属性名前加双下划线<code class="x-inline-highlight">__</code>，这样会使Python解释器修改变量名为<code class="x-inline-highlight">_类名__属性名</code>的形式。</p></div></div><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre><code><span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 公有变量</span>
        self<span class="token punctuation">.</span>x <span class="token operator">=</span> x
        <span class="token comment"># 保护变量</span>
        self<span class="token punctuation">.</span>_y <span class="token operator">=</span> y
        <span class="token comment"># 私有变量</span>
        self<span class="token punctuation">.</span>__z <span class="token operator">=</span> z

<span class="token keyword">class</span> <span class="token class-name">B</span><span class="token punctuation">(</span>A<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">info_x</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"x: </span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>x<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">info_y</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"y: </span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>_y<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">info_z</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"z: </span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>__z<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>

b <span class="token operator">=</span> B<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
b<span class="token punctuation">.</span>info_x<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># x: 1</span>
b<span class="token punctuation">.</span>info_y<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># y: 2</span>
b<span class="token punctuation">.</span>info_z<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># AttributeError: 'B' object has no attribute '_B__z'. Did you mean: '_A__z'?</span>
</code></pre></div><div class="x-highlightblock highlight-background-golden"><h4 class="x-h3">注意</h4><p class="x-p">C++中的<code class="x-inline-highlight">protected</code>关键字是一种严格的访问控制机制，而Python中的单下划线变量只是一种命名约定，不具有强制性，实际上是可以访问的。只不过有时违反了这样的约定时，有些代码编辑器会给出警告。</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre><code><span class="token keyword">print</span><span class="token punctuation">(</span>b<span class="token punctuation">.</span>_y<span class="token punctuation">)</span>  <span class="token comment"># 2</span></code></pre></div></div><h2 class="x-h1">多态</h2><h3 class="x-h2">举个例子</h3><p class="x-p">多态是当一个类继承自另一个类并重写了其方法时，可以在不改变原有接口的情况下，根据对象的实际类型来调用不同的方法实现。这听起来有些复杂，我们来举一个具体的例子：</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre><code><span class="token keyword">class</span> <span class="token class-name">Unit</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> hp<span class="token punctuation">,</span> damage<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>hp <span class="token operator">=</span> hp
        self<span class="token punctuation">.</span>damage <span class="token operator">=</span> damage

    <span class="token keyword">def</span> <span class="token function">info</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"name: </span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>name<span class="token punctuation">}</span></span><span class="token string">, hp: </span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>hp<span class="token punctuation">}</span></span><span class="token string">, damage: </span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>damage<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">GroundUnit</span><span class="token punctuation">(</span>Unit<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">info</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"This is a ground unit."</span><span class="token punctuation">)</span>

<span class="token keyword">class</span> <span class="token class-name">AirUnit</span><span class="token punctuation">(</span>Unit<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">info</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"This is an air unit."</span><span class="token punctuation">)</span>

<span class="token keyword">def</span> <span class="token function">show_info</span><span class="token punctuation">(</span>unit<span class="token punctuation">)</span><span class="token punctuation">:</span>
    unit<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token punctuation">)</span>

gu1 <span class="token operator">=</span> GroundUnit<span class="token punctuation">(</span><span class="token string">"gu1"</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
au1 <span class="token operator">=</span> AirUnit<span class="token punctuation">(</span><span class="token string">"au1"</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
show_info<span class="token punctuation">(</span>gu1<span class="token punctuation">)</span>  <span class="token comment"># This is a ground unit.</span>
show_info<span class="token punctuation">(</span>au1<span class="token punctuation">)</span>  <span class="token comment"># This is an air unit.</span>
</code></pre></div><p class="x-p">这个例子中，<code class="x-inline-highlight">show_info</code>函数接受一个<code class="x-inline-highlight">Unit</code>类型的参数，但是我们传入的是其子类<code class="x-inline-highlight">GroundUnit</code>和<code class="x-inline-highlight">AirUnit</code>类型的实例。子类重写了父类的<code class="x-inline-highlight">info</code>方法，相当于共用了父类的接口，但是子类又通过继承重写了接口，从而实现了不同的功能。</p><h3 class="x-h2">通过抽象类实现多态</h3><p class="x-p"><span class="x-inline-strong">抽象类</span>是指包含<span class="x-inline-strong">抽象方法</span>的类；抽象类只能被继承，不能被实例化。<br/>抽象方法是指只有声明，没有实现的方法，它存在的意义是让子类重写这个方法。</p><p class="x-p">上面的例子中，如果我们将<code class="x-inline-highlight">Unit</code>类的<code class="x-inline-highlight">info</code>方法定义为：</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre style="background:linear-gradient(180deg, transparent 192px, var(--bg-transparent-golden) 192px 240px, transparent 240px)"><code><span class="token keyword">class</span> <span class="token class-name">Unit</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> hp<span class="token punctuation">,</span> damage<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>hp <span class="token operator">=</span> hp
        self<span class="token punctuation">.</span>damage <span class="token operator">=</span> damage

    <span class="token comment"># 这是一个抽象方法，子类必须重写这个方法，否则在调用时会报错</span>
    <span class="token keyword">def</span> <span class="token function">info</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">raise</span> NotImplementedError<span class="token punctuation">(</span><span class="token string">"Subclasses must implement abstract method."</span><span class="token punctuation">)</span>
</code></pre></div><p class="x-p">这时子类如果没有重写<code class="x-inline-highlight">info</code>方法，就会继承父类中的方法，在调用的时候就会报错。</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre><code><span class="token keyword">class</span> <span class="token class-name">UnitWithoutInfo</span><span class="token punctuation">(</span>Unit<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>

u <span class="token operator">=</span> UnitWithoutInfo<span class="token punctuation">(</span><span class="token string">"u"</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
u<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># NotImplementedError: Subclasses must implement abstract method.</span>
</code></pre></div><h3 class="x-h2">Python中的abc模块</h3><p class="x-p">Python的<code class="x-inline-highlight">abc</code>模块中定义了<span class="x-inline-strong">抽象基类</span><code class="x-inline-highlight">ABC (Abstract Base Classes)</code>，可以强制其子类必须实现某些方法。</p><p class="x-p">上面的例子使用<code class="x-inline-highlight">abc</code>模块可以改写为：</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre style="background:linear-gradient(180deg, transparent 24px, var(--bg-transparent-golden) 24px 48px, transparent 48px, transparent 72px, var(--bg-transparent-golden) 72px 96px, transparent 96px, transparent 216px, var(--bg-transparent-golden) 216px 288px, transparent 288px)"><code><span class="token keyword">from</span> abc <span class="token keyword">import</span> ABC<span class="token punctuation">,</span> abstractmethod

<span class="token keyword">class</span> <span class="token class-name">Unit</span><span class="token punctuation">(</span>ABC<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> hp<span class="token punctuation">,</span> damage<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>hp <span class="token operator">=</span> hp
        self<span class="token punctuation">.</span>damage <span class="token operator">=</span> damage

    <span class="token decorator annotation punctuation">@abstractmethod</span>
    <span class="token keyword">def</span> <span class="token function">info</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">pass</span>
</code></pre></div><p class="x-p">这时子类如果没有重写<code class="x-inline-highlight">info</code>方法，在实例化时就会报错！</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre><code><span class="token keyword">class</span> <span class="token class-name">UnitWithoutInfo</span><span class="token punctuation">(</span>Unit<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>

<span class="token comment"># 在实例化时就会报错</span>
u <span class="token operator">=</span> UnitWithoutInfo<span class="token punctuation">(</span><span class="token string">"u"</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>  <span class="token comment"># TypeError: Can't instantiate abstract class UnitWithoutInfo with abstract method info</span>
</code></pre></div><h2 class="x-h1">三大方法</h2><h3 class="x-h2">类方法</h3><p class="x-p">类方法用修饰器<code class="x-inline-highlight">@classmethod</code>定义，传入的第一个参数是类本身而不是实例，通常命名为<code class="x-inline-highlight">cls</code>。通过它可以访问到类属性。</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre style="background:linear-gradient(180deg, transparent 216px, var(--bg-transparent-golden) 216px 312px, transparent 312px)"><code><span class="token keyword">class</span> <span class="token class-name">Unit</span><span class="token punctuation">:</span>
    utype <span class="token operator">=</span> <span class="token string">"unit"</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> hp<span class="token punctuation">,</span> damage<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>hp <span class="token operator">=</span> hp
        self<span class="token punctuation">.</span>damage <span class="token operator">=</span> damage

    <span class="token decorator annotation punctuation">@classmethod</span>
    <span class="token keyword">def</span> <span class="token function">show_type</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># 可以访问到类属性</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"This is a </span><span class="token interpolation"><span class="token punctuation">{</span>cls<span class="token punctuation">.</span>utype<span class="token punctuation">}</span></span><span class="token string">."</span></span><span class="token punctuation">)</span>

u1 <span class="token operator">=</span> Unit<span class="token punctuation">(</span><span class="token string">"u1"</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
u1<span class="token punctuation">.</span>show_type<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># This is a unit.</span>
</code></pre></div><h4 class="x-h3">类方法的应用：自动计算实例数</h4><p class="x-p">假如我们希望每创建一个类时，都可以自动计数当前类的实例数量。这个功能可以由类方法实现。</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre style="background:linear-gradient(180deg, transparent 216px, var(--bg-transparent-golden) 216px 240px, transparent 240px)"><code><span class="token keyword">class</span> <span class="token class-name">Unit</span><span class="token punctuation">:</span>
    <span class="token builtin">type</span> <span class="token operator">=</span> <span class="token string">"unit"</span>
    __unit_num <span class="token operator">=</span> <span class="token number">0</span>  <span class="token comment"># 声明为私有类属性</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> hp<span class="token punctuation">,</span> damage<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>hp <span class="token operator">=</span> hp
        self<span class="token punctuation">.</span>damage <span class="token operator">=</span> damage
        self<span class="token punctuation">.</span>add_unit_num<span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token decorator annotation punctuation">@classmethod</span>
    <span class="token keyword">def</span> <span class="token function">add_unit_num</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span><span class="token punctuation">:</span>
        cls<span class="token punctuation">.</span>__unit_num <span class="token operator">+=</span> <span class="token number">1</span>

    <span class="token decorator annotation punctuation">@classmethod</span>
    <span class="token keyword">def</span> <span class="token function">get_unit_num</span><span class="token punctuation">(</span>cls<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> cls<span class="token punctuation">.</span>__unit_num

u1 <span class="token operator">=</span> Unit<span class="token punctuation">(</span><span class="token string">"u1"</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
u2 <span class="token operator">=</span> Unit<span class="token punctuation">(</span><span class="token string">"u2"</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>u1<span class="token punctuation">.</span>get_unit_num<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 2</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>u2<span class="token punctuation">.</span>get_unit_num<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 2</span>

u3 <span class="token operator">=</span> Unit<span class="token punctuation">(</span><span class="token string">"u3"</span><span class="token punctuation">,</span> <span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>u3<span class="token punctuation">.</span>get_unit_num<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 3</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>Unit<span class="token punctuation">.</span>get_unit_num<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 3</span>
</code></pre></div><p class="x-p">我们在<code class="x-inline-highlight">__init__</code>方法中调用一次类方法<code class="x-inline-highlight">add_unit_num()</code>，就可以把总实例数统计到类属性<code class="x-inline-highlight">__unit_num</code>中。</p><h3 class="x-h2">静态方法</h3><p class="x-p">静态方法用修饰器<code class="x-inline-highlight">@staticmethod</code>定义。静态方法不能访问类属性，也不能访问实例属性。静态方法可以在类的命名空间内定义一些功能性代码，通常用于实现一些与类相关的工具函数。</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre style="background:linear-gradient(180deg, transparent 216px, var(--bg-transparent-golden) 216px 288px, transparent 288px)"><code><span class="token keyword">class</span> <span class="token class-name">Unit</span><span class="token punctuation">:</span>
    <span class="token builtin">type</span> <span class="token operator">=</span> <span class="token string">"unit"</span>

    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> name<span class="token punctuation">,</span> hp<span class="token punctuation">,</span> damage<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>name <span class="token operator">=</span> name
        self<span class="token punctuation">.</span>hp <span class="token operator">=</span> hp
        self<span class="token punctuation">.</span>damage <span class="token operator">=</span> damage

    <span class="token decorator annotation punctuation">@staticmethod</span>
    <span class="token keyword">def</span> <span class="token function">calc_hp_after_attack</span><span class="token punctuation">(</span>hp<span class="token punctuation">,</span> damage<span class="token punctuation">)</span><span class="token punctuation">:</span>  <span class="token comment"># 没有隐式的第一参数</span>
        <span class="token keyword">return</span> hp <span class="token operator">-</span> damage

u1 <span class="token operator">=</span> Unit<span class="token punctuation">(</span><span class="token string">"u1"</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>
u2 <span class="token operator">=</span> Unit<span class="token punctuation">(</span><span class="token string">"u2"</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>u1<span class="token punctuation">.</span>calc_hp_after_attack<span class="token punctuation">(</span>u1<span class="token punctuation">.</span>hp<span class="token punctuation">,</span> u2<span class="token punctuation">.</span>damage<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 90</span>
</code></pre></div><h3 class="x-h2">属性方法</h3><p class="x-p">属性方法以方法的形式定义，但是可以像属性一样进行访问，其作用是支持对属性的灵活操作。</p><p class="x-p">属性方法相当于允许更细致的设置一个属性的<span class="x-inline-strong">访问</span>、<span class="x-inline-strong">更改</span>、<span class="x-inline-strong">删除</span>操作，具体的做法是：实现属性的<code class="x-inline-highlight">getter</code>、<code class="x-inline-highlight">setter</code>、<code class="x-inline-highlight">deleter</code>方法。</p><p class="x-p">假设我们有这样的需求：定义一个<code class="x-inline-highlight">Circle</code>类，它具有直径<code class="x-inline-highlight">diameter</code>和半径<code class="x-inline-highlight">radius</code>两个属性。我们希望修改其中一个属性时，另外一个属性也随之变化。也就是：</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre><code>circle <span class="token operator">=</span> Circle<span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>circle<span class="token punctuation">.</span>radius<span class="token punctuation">)</span>  <span class="token comment"># 5</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>circle<span class="token punctuation">.</span>diameter<span class="token punctuation">)</span>  <span class="token comment"># 10</span>

circle<span class="token punctuation">.</span>diameter <span class="token operator">=</span> <span class="token number">14</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>circle<span class="token punctuation">.</span>radius<span class="token punctuation">)</span>  <span class="token comment"># 7.0</span>

circle<span class="token punctuation">.</span>radius <span class="token operator">=</span> <span class="token number">12</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>circle<span class="token punctuation">.</span>diameter<span class="token punctuation">)</span>  <span class="token comment"># 24</span>
</code></pre></div><p class="x-p">用此前的知识似乎无法实现这样的功能，但属性方法可以解决：</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre><code><span class="token keyword">class</span> <span class="token class-name">Circle</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> radius<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__radius <span class="token operator">=</span> radius
        self<span class="token punctuation">.</span>__diameter <span class="token operator">=</span> <span class="token number">2</span> <span class="token operator">*</span> radius

    <span class="token comment"># 属性的getter方法</span>
    <span class="token decorator annotation punctuation">@property</span>
    <span class="token keyword">def</span> <span class="token function">radius</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__radius

    <span class="token comment"># 属性的setter方法</span>
    <span class="token decorator annotation punctuation">@radius<span class="token punctuation">.</span>setter</span>
    <span class="token keyword">def</span> <span class="token function">radius</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__radius <span class="token operator">=</span> value
        self<span class="token punctuation">.</span>__diameter <span class="token operator">=</span> value <span class="token operator">*</span> <span class="token number">2</span>

    <span class="token decorator annotation punctuation">@property</span>
    <span class="token keyword">def</span> <span class="token function">diameter</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__diameter

    <span class="token decorator annotation punctuation">@diameter<span class="token punctuation">.</span>setter</span>
    <span class="token keyword">def</span> <span class="token function">diameter</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>__diameter <span class="token operator">=</span> value
        self<span class="token punctuation">.</span>__radius <span class="token operator">=</span> value <span class="token operator">*</span> <span class="token number">0.5</span>
</code></pre></div><p class="x-p">将访问、修改属性的操作定义为函数，就允许了我们除了获取、修改变量本身之外，还可以做一些其他的手脚。</p><p class="x-p">上面的例子没有体现属性的<code class="x-inline-highlight">deleter</code>方法。它的一般实现可以是：</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre><code><span class="token keyword">class</span> <span class="token class-name">Circle</span><span class="token punctuation">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token comment"># 属性的deleter方法</span>
    <span class="token decorator annotation punctuation">@radius<span class="token punctuation">.</span>deleter</span>
    <span class="token keyword">def</span> <span class="token function">radius</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"delete radius"</span><span class="token punctuation">)</span>
        <span class="token keyword">del</span> self<span class="token punctuation">.</span>__radius

    <span class="token decorator annotation punctuation">@diameter<span class="token punctuation">.</span>deleter</span>
    <span class="token keyword">def</span> <span class="token function">diameter</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">"delete diameter"</span><span class="token punctuation">)</span>
        <span class="token keyword">del</span> self<span class="token punctuation">.</span>__diameter

<span class="token keyword">del</span> circle<span class="token punctuation">.</span>diameter  <span class="token comment"># delete diameter</span>
<span class="token comment"># print(circle.diameter)  # AttributeError: 'Circle' object has no attribute '_Circle__diameter'</span>
</code></pre></div><h2 class="x-h1">反射</h2><h3 class="x-h2">Python中的反射</h3><p class="x-p">在计算机科学中<span class="x-inline-strong">反射</span><code class="x-inline-highlight">(reflection)</code>是指计算机程序在运行时可以检查、访问、和修改它本身状态或行为的一种能力。表现在Python面向对象编程中有四个内置函数：<code class="x-inline-highlight">getattr()</code>、<code class="x-inline-highlight">setattr()</code>、<code class="x-inline-highlight">hasattr()</code>和<code class="x-inline-highlight">delattr()</code>，可以通过字符串的形式操作对象的属性和方法。</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre><code><span class="token keyword">class</span> <span class="token class-name">A</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>x <span class="token operator">=</span> x
        self<span class="token punctuation">.</span>y <span class="token operator">=</span> y
        self<span class="token punctuation">.</span>z <span class="token operator">=</span> z

    <span class="token keyword">def</span> <span class="token function">info_x</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"x: </span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>x<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">info_y</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"y: </span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>y<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">info_z</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"z: </span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>z<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>

a <span class="token operator">=</span> A<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span>
</code></pre></div><p class="x-p"><code class="x-inline-highlight">hasattr()</code>函数用于判断对象是否包含对应的属性或方法：</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre><code><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">hasattr</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token string">"x"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># True</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">hasattr</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token string">"info_x"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># True</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">hasattr</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token string">"info_w"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># False</span>
</code></pre></div><p class="x-p"><code class="x-inline-highlight">getattr()</code>函数用于获取对象的属性或方法：</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre><code><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">getattr</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token string">"x"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 10</span>
info_x <span class="token operator">=</span> <span class="token builtin">getattr</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token string">"info_x"</span><span class="token punctuation">)</span>
info_x<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># x: 10</span>
</code></pre></div><p class="x-p"><code class="x-inline-highlight">setattr()</code>函数用于设置对象的属性或方法：</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre><code><span class="token builtin">setattr</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token string">"x"</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">getattr</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token string">"x"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 100</span>
</code></pre></div><p class="x-p"><code class="x-inline-highlight">delattr()</code>函数用于删除对象的属性或方法：</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre><code><span class="token builtin">delattr</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token string">"y"</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">getattr</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> <span class="token string">"y"</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># AttributeError: 'A' object has no attribute 'y'</span>
</code></pre></div><h3 class="x-h2">反射的应用</h3><p class="x-p">假如我们现在想创建一个类<code class="x-inline-highlight">A2Z</code>，它具有<code class="x-inline-highlight">a</code>-<code class="x-inline-highlight">z</code><code class="x-inline-highlight">26</code>个属性与<code class="x-inline-highlight">info_a()</code>到<code class="x-inline-highlight">info_z()</code><code class="x-inline-highlight">26</code>个方法，手动创建这些属性和方法是非常繁琐的。这时我们可以利用反射来动态的创建它们：</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre style="background:linear-gradient(180deg, transparent 240px, var(--bg-transparent-golden) 240px 264px, transparent 264px, transparent 384px, var(--bg-transparent-golden) 384px 408px, transparent 408px)"><code>a_to_z <span class="token operator">=</span> <span class="token string">"abcdefghijklmnopqrstuvwxyz"</span>

<span class="token keyword">class</span> <span class="token class-name">A2Z</span><span class="token punctuation">:</span>
    <span class="token keyword">pass</span>

a2z <span class="token operator">=</span> A2Z<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token keyword">for</span> ch <span class="token keyword">in</span> a_to_z<span class="token punctuation">:</span>
    <span class="token comment"># 动态的创建属性</span>
    <span class="token builtin">setattr</span><span class="token punctuation">(</span>a2z<span class="token punctuation">,</span> ch<span class="token punctuation">,</span> <span class="token builtin">ord</span><span class="token punctuation">(</span>ch<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token builtin">ord</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span>

    <span class="token comment"># 动态的创建方法</span>
    <span class="token keyword">def</span> <span class="token function">info_ch</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"</span><span class="token interpolation"><span class="token punctuation">{</span>ch<span class="token punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token punctuation">{</span><span class="token builtin">getattr</span><span class="token punctuation">(</span>a2z<span class="token punctuation">,</span> ch<span class="token punctuation">)</span><span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>

    <span class="token builtin">setattr</span><span class="token punctuation">(</span>a2z<span class="token punctuation">,</span> <span class="token string-interpolation"><span class="token string">f"info_</span><span class="token interpolation"><span class="token punctuation">{</span>ch<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">,</span> info_ch<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>a2z<span class="token punctuation">.</span>d<span class="token punctuation">)</span>  <span class="token comment"># 4</span>
a2z<span class="token punctuation">.</span>info_z<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># z: 26</span>
</code></pre></div><h2 class="x-h1">魔术方法</h2><p class="x-p">魔术方法通常以双下划线包围，用于实现类的特殊行为。下面以一个<code class="x-inline-highlight">Vector3d</code>类为例，介绍一些常用的魔术方法。</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre><code><span class="token keyword">class</span> <span class="token class-name">Vector3d</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>x <span class="token operator">=</span> x
        self<span class="token punctuation">.</span>y <span class="token operator">=</span> y
        self<span class="token punctuation">.</span>z <span class="token operator">=</span> z

v1 <span class="token operator">=</span> Vector3d<span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>
v2 <span class="token operator">=</span> Vector3d<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>
</code></pre></div><h3 class="x-h2">__len__</h3><p class="x-p"><code class="x-inline-highlight">len(obj)</code>时调用。<code class="x-inline-highlight">__len__</code>方法的返回值只能是整数。</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre><code><span class="token keyword">class</span> <span class="token class-name">Vector3d</span><span class="token punctuation">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token keyword">def</span> <span class="token function">__len__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token number">3</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>v1<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># 3</span>
</code></pre></div><h3 class="x-h2">__repr__和__str__</h3><p class="x-p"><code class="x-inline-highlight">__repr__</code>方法的返回值应该是一个<span class="x-inline-strong">可以用来重新创建对象</span>的字符串。<br/><code class="x-inline-highlight">__str__</code>方法在<code class="x-inline-highlight">str(obj)</code>时调用，应当返回实例格式良好、可读性强的字符串表示。</p><p class="x-p">在<code class="x-inline-highlight">print(obj)</code>时会优先使用<code class="x-inline-highlight">__str__</code>方法的返回值，如果没有定义<code class="x-inline-highlight">__str__</code>方法，则会使用<code class="x-inline-highlight">__repr__</code>方法。</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre><code><span class="token keyword">class</span> <span class="token class-name">Vector3d</span><span class="token punctuation">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token keyword">def</span> <span class="token function">__repr__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token string-interpolation"><span class="token string">f"Vector3d(</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>x<span class="token punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>y<span class="token punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>z<span class="token punctuation">}</span></span><span class="token string">)"</span></span>

    <span class="token keyword">def</span> <span class="token function">__str__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token string-interpolation"><span class="token string">f"(</span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>x<span class="token punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>y<span class="token punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token punctuation">{</span>self<span class="token punctuation">.</span>z<span class="token punctuation">}</span></span><span class="token string">)"</span></span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>v1<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># (3, 4, 5)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token builtin">repr</span><span class="token punctuation">(</span>v1<span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token comment"># Vector3d(3, 4, 5)</span>
<span class="token comment"># 会优先调用__str__方法</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>v1<span class="token punctuation">)</span>  <span class="token comment"># (3, 4, 5)</span>
</code></pre></div><h3 class="x-h2">__call__</h3><p class="x-p"><code class="x-inline-highlight">__call__</code>方法使得实例可以像函数一样被调用。</p><p class="x-p">这个例子中我们约定，调用<code class="x-inline-highlight">obj(x, y, z)</code>时设置向量的<code class="x-inline-highlight">x</code>，<code class="x-inline-highlight">y</code>，<code class="x-inline-highlight">z</code>分量。</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre><code><span class="token keyword">class</span> <span class="token class-name">Vector3d</span><span class="token punctuation">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token keyword">def</span> <span class="token function">__call__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">)</span><span class="token punctuation">:</span>
        self<span class="token punctuation">.</span>x <span class="token operator">=</span> x
        self<span class="token punctuation">.</span>y <span class="token operator">=</span> y
        self<span class="token punctuation">.</span>z <span class="token operator">=</span> z

v2<span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>v2<span class="token punctuation">)</span>  <span class="token comment"># (2, -2, 1)</span>
</code></pre></div><h3 class="x-h2">运算符重载</h3><p class="x-p">我们为<code class="x-inline-highlight">Vector3d</code>类定义加法、减法、乘法操作。这个例子中我们约定，加减法就是普通的按元素加减，而乘法满足：</p><div class="x-uli"><div class="x-uli-marker"><div class="x-uli-marker-dot"></div></div><div class="x-uli-content-wrapper"><p><code class="x-inline-highlight">obj*常数</code>时返回缩放后的向量</p></div></div><div class="x-uli"><div class="x-uli-marker"><div class="x-uli-marker-dot"></div></div><div class="x-uli-content-wrapper"><p><code class="x-inline-highlight">obj1*obj2</code>时返回点乘数值</p></div></div><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre><code><span class="token keyword">class</span> <span class="token class-name">Vector3d</span><span class="token punctuation">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token comment"># 重载加号运算符，obj1+obj2时调用</span>
    <span class="token keyword">def</span> <span class="token function">__add__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> other<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> Vector3d<span class="token punctuation">(</span>self<span class="token punctuation">.</span>x <span class="token operator">+</span> other<span class="token punctuation">.</span>x<span class="token punctuation">,</span> self<span class="token punctuation">.</span>y <span class="token operator">+</span> other<span class="token punctuation">.</span>y<span class="token punctuation">,</span> self<span class="token punctuation">.</span>z <span class="token operator">+</span> other<span class="token punctuation">.</span>z<span class="token punctuation">)</span>

    <span class="token comment"># 重载减号运算符，obj1-obj2时调用</span>
    <span class="token keyword">def</span> <span class="token function">__sub__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> other<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> Vector3d<span class="token punctuation">(</span>self<span class="token punctuation">.</span>x <span class="token operator">-</span> other<span class="token punctuation">.</span>x<span class="token punctuation">,</span> self<span class="token punctuation">.</span>y <span class="token operator">-</span> other<span class="token punctuation">.</span>y<span class="token punctuation">,</span> self<span class="token punctuation">.</span>z <span class="token operator">-</span> other<span class="token punctuation">.</span>z<span class="token punctuation">)</span>

    <span class="token comment"># 重载乘号运算符</span>
    <span class="token keyword">def</span> <span class="token function">__mul__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> other<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>other<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">float</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> Vector3d<span class="token punctuation">(</span>self<span class="token punctuation">.</span>x <span class="token operator">*</span> other<span class="token punctuation">,</span> self<span class="token punctuation">.</span>y <span class="token operator">*</span> other<span class="token punctuation">,</span> self<span class="token punctuation">.</span>z <span class="token operator">*</span> other<span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> self<span class="token punctuation">.</span>x <span class="token operator">*</span> other<span class="token punctuation">.</span>x <span class="token operator">+</span> self<span class="token punctuation">.</span>y <span class="token operator">*</span> other<span class="token punctuation">.</span>y <span class="token operator">+</span> self<span class="token punctuation">.</span>z <span class="token operator">*</span> other<span class="token punctuation">.</span>z

<span class="token keyword">print</span><span class="token punctuation">(</span>v1<span class="token punctuation">)</span>  <span class="token comment"># (3, 4, 5)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>v2<span class="token punctuation">)</span>  <span class="token comment"># (2, -2, 1)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>v1 <span class="token operator">+</span> v2<span class="token punctuation">)</span>  <span class="token comment"># (5, 2, 6)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>v1 <span class="token operator">-</span> v2<span class="token punctuation">)</span>  <span class="token comment"># (1, 6, 4)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>v1 <span class="token operator">*</span> v2<span class="token punctuation">)</span>  <span class="token comment"># 3</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>v1 <span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>  <span class="token comment"># (6, 8, 10)</span>
</code></pre></div><h3 class="x-h2">反运算（右侧运算）</h3><p class="x-p">如果只有上述运算符重载，下面的代码会报错：</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre><code><span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> v1<span class="token punctuation">)</span>  <span class="token comment"># TypeError: unsupported operand type(s) for *: 'int' and 'Vector3d'</span></code></pre></div><p class="x-p">这是因为整数类型的乘法不适用。解决这个问题需要定义<code class="x-inline-highlight">Vector3d</code>类的右侧乘法<code class="x-inline-highlight">__rmul__</code>：</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre><code><span class="token keyword">class</span> <span class="token class-name">Vector3d</span><span class="token punctuation">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token keyword">def</span> <span class="token function">__rmul__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> other<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>__mul__<span class="token punctuation">(</span>other<span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span><span class="token number">2</span> <span class="token operator">*</span> v1<span class="token punctuation">)</span>  <span class="token comment"># (6, 8, 10)</span>
</code></pre></div><h3 class="x-h2">__getitem__和__setitem__</h3><p class="x-p"><code class="x-inline-highlight">__getitem__</code>在取<code class="x-inline-highlight">obj[key]</code>时调用，这个例子中我们约定<code class="x-inline-highlight">obj[key]</code>返回向量第<code class="x-inline-highlight">i</code>个分量；</p><p class="x-p"><code class="x-inline-highlight">__setitem__</code>在设置<code class="x-inline-highlight">obj[key]=value</code>时调用，这个例子中我们约定<code class="x-inline-highlight">obj[key]=value</code>设置向量第<code class="x-inline-highlight">i</code>个分量。</p><div class="x-codeblock"><div class="x-codeblock-header"><div class="x-codeblock-header-language">Python</div><button class="x-codeblock-header-copy"><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 1024 1024" class="svg-copy-icon"><path d="M337 138a27 27 0 0 0-27 27v78h377c50 0 92 41 92 91v377h78a28 28 0 0 0 27-28V166a28 28 0 0 0-27-27H337z m441 640v78c0 50-41 91-92 91H166a92 92 0 0 1-91-91V337c0-50 41-92 91-92h78V166c0-50 41-91 91-91h520c50 0 91 41 91 91v520c0 50-41 92-91 92h-78zM166 309a27 27 0 0 0-27 28v520c0 15 12 27 27 27h520a28 28 0 0 0 28-27V337a28 28 0 0 0-28-28H166z"></path></svg></button></div><pre><code><span class="token keyword">class</span> <span class="token class-name">Vector3d</span><span class="token punctuation">:</span>
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

    <span class="token keyword">def</span> <span class="token function">__getitem__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> key<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> key <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>x
    <span class="token keyword">elif</span> key <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>y
    <span class="token keyword">elif</span> key <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> self<span class="token punctuation">.</span>z
    <span class="token keyword">else</span><span class="token punctuation">:</span>
        <span class="token keyword">raise</span> IndexError<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"index out of range: </span><span class="token interpolation"><span class="token punctuation">{</span>key<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">__setitem__</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> key<span class="token punctuation">,</span> value<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">if</span> key <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>x <span class="token operator">=</span> value
        <span class="token keyword">elif</span> key <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>y <span class="token operator">=</span> value
        <span class="token keyword">elif</span> key <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>z <span class="token operator">=</span> value
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">raise</span> IndexError<span class="token punctuation">(</span><span class="token string-interpolation"><span class="token string">f"index out of range: </span><span class="token interpolation"><span class="token punctuation">{</span>key<span class="token punctuation">}</span></span><span class="token string">"</span></span><span class="token punctuation">)</span>

<span class="token keyword">print</span><span class="token punctuation">(</span>v1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span> v1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> v1<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment"># 18 -24 15</span>
v1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>v1<span class="token punctuation">)</span>  <span class="token comment"># (2, -24, 15)</span>
</code></pre></div><!--/$--><button class="like-button not-loaded"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 1024 896"><path d="M512 911l-62-56C230 655 85 524 85 363 85 231 189 128 320 128c74 0 145 35 192 89 47-55 118-89 192-89 131 0 235 103 235 235 0 161-145 293-365 492l-62 56z" fill="#FCFCFC"></path></svg></button></div><div id="sidebar"><div id="sidebar-width-wrapper"><div class="category-card sidebar-card show-list"><div class="category-card-header"><div class="category-name">网络杂识<!-- --> (<!-- -->8<!-- -->)</div><button class="category-rightarrow"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 1024 1024"><path d="m761 532 2-3c9-18 6-40-10-55L400 140a48 48 0 0 0-66 70l317 299-316 305a48 48 0 0 0 67 69l350-338 1-2 2-1c3-3 4-7 6-10z" fill="#50505C"></path></svg></button></div><div class="category-card-ul-wrapper"><ul class="category-card-ul"><li><a class="link" href="/23d/database-3nf/"><span>数据库设计三大范式</span></a></li><li><a class="link" href="/23d/github-linguist-vendored/"><span>不统计Github仓库某个目录下的语言</span></a></li><li><a class="link" href="/24a/deepl-shortcut-setting/"><span>解决：DeepL该快捷键已被使用</span></a></li><li><a class="link" href="/24a/git-merge-allow-unrelated-histories/"><span>记录：使用--allow-unrelated-histories</span></a></li><li><a class="link" href="/24b/injective-surjective-bijective/"><span>单射、满射、双射</span></a></li><li><a class="link" href="/25a/tai-e-a2-additional-case/"><span>南京大学程序分析Lab2（常量传播）易错样例补充</span></a></li><li><a class="link" href="/25a/tai-e-a3-solution/"><span>南京大学程序分析Lab3（死代码消除）思路</span></a></li><li><a class="link" href="/25b/debug-x86_64-program-in-arm64-system/"><span>使用QEMU在ARM64系统上调试x86_64程序</span></a></li></ul></div></div><div class="category-card sidebar-card show-list"><div class="category-card-header"><div class="category-name">安全学习<!-- --> (<!-- -->15<!-- -->)</div><button class="category-rightarrow"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 1024 1024"><path d="m761 532 2-3c9-18 6-40-10-55L400 140a48 48 0 0 0-66 70l317 299-316 305a48 48 0 0 0 67 69l350-338 1-2 2-1c3-3 4-7 6-10z" fill="#50505C"></path></svg></button></div><div class="category-card-ul-wrapper"><ul class="category-card-ul"><li><a class="link" href="/longtime/wp-portswigger/"><span>PortSwigger Writeup</span></a></li><li><a class="link" href="/23d/hust-cas-login/"><span>Python登录华科统一身份认证接口</span></a></li><li><a class="link" href="/24b/learn-cwes/"><span>Learn CWEs &amp; Real-word Examples</span></a></li><li><a class="link" href="/24b/cross-site-scripting/"><span>Learn XSS</span></a></li><li><a class="link" href="/24b/cross-site-request-forgery/"><span>Learn CSRF</span></a></li><li><a class="link" href="/24d/wp-bluehens-2024/"><span>BlueHens CTF 2024 Writeup</span></a></li><li><a class="link" href="/24d/wp-1337uplive-2024/"><span>1337UP LIVE CTF 2024 Writeup</span></a></li><li><a class="link" href="/24d/wp-m0lecon-2025/"><span>m0leCon Beginner CTF 2025 Writeup</span></a></li><li><a class="link" href="/24d/wp-0xl4ugh-2024/"><span>0xl4ugh CTF 2024 Writeup</span></a></li><li><a class="link" href="/25a/wp-nullcon-hackim-2025/"><span>Nullcon HackIM CTF 2025 Writeup</span></a></li><li><a class="link" href="/25a/wp-picoctf-2025/"><span>picoCTF 2025 Writeup</span></a></li><li><a class="link" href="/25a/wp-cyber-apocalypse-ctf-2025/"><span>HTB Cyber Apocalypse CTF 2025 Writeup</span></a></li><li><a class="link" href="/25a/wp-swampctf-2025/"><span>SwampCTF 2025 Writeup</span></a></li><li><a class="link" href="/25b/wp-1753ctf-2025/"><span>1753CTF 2025 Writeup</span></a></li><li><a class="link" href="/25b/wp-nahamcon-ctf-2025/"><span>NahamCon CTF 2025 Writeup</span></a></li></ul></div></div><div class="category-card sidebar-card show-list"><div class="category-card-header"><div class="category-name">安全研究<!-- --> (<!-- -->9<!-- -->)</div><button class="category-rightarrow"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 1024 1024"><path d="m761 532 2-3c9-18 6-40-10-55L400 140a48 48 0 0 0-66 70l317 299-316 305a48 48 0 0 0 67 69l350-338 1-2 2-1c3-3 4-7 6-10z" fill="#50505C"></path></svg></button></div><div class="category-card-ul-wrapper"><ul class="category-card-ul"><li><a class="link" href="/longtime/papers-sec/"><span>论文速记：安全</span></a></li><li><a class="link" href="/24b/papers-sec-240514-taintmini/"><span>论文阅读：TAINTMINI: Detecting Flow of Sensitive Data in Mini-Programs with Static Taint Analysis (ICSE 2023)</span></a></li><li><a class="link" href="/24c/papers-sec-240728-2fa-consistency/"><span>论文阅读：A Systematic Study of the Consistency of Two-Factor Authentication User Journeys on Top-Ranked Websites (NDSS 2023)</span></a></li><li><a class="link" href="/24c/papers-sec-240810-conquer/"><span>论文阅读：Do Not Give A Dog Bread Every Time He Wags His Tail: Stealing Passwords through Content Queries (CONQUER) Attack (NDSS 2023)</span></a></li><li><a class="link" href="/24c/papers-sec-240817-2fa-failures/"><span>论文阅读：Security and Privacy Failures in Popular 2FA Apps (Security 2023)</span></a></li><li><a class="link" href="/24c/papers-sec-240824-zxcvbn/"><span>论文阅读：zxcvbn: Low-Budget Password Strength Estimation (Security 2016)</span></a></li><li><a class="link" href="/24c/papers-sec-240902-pafa-authentication/"><span>论文阅读：Maginot Line: Assessing a New Cross-app Threat to PII-as-Factor Authentication in Chinese Mobile Apps (NDSS 2024)</span></a></li><li><a class="link" href="/24c/papers-sec-240922-pre-hijacked-accounts/"><span>论文阅读：Pre-hijacked accounts: An Empirical Study of Security Failures in User Account Creation on the Web (Security 2022)</span></a></li><li><a class="link" href="/24d/papers-sec-241207-aimie/"><span>论文阅读：Understanding and Detecting Abused Image Hosting Modules as Malicious Services (CCS 2023)</span></a></li></ul></div></div><div class="category-card sidebar-card show-list"><div class="category-card-header"><div class="category-name">算法<!-- --> (<!-- -->26<!-- -->)</div><button class="category-rightarrow"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 1024 1024"><path d="m761 532 2-3c9-18 6-40-10-55L400 140a48 48 0 0 0-66 70l317 299-316 305a48 48 0 0 0 67 69l350-338 1-2 2-1c3-3 4-7 6-10z" fill="#50505C"></path></svg></button></div><div class="category-card-ul-wrapper"><ul class="category-card-ul"><li><a class="link" href="/24b/sorting-algorithm/"><span>排序算法总结与代码实现</span></a></li><li><a class="link" href="/24b/mst-and-sp/"><span>最小生成树与最短路算法</span></a></li><li><a class="link" href="/24a/csp-2016-04/"><span>CSP 201604 T1-T4题解</span></a></li><li><a class="link" href="/24a/csp-2018-03/"><span>CSP 201803 T1-T4题解</span></a></li><li><a class="link" href="/24a/csp-2020-06/"><span>CSP 202006 T1-T4题解</span></a></li><li><a class="link" href="/24a/csp-2020-09/"><span>CSP 202009 T1-T4题解</span></a></li><li><a class="link" href="/24a/csp-2020-12/"><span>CSP 202012 T1-T5题解</span></a></li><li><a class="link" href="/24a/csp-2022-06/"><span>CSP 202206 T1-T5题解</span></a></li><li><a class="link" href="/24a/csp-2023-05/"><span>CSP 202305 T1-T5题解</span></a></li><li><a class="link" href="/24a/csp-2023-09/"><span>CSP 202309 T1-T4题解</span></a></li><li><a class="link" href="/24b/leetcode-4/"><span>LeetCode 4.寻找两个正序数组的中位数</span></a></li><li><a class="link" href="/24b/leetcode-30/"><span>LeetCode 30.串联所有单词的子串</span></a></li><li><a class="link" href="/24b/leetcode-37/"><span>LeetCode 37.解数独</span></a></li><li><a class="link" href="/24c/leetcode-42/"><span>LeetCode 42.接雨水</span></a></li><li><a class="link" href="/24c/leetcode-51/"><span>LeetCode 51.N皇后</span></a></li><li><a class="link" href="/24c/leetcode-52/"><span>LeetCode 52.N皇后 II</span></a></li><li><a class="link" href="/24b/leetcode-60/"><span>LeetCode 60.排列序列</span></a></li><li><a class="link" href="/24b/leetcode-65/"><span>LeetCode 65.有效数字</span></a></li><li><a class="link" href="/24c/leetcode-68/"><span>LeetCode 68.文本左右对齐</span></a></li><li><a class="link" href="/24b/leetcode-84/"><span>LeetCode 84.柱状图中最大的矩形</span></a></li><li><a class="link" href="/24c/leetcode-85/"><span>LeetCode 85.最大矩形</span></a></li><li><a class="link" href="/24c/leetcode-149/"><span>LeetCode 149.直线上最多的点数</span></a></li><li><a class="link" href="/24d/leetcode-282/"><span>LeetCode 282.给表达式添加运算符</span></a></li><li><a class="link" href="/24b/leetcode-312/"><span>LeetCode 312.戳气球</span></a></li><li><a class="link" href="/24b/leetcode-1373/"><span>LeetCode 1373.二叉搜索子树的最大键值和</span></a></li><li><a class="link" href="/24b/leetcode-1739/"><span>LeetCode 1739.放置盒子</span></a></li></ul></div></div><div class="category-card sidebar-card show-list"><div class="category-card-header"><div class="category-name">深度学习<!-- --> (<!-- -->8<!-- -->)</div><button class="category-rightarrow"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 1024 1024"><path d="m761 532 2-3c9-18 6-40-10-55L400 140a48 48 0 0 0-66 70l317 299-316 305a48 48 0 0 0 67 69l350-338 1-2 2-1c3-3 4-7 6-10z" fill="#50505C"></path></svg></button></div><div class="category-card-ul-wrapper"><ul class="category-card-ul"><li><a class="link" href="/longtime/papers-dl/"><span>论文速记：深度学习</span></a></li><li><a class="link" href="/23d/r2plus1d/"><span>行为识别R(2+1)D网络</span></a></li><li><a class="link" href="/23d/object-detection-map/"><span>目标检测评价指标mAP</span></a></li><li><a class="link" href="/23d/learn-rnn-lstm/"><span>学习RNN和LSTM</span></a></li><li><a class="link" href="/24a/reproduce-nerf-rpn/"><span>记录：复现NeRF-RPN代码</span></a></li><li><a class="link" href="/24b/yolov5-obb-nms-rotated/"><span>解决：nms_rotated报错&quot;THC/THC.h&quot;: No such file or directory</span></a></li><li><a class="link" href="/24c/winograd/"><span>Winograd算法</span></a></li><li><a class="link" href="/24c/model-optimization/"><span>模型优化概述：量化、压缩、轻量化</span></a></li></ul></div></div><div class="category-card sidebar-card show-list"><div class="category-card-header"><div class="category-name">编程语言<!-- --> (<!-- -->5<!-- -->)</div><button class="category-rightarrow"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 1024 1024"><path d="m761 532 2-3c9-18 6-40-10-55L400 140a48 48 0 0 0-66 70l317 299-316 305a48 48 0 0 0 67 69l350-338 1-2 2-1c3-3 4-7 6-10z" fill="#50505C"></path></svg></button></div><div class="category-card-ul-wrapper"><ul class="category-card-ul"><li><a class="link" href="/23c/js-array/"><span>JavaScript数组常用方法</span></a></li><li><a class="link" href="/24a/cpp-stl/"><span>C++中STL的基本使用</span></a></li><li><a class="link" href="/24a/torch-numpy-topk/"><span>在pytorch和numpy中取top-k值和索引</span></a></li><li><a class="link active" href="/24a/object-oriented-programming-python/"><span>Python面向对象编程</span></a></li><li><a class="link" href="/24c/asm8086-snake/"><span>8086汇编贪吃蛇</span></a></li></ul></div></div><div class="category-card sidebar-card show-list"><div class="category-card-header"><div class="category-name">前端<!-- --> (<!-- -->2<!-- -->)</div><button class="category-rightarrow"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 1024 1024"><path d="m761 532 2-3c9-18 6-40-10-55L400 140a48 48 0 0 0-66 70l317 299-316 305a48 48 0 0 0 67 69l350-338 1-2 2-1c3-3 4-7 6-10z" fill="#50505C"></path></svg></button></div><div class="category-card-ul-wrapper"><ul class="category-card-ul"><li><a class="link" href="/23d/css-auto-height-transition/"><span>CSS实现auto高度的过渡动画</span></a></li><li><a class="link" href="/24d/android-send-explicit-intent-to-dynamically-registered-receiver/"><span>不能向动态注册的广播接收器发送显式Intent</span></a></li></ul></div></div><div class="category-card sidebar-card show-list"><div class="category-card-header"><div class="category-name">课程笔记<!-- --> (<!-- -->19<!-- -->)</div><button class="category-rightarrow"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 1024 1024"><path d="m761 532 2-3c9-18 6-40-10-55L400 140a48 48 0 0 0-66 70l317 299-316 305a48 48 0 0 0 67 69l350-338 1-2 2-1c3-3 4-7 6-10z" fill="#50505C"></path></svg></button></div><div class="category-card-ul-wrapper"><ul class="category-card-ul"><li><a class="link" href="/24b/rank-inequality/"><span>【线性代数】对秩不等式的理解</span></a></li><li><a class="link" href="/23c/pattern-recognition-1/"><span>【模式识别】统计决策方法</span></a></li><li><a class="link" href="/23c/pattern-recognition-2/"><span>【模式识别】参数估计</span></a></li><li><a class="link" href="/23c/pattern-recognition-3/"><span>【模式识别】非参数估计</span></a></li><li><a class="link" href="/23d/pattern-recognition-4/"><span>【模式识别】线性学习器与线性分类器</span></a></li><li><a class="link" href="/23d/protocols/"><span>【计算机网络】协议总结</span></a></li><li><a class="link" href="/24a/machine-learning-exercises/"><span>【机器学习】习题</span></a></li><li><a class="link" href="/24a/games101-01-transformation/"><span>【GAMES101】Transformation</span></a></li><li><a class="link" href="/24a/games101-02-rasterization/"><span>【GAMES101】Rasterization</span></a></li><li><a class="link" href="/24a/games101-03-shading/"><span>【GAMES101】Shading</span></a></li><li><a class="link" href="/24a/games101-04-geometry/"><span>【GAMES101】Geometry</span></a></li><li><a class="link" href="/24c/assembly-1/"><span>【汇编语言】访问寄存器和内存</span></a></li><li><a class="link" href="/24c/assembly-2/"><span>【汇编语言】汇编语言编程</span></a></li><li><a class="link" href="/24c/assembly-3/"><span>【汇编语言】内存寻址方式</span></a></li><li><a class="link" href="/24c/assembly-4/"><span>【汇编语言】流程转移与子程序</span></a></li><li><a class="link" href="/24c/assembly-5/"><span>【汇编语言】标志寄存器</span></a></li><li><a class="link" href="/24c/assembly-6/"><span>【汇编语言】中断及外部设备操作</span></a></li><li><a class="link" href="/24d/crypto-1/"><span>【密码学】流密码</span></a></li><li><a class="link" href="/24d/crypto-2/"><span>【密码学】块密码</span></a></li></ul></div></div><div class="category-card sidebar-card show-list"><div class="category-card-header"><div class="category-name">杂记<!-- --> (<!-- -->4<!-- -->)</div><button class="category-rightarrow"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 1024 1024"><path d="m761 532 2-3c9-18 6-40-10-55L400 140a48 48 0 0 0-66 70l317 299-316 305a48 48 0 0 0 67 69l350-338 1-2 2-1c3-3 4-7 6-10z" fill="#50505C"></path></svg></button></div><div class="category-card-ul-wrapper"><ul class="category-card-ul"><li><a class="link" href="/24b/by-questions/"><span>专业课复习</span></a></li><li><a class="link" href="/24d/about-interactive-multimedia/"><span>关于交互式多媒体</span></a></li><li><a class="link" href="/longtime/hundred-thousand/"><span>十万</span></a></li><li><a class="link" href="/longtime/linux-commands/"><span>三开</span></a></li></ul></div></div><div class="category-card sidebar-card show-list"><div class="category-card-header"><div class="category-name">交互式多媒体<!-- --> (<!-- -->3<!-- -->)</div><button class="category-rightarrow"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 1024 1024"><path d="m761 532 2-3c9-18 6-40-10-55L400 140a48 48 0 0 0-66 70l317 299-316 305a48 48 0 0 0 67 69l350-338 1-2 2-1c3-3 4-7 6-10z" fill="#50505C"></path></svg></button></div><div class="category-card-ul-wrapper"><ul class="category-card-ul"><li><a class="link" href="/24d/about-interactive-multimedia/"><span>关于交互式多媒体</span></a></li><li><a class="link" href="/23c/pattern-recognition-1/"><span>【模式识别】统计决策方法</span></a></li><li><a class="link" href="/23d/css-auto-height-transition/"><span>CSS实现auto高度的过渡动画</span></a></li></ul></div></div></div></div><div id="sidebar-mask"></div></div><script src="/_next/static/chunks/webpack-e1a5f2ba60e36b85.js" crossorigin="" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0]);self.__next_f.push([2,null])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/268aef745a7b3740.css\",\"style\",{\"crossOrigin\":\"\"}]\n0:\"$L2\"\n"])</script><script>self.__next_f.push([1,"3:HL[\"/_next/static/css/34565287a23191ed.css\",\"style\",{\"crossOrigin\":\"\"}]\n"])</script><script>self.__next_f.push([1,"4:I[47690,[],\"\"]\n6:I[55329,[\"481\",\"static/chunks/457b8330-b5c9cf3fcf214847.js\",\"954\",\"static/chunks/d3ac728e-0c798b3b8aa3bf53.js\",\"250\",\"static/chunks/250-0ef8476c0fa8ee24.js\",\"612\",\"static/chunks/612-fa632c1349770315.js\",\"551\",\"static/chunks/551-19232c47cd1e883a.js\",\"842\",\"static/chunks/842-812b9489b5c7f4d9.js\",\"877\",\"static/chunks/app/%5B...slug%5D/page-5eb8e12f7c16248f.js\"],\"\"]\n7:I[76842,[\"481\",\"static/chunks/457b8330-b5c9cf3fcf214847.js\",\"250\",\"static/chunks/250-0ef8476c0fa8ee24.js\",\"612\",\"static/chunks/612-fa632c1349770315.js\",\"842\",\"static/chunks/842-812b9489b5c7f4d9.js\",\"931\",\"static/chunks/app/page-8a7b32c8a4befa3e.js\"],\"PostMeta\"]\n8:\"$Sreact.suspense\"\na:I[76842,[\"481\",\"static/chunks/457b8330-b5c9cf3fcf214847.js\",\"250\",\"static/chunks/250-0ef8476c0fa8ee24.js\",\"612\",\"static/chunks/612-fa632c1349770315.js\",\"842\",\"static/chunks/842-812b9489b5c7f4d9.js\",\"931\",\"static/chunks/app/page-8a7b32c8a4befa3e.js\"],\"LikeButton\"]\nb:I[30389,[\"481\",\"static/chunks/457b8330-b5c9cf3fcf214847.js\",\"954\",\"static/chunks/d3ac728e-0c798b3b8aa3bf53.js\",\"250\",\"static/chunks/250-0ef8476c0fa8ee24.js\",\"612\",\"static/chunks/612-fa632c1349770315.js\",\"551\",\"static/chunks/551-19232c47cd1e883a.js\",\"842\",\"static/chunks/842-812b9489b5c7f4d9.js\",\"877\",\"static/chunks/app/%5B...slug%5D/page-5eb8e12f7c16248f.js\"],\"\"]\nc:I[5613,[],\"\"]\ne:I[31778,[],\"\"]\nf:I[25694,[\"250\",\"static/chunks/250-0ef8476c0fa8ee24.js\",\"185\",\"static/chunks/app/layout-8f33aca7be8ff34b.js\"],\"GlobalProvider\"]\n10:I[30397,[\"250\",\"static/chunks/250-0ef8476c0fa8ee24.js\",\"185\",\"static/chunks/app/layout-8f33aca7be8ff34b.js\"],\"\"]\n12:I[48955,[],\"\"]\nd:[\"slug\",\"24a/object-oriented-programming-python\",\"c\"]\n13:[]\n"])</script><script>self.__next_f.push([1,"2:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/268aef745a7b3740.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]],[\"$\",\"$L4\",null,{\"buildId\":\"lVH95Sk7T5RRWnOeaICzA\",\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/24a/object-oriented-programming-python/\",\"initialTree\":[\"\",{\"children\":[[\"slug\",\"24a/object-oriented-programming-python\",\"c\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":[\\\"24a\\\",\\\"object-oriented-programming-python\\\"]}\",{}]}]},\"$undefined\",\"$undefined\",true],\"initialSeedData\":[\"\",{\"children\":[[\"slug\",\"24a/object-oriented-programming-python\",\"c\"],{\"children\":[\"__PAGE__\",{},[\"$L5\",[[\"$\",\"$L6\",null,{}],[\"$\",\"div\",null,{\"id\":\"post-layout\",\"children\":[false,[\"$\",\"div\",null,{\"id\":\"main\",\"className\":\"center-wrapper\",\"children\":[[\"$\",\"h1\",null,{\"className\":\"post-title\",\"children\":\"Python面向对象编程\"}],[\"$\",\"$L7\",null,{\"path\":\"/24a/object-oriented-programming-python/\"}],[\"$\",\"$8\",null,{\"fallback\":[\"$\",\"p\",null,{\"children\":\"Loading component...\"}],\"children\":\"$L9\"}],[\"$\",\"$La\",null,{\"path\":\"/24a/object-oriented-programming-python/\"}]]}],[\"$\",\"$Lb\",null,{}]]}]],null]]},[\"$\",\"$Lc\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"$d\",\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Le\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/34565287a23191ed.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]]}]]},[null,[\"$\",\"html\",null,{\"lang\":\"zh-CN\",\"suppressHydrationWarning\":true,\"children\":[[\"$\",\"head\",null,{\"children\":[[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/favicon.ico\",\"type\":\"image/x-icon\"}],[\"$\",\"script\",null,{\"async\":true,\"src\":\"https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js\"}],[\"$\",\"script\",null,{\"async\":true,\"src\":\"https://www.googletagmanager.com/gtag/js?id=G-45BYSZ6WPY\"}],[\"$\",\"script\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\\nwindow.dataLayer = window.dataLayer || [];\\nfunction gtag() {\\n    dataLayer.push(arguments);\\n}\\ngtag('js', new Date());\\ngtag('config', 'G-45BYSZ6WPY');\\n\"}}],[\"$\",\"script\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"const a=z=\u003eh.getItem(z),b=(y,z)=\u003eh.setItem(y,z),c=(y,z)=\u003edocument.documentElement.setAttribute(y,z),d='theme',e='dark',f='light',g='class',h=localStorage;a(d)!==e\u0026\u0026a(d)!==f\u0026\u0026b(d,f);a(d)===e?c(g,e):c(g,f);\"}}],[\"$\",\"script\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\\nif (!Array.prototype.findLast) {\\n    Array.prototype.findLast = function (callback) {\\n        for (let i = this.length - 1; i \u003e= 0; i--) {\\n            if (callback(this[i])) return this[i];\\n        }\\n        return undefined;\\n    };\\n}\\nif (!Array.prototype.findLastIndex) {\\n    Array.prototype.findLastIndex = function (callback) {\\n        for (let i = this.length - 1; i \u003e= 0; i--) {\\n            if (callback(this[i])) return i;\\n        }\\n        return -1;\\n    };\\n}\\n\"}}]]}],[\"$\",\"body\",null,{\"children\":[\"$\",\"$Lf\",null,{\"children\":[[\"$\",\"$L10\",null,{}],[\"$\",\"$Lc\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"loadingScripts\":\"$undefined\",\"hasLoading\":false,\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"errorScripts\":\"$undefined\",\"template\":[\"$\",\"$Le\",null,{}],\"templateStyles\":\"$undefined\",\"templateScripts\":\"$undefined\",\"notFound\":[\"$\",\"div\",null,{\"id\":\"notfound\",\"children\":[[\"$\",\"img\",null,{\"alt\":\"img\",\"src\":\"/images/cry.gif\"}],[\"$\",\"code\",null,{\"id\":\"notfound-404\",\"children\":\"404\"}],[\"$\",\"code\",null,{\"id\":\"notfound-text\",\"children\":\"Page Not Found\"}]]}],\"notFoundStyles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/98e601cf5ba3633d.css\",\"precedence\":\"next\",\"crossOrigin\":\"\"}]],\"styles\":null}]]}]}]]}],null]],\"initialHead\":[false,\"$L11\"],\"globalErrorComponent\":\"$12\",\"missingSlots\":\"$W13\"}]]\n"])</script><script>self.__next_f.push([1,"14:I[62029,[\"481\",\"static/chunks/457b8330-b5c9cf3fcf214847.js\",\"954\",\"static/chunks/d3ac728e-0c798b3b8aa3bf53.js\",\"250\",\"static/chunks/250-0ef8476c0fa8ee24.js\",\"612\",\"static/chunks/612-fa632c1349770315.js\",\"551\",\"static/chunks/551-19232c47cd1e883a.js\",\"842\",\"static/chunks/842-812b9489b5c7f4d9.js\",\"877\",\"static/chunks/app/%5B...slug%5D/page-5eb8e12f7c16248f.js\"],\"\"]\n1f:I[74365,[\"481\",\"static/chunks/457b8330-b5c9cf3fcf214847.js\",\"954\",\"static/chunks/d3ac728e-0c798b3b8aa3bf53.js\",\"250\",\"static/chunks/250-0ef8476c0fa8ee24.js\",\"612\",\"static/chunks/612-fa632c1349770315.js\",\"551\",\"static/chunks/551-19232c47cd1e883a.js\",\"842\",\"static/chunks/842-812b9489b5c7f4d9.js\",\"877\",\"static/chunks/app/%5B...slug%5D/page-5eb8e12f7c16248f.js\"],\"\"]\n15:Tb06,"])</script><script>self.__next_f.push([1,"\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eUnit\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e# 初始化方法/构造函数\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003e__init__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e name\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e hp\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e damage\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token comment\"\u003e# 实例属性\u003c/span\u003e\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e name\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ehp \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e hp\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003edamage \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e damage\n\n    \u003cspan class=\"token comment\"\u003e# 实例方法\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003esayhi\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string-interpolation\"\u003e\u003cspan class=\"token string\"\u003ef\"hi, I'm \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\nu1 \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e Unit\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"u1\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e100\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e20\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\nu2 \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e Unit\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"u2\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e200\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e10\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\nu1\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esayhi\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# Hi, I'm u1\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eu1\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ehp\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# 100\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eu1\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003edamage\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# 20\u003c/span\u003e\n"])</script><script>self.__next_f.push([1,"16:T851,"])</script><script>self.__next_f.push([1,"\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eUnit\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e# 类属性，占用同一块地址\u003c/span\u003e\n    utype \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"unit\"\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003e__init__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e name\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e hp\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e damage\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token comment\"\u003e# 实例属性，独属于每个实例\u003c/span\u003e\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e name\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ehp \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e hp\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003edamage \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e damage\n\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003esayhi\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"hi, I'm %s\"\u003c/span\u003e \u003cspan class=\"token operator\"\u003e%\u003c/span\u003e self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\nu1 \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e Unit\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"u1\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e100\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e20\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\nu2 \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e Unit\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"u2\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e200\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e10\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n"])</script><script>self.__next_f.push([1,"17:T588,\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eUnit\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eutype\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e u1\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eutype\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e u2\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eutype\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# unit unit unit\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token builtin\"\u003eid\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eUnit\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eutype\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# 2197356757808\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token builtin\"\u003eid\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eu1\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eutype\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e    \u003cspan class=\"token comment\"\u003e# 2197356757808\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token builtin\"\u003eid\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eu2\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eutype\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e    \u003cspan class=\"token comment\"\u003e# 2197356757808\u003c/span\u003e\n18:Tcc3,"])</script><script>self.__next_f.push([1,"\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eUnit\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003e__init__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e name\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e hp\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e damage\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e name\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ehp \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e hp\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003edamage \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e damage\n\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003einfo\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string-interpolation\"\u003e\u003cspan class=\"token string\"\u003ef\"name: \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e, hp: \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ehp\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e, damage: \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003edamage\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eattack\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e unit\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        unit\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ehp \u003cspan class=\"token operator\"\u003e-=\u003c/span\u003e self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003edamage\n        \u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string-interpolation\"\u003e\u003cspan class=\"token string\"\u003ef\"\u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e attacks \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eunit\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e, \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eunit\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e.hp = \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eunit\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ehp\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n"])</script><script>self.__next_f.push([1,"19:T10bc,"])</script><script>self.__next_f.push([1,"\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eGroundUnit\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eUnit\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003e__init__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e name\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e hp\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e damage\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e buff\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token builtin\"\u003esuper\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e__init__\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e hp\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e damage\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"token comment\"\u003e# 子类新增的实例属性\u003c/span\u003e\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ebuff \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e buff\n\n    \u003cspan class=\"token comment\"\u003e# 重写父类方法\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eattack\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e unit\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        unit\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ehp \u003cspan class=\"token operator\"\u003e-=\u003c/span\u003e self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003edamage \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ebuff\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string-interpolation\"\u003e\u003cspan class=\"token string\"\u003ef\"\u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e attacks \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eunit\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e, \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eunit\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e.hp = \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eunit\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ehp\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\ngu1 \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e GroundUnit\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"gu1\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e100\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e20\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e0.2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\ngu2 \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e GroundUnit\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"gu2\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e200\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e10\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e0.2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\ngu2\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003einfo\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# name: gu2, hp: 200, damage: 10\u003c/span\u003e\ngu1\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eattack\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003egu2\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# gu1 attacks gu2, gu2.hp = 176.0\u003c/span\u003e\ngu2\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003einfo\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# name: gu2, hp: 176.0, damage: 10\u003c/span\u003e\n"])</script><script>self.__next_f.push([1,"1a:T832,"])</script><script>self.__next_f.push([1,"u1 \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e Unit\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"u1\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e100\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e20\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\ngu1 \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e GroundUnit\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"gu1\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e100\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e20\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e0.2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token builtin\"\u003eisinstance\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eu1\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e Unit\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e         \u003cspan class=\"token comment\"\u003e# True\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token builtin\"\u003eisinstance\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eu1\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e GroundUnit\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e   \u003cspan class=\"token comment\"\u003e# False\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token builtin\"\u003eisinstance\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003egu1\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e Unit\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e        \u003cspan class=\"token comment\"\u003e# True\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token builtin\"\u003eisinstance\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003egu1\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e GroundUnit\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# True\u003c/span\u003e\n"])</script><script>self.__next_f.push([1,"1b:T474,\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eEpicRarity\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003e__init__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e level\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003elevel \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e level\n\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003einfo\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string-interpolation\"\u003e\u003cspan class=\"token string\"\u003ef\"This is a lv.\u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003elevel\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e epic unit\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n1c:T782,\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eEpicGroundUnit\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eEpicRarity\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e GroundUnit\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003e__init__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e name\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e hp\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e damage\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e buff\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e level\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        GroundUnit\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e__init__\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e name\u003cspan class=\"token punct"])</script><script>self.__next_f.push([1,"uation\"\u003e,\u003c/span\u003e hp\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e damage\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e buff\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        EpicRarity\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e__init__\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e level\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\negu1 \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e EpicGroundUnit\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"egu1\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e100\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e20\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e0.2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\negu1\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003einfo\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# This is a lv.1 epic unit\u003c/span\u003e\n1d:T789,\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eEpicGroundUnit\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eGroundUnit\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e EpicRarity\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003e__init__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e name\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e hp\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e damage\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e buff\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e level\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        GroundUnit\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e__init__\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e name\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e hp\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e damage\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e buff\u003cspan c"])</script><script>self.__next_f.push([1,"lass=\"token punctuation\"\u003e)\u003c/span\u003e\n        EpicRarity\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e__init__\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e level\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\negu1 \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e EpicGroundUnit\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"egu1\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e100\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e20\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e0.2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\negu1\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003einfo\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# name: egu1, hp: 100, damage: 20\u003c/span\u003e\n1e:T746,\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eA\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003etest\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'A'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eB\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003etest\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'B'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eC\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eA\u003cspan cl"])</script><script>self.__next_f.push([1,"ass=\"token punctuation\"\u003e,\u003c/span\u003e B\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003epass\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eD\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eC\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e B\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003epass\u003c/span\u003e\n\nobj \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e D\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\nobj\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003etest\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# A\u003c/span\u003e\n20:Ta6f,"])</script><script>self.__next_f.push([1,"\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eUnit\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003e__init__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e name\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e hp\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e damage\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e name\n        \u003cspan class=\"token comment\"\u003e# 私有属性\u003c/span\u003e\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e__hp \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e hp\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e__damage \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e damage\n\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eattack\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e unit\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        unit\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e__hp \u003cspan class=\"token operator\"\u003e-=\u003c/span\u003e self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e__damage\n        \u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string-interpolation\"\u003e\u003cspan class=\"token string\"\u003ef\"\u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e attacks \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eunit\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e, \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eunit\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e.__hp = \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eunit\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e__hp\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"token comment\"\u003e# 通过公有方法访问私有属性\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eget_hp\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e__hp\n"])</script><script>self.__next_f.push([1,"21:T11e6,"])</script><script>self.__next_f.push([1,"\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eA\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003e__init__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e x\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e y\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e z\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token comment\"\u003e# 公有变量\u003c/span\u003e\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ex \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e x\n        \u003cspan class=\"token comment\"\u003e# 保护变量\u003c/span\u003e\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e_y \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e y\n        \u003cspan class=\"token comment\"\u003e# 私有变量\u003c/span\u003e\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e__z \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e z\n\n\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eB\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eA\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003e__init__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e x\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e y\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e z\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token builtin\"\u003esuper\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e__init__\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e y\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e z\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003einfo_x\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string-interpolation\"\u003e\u003cspan class=\"token string\"\u003ef\"x: \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003einfo_y\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string-interpolation\"\u003e\u003cspan class=\"token string\"\u003ef\"y: \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e_y\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003einfo_z\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string-interpolation\"\u003e\u003cspan class=\"token string\"\u003ef\"z: \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e__z\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\nb \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e B\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e3\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\nb\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003einfo_x\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# x: 1\u003c/span\u003e\nb\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003einfo_y\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# y: 2\u003c/span\u003e\nb\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003einfo_z\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# AttributeError: 'B' object has no attribute '_B__z'. Did you mean: '_A__z'?\u003c/span\u003e\n"])</script><script>self.__next_f.push([1,"22:T10f5,"])</script><script>self.__next_f.push([1,"\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eUnit\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003e__init__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e name\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e hp\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e damage\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e name\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ehp \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e hp\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003edamage \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e damage\n\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003einfo\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string-interpolation\"\u003e\u003cspan class=\"token string\"\u003ef\"name: \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e, hp: \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ehp\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e, damage: \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003edamage\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eGroundUnit\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eUnit\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003einfo\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"This is a ground unit.\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eAirUnit\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eUnit\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003einfo\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"This is an air unit.\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eshow_info\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eunit\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    unit\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003einfo\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\ngu1 \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e GroundUnit\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"gu1\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e100\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e20\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\nau1 \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e AirUnit\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"au1\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e100\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e20\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\nshow_info\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003egu1\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# This is a ground unit.\u003c/span\u003e\nshow_info\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eau1\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# This is an air unit.\u003c/span\u003e\n"])</script><script>self.__next_f.push([1,"23:T538,\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eUnit\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003e__init__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e name\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e hp\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e damage\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e name\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ehp \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e hp\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003edamage \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e damage\n\n    \u003cspan class=\"token comment\"\u003e# 这是一个抽象方法，子类必须重写这个方法，否则在调用时会报错\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003einfo\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eraise\u003c/span\u003e NotImplementedError\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"Subclasses must implement abstract method.\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n24:T539,\u003cspan class=\"token keyword\"\u003efrom\u003c/span\u003e abc \u003cspan class=\"token keyword\"\u003eimport\u003c/span\u003e ABC\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e abstractmethod\n\n\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eUnit\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eABC\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003e__init__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e name\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e hp\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e damage\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/sp"])</script><script>self.__next_f.push([1,"an\u003e\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e name\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ehp \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e hp\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003edamage \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e damage\n\n    \u003cspan class=\"token decorator annotation punctuation\"\u003e@abstractmethod\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003einfo\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003epass\u003c/span\u003e\n25:T86b,"])</script><script>self.__next_f.push([1,"\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eUnit\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    utype \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"unit\"\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003e__init__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e name\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e hp\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e damage\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e name\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ehp \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e hp\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003edamage \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e damage\n\n    \u003cspan class=\"token decorator annotation punctuation\"\u003e@classmethod\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eshow_type\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecls\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token comment\"\u003e# 可以访问到类属性\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string-interpolation\"\u003e\u003cspan class=\"token string\"\u003ef\"This is a \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003ecls\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eutype\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e.\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\nu1 \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e Unit\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"u1\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e100\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e20\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\nu1\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eshow_type\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# This is a unit.\u003c/span\u003e\n"])</script><script>self.__next_f.push([1,"26:T1040,"])</script><script>self.__next_f.push([1,"\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eUnit\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token builtin\"\u003etype\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"unit\"\u003c/span\u003e\n    __unit_num \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# 声明为私有类属性\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003e__init__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e name\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e hp\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e damage\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e name\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ehp \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e hp\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003edamage \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e damage\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eadd_unit_num\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"token decorator annotation punctuation\"\u003e@classmethod\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eadd_unit_num\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecls\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        cls\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e__unit_num \u003cspan class=\"token operator\"\u003e+=\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\n\n    \u003cspan class=\"token decorator annotation punctuation\"\u003e@classmethod\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eget_unit_num\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecls\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e cls\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e__unit_num\n\nu1 \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e Unit\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"u1\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e100\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e20\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\nu2 \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e Unit\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"u2\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e200\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e10\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eu1\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eget_unit_num\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# 2\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eu2\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eget_unit_num\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# 2\u003c/span\u003e\n\nu3 \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e Unit\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"u3\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e300\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e30\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eu3\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eget_unit_num\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# 3\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eUnit\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eget_unit_num\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# 3\u003c/span\u003e\n"])</script><script>self.__next_f.push([1,"27:T9b3,"])</script><script>self.__next_f.push([1,"\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eUnit\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token builtin\"\u003etype\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"unit\"\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003e__init__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e name\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e hp\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e damage\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ename \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e name\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ehp \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e hp\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003edamage \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e damage\n\n    \u003cspan class=\"token decorator annotation punctuation\"\u003e@staticmethod\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003ecalc_hp_after_attack\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ehp\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e damage\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# 没有隐式的第一参数\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e hp \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e damage\n\nu1 \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e Unit\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"u1\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e100\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e20\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\nu2 \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e Unit\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"u2\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e200\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e10\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eu1\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ecalc_hp_after_attack\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eu1\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ehp\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e u2\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003edamage\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# 90\u003c/span\u003e\n"])</script><script>self.__next_f.push([1,"28:T507,circle \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e Circle\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e5\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecircle\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eradius\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# 5\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecircle\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ediameter\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# 10\u003c/span\u003e\n\ncircle\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ediameter \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e14\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecircle\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eradius\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# 7.0\u003c/span\u003e\n\ncircle\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003eradius \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e12\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecircle\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ediameter\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# 24\u003c/span\u003e\n29:Tb5b,"])</script><script>self.__next_f.push([1,"\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eCircle\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003e__init__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e radius\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e__radius \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e radius\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e__diameter \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e radius\n\n    \u003cspan class=\"token comment\"\u003e# 属性的getter方法\u003c/span\u003e\n    \u003cspan class=\"token decorator annotation punctuation\"\u003e@property\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eradius\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e__radius\n\n    \u003cspan class=\"token comment\"\u003e# 属性的setter方法\u003c/span\u003e\n    \u003cspan class=\"token decorator annotation punctuation\"\u003e@radius\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esetter\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eradius\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e value\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e__radius \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e value\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e__diameter \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e value \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\n\n    \u003cspan class=\"token decorator annotation punctuation\"\u003e@property\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003ediameter\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e__diameter\n\n    \u003cspan class=\"token decorator annotation punctuation\"\u003e@diameter\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003esetter\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003ediameter\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e value\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e__diameter \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e value\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e__radius \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e value \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token number\"\u003e0.5\u003c/span\u003e\n"])</script><script>self.__next_f.push([1,"2a:T71c,\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eCircle\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\n\n    \u003cspan class=\"token comment\"\u003e# 属性的deleter方法\u003c/span\u003e\n    \u003cspan class=\"token decorator annotation punctuation\"\u003e@radius\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003edeleter\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003eradius\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"delete radius\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003edel\u003c/span\u003e self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e__radius\n\n    \u003cspan class=\"token decorator annotation punctuation\"\u003e@diameter\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003edeleter\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003ediameter\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"delete diameter\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003edel\u003c/span\u003e self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e__diameter\n\n\u003cspan class=\"token keyword\"\u003edel\u003c/span\u003e circle\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ediameter  \u003cspan class=\"token comment\"\u003e# delete diameter\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e# print(circle.diameter)  # AttributeError: 'Circle' object has no attribute '_Circle__diameter'\u003c/span\u003e\n2b:Tb7a,"])</script><script>self.__next_f.push([1,"\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eA\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003e__init__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e x\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e y\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e z\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ex \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e x\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ey \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e y\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ez \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e z\n\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003einfo_x\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string-interpolation\"\u003e\u003cspan class=\"token string\"\u003ef\"x: \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003einfo_y\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string-interpolation\"\u003e\u003cspan class=\"token string\"\u003ef\"y: \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ey\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003einfo_z\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string-interpolation\"\u003e\u003cspan class=\"token string\"\u003ef\"z: \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ez\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\na \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e A\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e10\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e20\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e30\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n"])</script><script>self.__next_f.push([1,"2c:T452,\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token builtin\"\u003ehasattr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ea\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"x\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# True\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token builtin\"\u003ehasattr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ea\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"info_x\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# True\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token builtin\"\u003ehasattr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ea\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"info_w\"\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# False\u003c/span\u003e\n2d:Tbc2,"])</script><script>self.__next_f.push([1,"a_to_z \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e\"abcdefghijklmnopqrstuvwxyz\"\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eA2Z\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003epass\u003c/span\u003e\n\na2z \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e A2Z\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003efor\u003c/span\u003e ch \u003cspan class=\"token keyword\"\u003ein\u003c/span\u003e a_to_z\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token comment\"\u003e# 动态的创建属性\u003c/span\u003e\n    \u003cspan class=\"token builtin\"\u003esetattr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ea2z\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ch\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eord\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ech\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eord\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string\"\u003e'a'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"token comment\"\u003e# 动态的创建方法\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003einfo_ch\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string-interpolation\"\u003e\u003cspan class=\"token string\"\u003ef\"\u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003ech\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e: \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token builtin\"\u003egetattr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ea2z\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e ch\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"token builtin\"\u003esetattr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ea2z\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token string-interpolation\"\u003e\u003cspan class=\"token string\"\u003ef\"info_\u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003ech\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e info_ch\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ea2z\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ed\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# 4\u003c/span\u003e\na2z\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003einfo_z\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# z: 26\u003c/span\u003e\n"])</script><script>self.__next_f.push([1,"2e:T567,\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eVector3d\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003e__init__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e x\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e y\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e z\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ex \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e x\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ey \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e y\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ez \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e z\n\nv1 \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e Vector3d\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e3\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e4\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e5\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\nv2 \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e Vector3d\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e3\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n2f:Tbaf,"])</script><script>self.__next_f.push([1,"\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eVector3d\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003e__repr__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token string-interpolation\"\u003e\u003cspan class=\"token string\"\u003ef\"Vector3d(\u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e, \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ey\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e, \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ez\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e)\"\u003c/span\u003e\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003e__str__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token string-interpolation\"\u003e\u003cspan class=\"token string\"\u003ef\"(\u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e, \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ey\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e, \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ez\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e)\"\u003c/span\u003e\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token builtin\"\u003estr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ev1\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# (3, 4, 5)\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token builtin\"\u003erepr\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ev1\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# Vector3d(3, 4, 5)\u003c/span\u003e\n\u003cspan class=\"token comment\"\u003e# 会优先调用__str__方法\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ev1\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# (3, 4, 5)\u003c/span\u003e\n"])</script><script>self.__next_f.push([1,"30:T54a,\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eVector3d\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003e__call__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e x\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e y\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e z\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ex \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e x\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ey \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e y\n        self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ez \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e z\n\nv2\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ev2\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# (2, -2, 1)\u003c/span\u003e\n31:T148a,"])</script><script>self.__next_f.push([1,"\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eVector3d\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\n\n    \u003cspan class=\"token comment\"\u003e# 重载加号运算符，obj1+obj2时调用\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003e__add__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e other\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e Vector3d\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ex \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e other\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ey \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e other\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ey\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ez \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e other\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ez\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"token comment\"\u003e# 重载减号运算符，obj1-obj2时调用\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003e__sub__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e other\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e Vector3d\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ex \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e other\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ey \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e other\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ey\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ez \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e other\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ez\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"token comment\"\u003e# 重载乘号运算符\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003e__mul__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e other\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eisinstance\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eother\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token builtin\"\u003eint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token builtin\"\u003efloat\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e Vector3d\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ex \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e other\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ey \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e other\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ez \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e other\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eelse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ex \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e other\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ex \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ey \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e other\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ey \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ez \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e other\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ez\n\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ev1\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# (3, 4, 5)\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ev2\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# (2, -2, 1)\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ev1 \u003cspan class=\"token operator\"\u003e+\u003c/span\u003e v2\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# (5, 2, 6)\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ev1 \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e v2\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# (1, 6, 4)\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ev1 \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e v2\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# 3\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ev1 \u003cspan class=\"token operator\"\u003e*\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# (6, 8, 10)\u003c/span\u003e\n"])</script><script>self.__next_f.push([1,"32:T10fe,"])</script><script>self.__next_f.push([1,"\u003cspan class=\"token keyword\"\u003eclass\u003c/span\u003e \u003cspan class=\"token class-name\"\u003eVector3d\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003e__getitem__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e key\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e key \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ex\n    \u003cspan class=\"token keyword\"\u003eelif\u003c/span\u003e key \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ey\n    \u003cspan class=\"token keyword\"\u003eelif\u003c/span\u003e key \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003ereturn\u003c/span\u003e self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ez\n    \u003cspan class=\"token keyword\"\u003eelse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eraise\u003c/span\u003e IndexError\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string-interpolation\"\u003e\u003cspan class=\"token string\"\u003ef\"index out of range: \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003ekey\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"token keyword\"\u003edef\u003c/span\u003e \u003cspan class=\"token function\"\u003e__setitem__\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003eself\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e key\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e value\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"token keyword\"\u003eif\u003c/span\u003e key \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n            self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ex \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e value\n        \u003cspan class=\"token keyword\"\u003eelif\u003c/span\u003e key \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n            self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ey \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e value\n        \u003cspan class=\"token keyword\"\u003eelif\u003c/span\u003e key \u003cspan class=\"token operator\"\u003e==\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n            self\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003ez \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e value\n        \u003cspan class=\"token keyword\"\u003eelse\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"token keyword\"\u003eraise\u003c/span\u003e IndexError\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token string-interpolation\"\u003e\u003cspan class=\"token string\"\u003ef\"index out of range: \u003c/span\u003e\u003cspan class=\"token interpolation\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003ekey\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token string\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ev1\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e v1\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e v1\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e2\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# 18 -24 15\u003c/span\u003e\nv1\u003cspan class=\"token punctuation\"\u003e[\u003c/span\u003e\u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e]\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token number\"\u003e2\u003c/span\u003e\n\u003cspan class=\"token keyword\"\u003eprint\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ev1\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e  \u003cspan class=\"token comment\"\u003e# (2, -24, 15)\u003c/span\u003e\n"])</script><script>self.__next_f.push([1,"9:[[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"本文对面向对象的基本理论（为什么要有类、什么是属性、什么是方法等）不多做解释，重点在Python中的编程实现。\"}}],[\"$\",\"h2\",null,{\"className\":\"x-h1\",\"children\":\"基本操作\"}],[\"$\",\"h3\",null,{\"className\":\"x-h2\",\"children\":\"定义一个类\"}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"class Unit:\\n    # 初始化方法/构造函数\\n    def __init__(self, name, hp, damage):\\n        # 实例属性\\n        self.name = name\\n        self.hp = hp\\n        self.damage = damage\\n\\n    # 实例方法\\n    def sayhi(self):\\n        print(f\\\"hi, I'm {self.name}\\\")\\n\\nu1 = Unit(\\\"u1\\\", 100, 20)\\nu2 = Unit(\\\"u2\\\", 200, 10)\\n\\nu1.sayhi()  # Hi, I'm u1\\nprint(u1.hp)  # 100\\nprint(u1.damage)  # 20\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":\"linear-gradient(180deg, transparent 72px, var(--bg-transparent-golden) 72px 192px, transparent 192px)\"},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$15\"}}]}]]}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"上面的代码定义了一个\u003ccode class=\\\"x-inline-highlight\\\"\u003eUnit\u003c/code\u003e类，这个例子中暂且理解为一个游戏中的作战单位，每个单位具有名字\u003ccode class=\\\"x-inline-highlight\\\"\u003ename\u003c/code\u003e、生命值\u003ccode class=\\\"x-inline-highlight\\\"\u003ehp\u003c/code\u003e、攻击力\u003ccode class=\\\"x-inline-highlight\\\"\u003edamage\u003c/code\u003e这些属性。\"}}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003ccode class=\\\"x-inline-highlight\\\"\u003e__init__\u003c/code\u003e方法称作类的\u003cspan class=\\\"x-inline-strong\\\"\u003e初始化方法\u003c/span\u003e/\u003cspan class=\\\"x-inline-strong\\\"\u003e构造函数\u003c/span\u003e，实例本身会作为函数的第一个参数\u003ccode class=\\\"x-inline-highlight\\\"\u003eself\u003c/code\u003e被传入。从这个角度理解，实际上\u003ccode class=\\\"x-inline-highlight\\\"\u003e__init__\u003c/code\u003e方法是将传入的参数“绑定”到新创建的实例上。\"}}],[\"$\",\"h3\",null,{\"className\":\"x-h2\",\"children\":\"类属性和实例属性\"}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"我们在类下直接定义了一个属性\u003ccode class=\\\"x-inline-highlight\\\"\u003eutype\u003c/code\u003e，它是一个\u003ccode class=\\\"x-inline-highlight\\\"\u003e类属性\u003c/code\u003e；与之对应的是\u003ccode class=\\\"x-inline-highlight\\\"\u003e__init__\u003c/code\u003e方法为实例创建的属性，我们称之为\u003ccode class=\\\"x-inline-highlight\\\"\u003e实例属性\u003c/code\u003e。\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"class Unit:\\n    # 类属性，占用同一块地址\\n    utype = \\\"unit\\\"\\n\\n    def __init__(self, name, hp, damage):\\n        # 实例属性，独属于每个实例\\n        self.name = name\\n        self.hp = hp\\n        self.damage = damage\\n\\n    def sayhi(self):\\n        print(\\\"hi, I'm %s\\\" % self.name)\\n\\nu1 = Unit(\\\"u1\\\", 100, 20)\\nu2 = Unit(\\\"u2\\\", 200, 10)\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":\"linear-gradient(180deg, transparent 72px, var(--bg-transparent-golden) 72px 96px, transparent 96px)\"},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$16\"}}]}]]}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"访问实例属性时，把它们当作普通变量就好了；实例属性也可以在\u003ccode class=\\\"x-inline-highlight\\\"\u003e__init__\u003c/code\u003e方法之外动态的添加。\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"print(u1.hp)  # 100\\nprint(u1.damage)  # 20\\nu1.level = 1\\nprint(u1.level)  # 1\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":null},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"token keyword\\\"\u003eprint\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eu1\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003ehp\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e  \u003cspan class=\\\"token comment\\\"\u003e# 100\u003c/span\u003e\\n\u003cspan class=\\\"token keyword\\\"\u003eprint\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eu1\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003edamage\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e  \u003cspan class=\\\"token comment\\\"\u003e# 20\u003c/span\u003e\\nu1\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003elevel \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token number\\\"\u003e1\u003c/span\u003e\\n\u003cspan class=\\\"token keyword\\\"\u003eprint\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eu1\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003elevel\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e  \u003cspan class=\\\"token comment\\\"\u003e# 1\u003c/span\u003e\\n\"}}]}]]}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"类属性可以在类上取得，也可以在实例上取得。类属性共享内存地址。\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"print(Unit.utype, u1.utype, u2.utype)  # unit unit unit\\nprint(id(Unit.utype))  # 2197356757808\\nprint(id(u1.utype))    # 2197356757808\\nprint(id(u2.utype))    # 2197356757808\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":null},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$17\"}}]}]]}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"由于共享内存地址，因此修改类属性具有全局性：\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"Unit.utype = \\\"spell\\\"\\nprint(Unit.utype, u1.utype, u2.utype)  # spell spell spell\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":null},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"Unit\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003eutype \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e\\\"spell\\\"\u003c/span\u003e\\n\u003cspan class=\\\"token keyword\\\"\u003eprint\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eUnit\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003eutype\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e u1\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003eutype\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e u2\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003eutype\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e  \u003cspan class=\\\"token comment\\\"\u003e# spell spell spell\u003c/span\u003e\\n\"}}]}]]}],[\"$\",\"div\",null,{\"className\":\"x-highlightblock highlight-background-golden\",\"children\":[[\"$\",\"h4\",null,{\"className\":\"x-h3\",\"children\":\"注意\"}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"u1.utype = \\\"hero\\\"\\nprint(Unit.utype, u1.utype, u2.utype)  # spell hero spell\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":null},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"u1\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003eutype \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e\\\"hero\\\"\u003c/span\u003e\\n\u003cspan class=\\\"token keyword\\\"\u003eprint\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eUnit\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003eutype\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e u1\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003eutype\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e u2\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003eutype\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e  \u003cspan class=\\\"token comment\\\"\u003e# spell hero spell\u003c/span\u003e\\n\"}}]}]]}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"如果同样的属性名称同时出现在实例和类中，则属性查找会优先选择实例属性。上面的例子相当于给\u003ccode class=\\\"x-inline-highlight\\\"\u003eu1\u003c/code\u003e添加了一个与类属性同名实例属性，\u003ccode class=\\\"x-inline-highlight\\\"\u003eu1.utype\u003c/code\u003e访问到的不是类属性。\"}}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"要想访问\u003ccode class=\\\"x-inline-highlight\\\"\u003eu1\u003c/code\u003e的类属性，可以通过\u003ccode class=\\\"x-inline-highlight\\\"\u003e__class__\u003c/code\u003e访问：\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"print(u1.__class__.utype)  # spell\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":null},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"token keyword\\\"\u003eprint\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eu1\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e__class__\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003eutype\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e  \u003cspan class=\\\"token comment\\\"\u003e# spell\u003c/span\u003e\"}}]}]]}]]}],[\"$\",\"h2\",null,{\"className\":\"x-h1\",\"children\":\"继承\"}],[\"$\",\"h3\",null,{\"className\":\"x-h2\",\"children\":\"实现一个子类\"}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"我们还是定义一个\u003ccode class=\\\"x-inline-highlight\\\"\u003eUnit\u003c/code\u003e类，并实现两个方法：\u003ccode class=\\\"x-inline-highlight\\\"\u003einfo\u003c/code\u003e用于输出自身基本信息，\u003ccode class=\\\"x-inline-highlight\\\"\u003eattack\u003c/code\u003e模拟攻击另一个单位。\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"class Unit:\\n    def __init__(self, name, hp, damage):\\n        self.name = name\\n        self.hp = hp\\n        self.damage = damage\\n\\n    def info(self):\\n        print(f\\\"name: {self.name}, hp: {self.hp}, damage: {self.damage}\\\")\\n\\n    def attack(self, unit):\\n        unit.hp -= self.damage\\n        print(f\\\"{self.name} attacks {unit.name}, {unit.name}.hp = {unit.hp}\\\")\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":null},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$18\"}}]}]]}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"现在我们希望实现一个\u003ccode class=\\\"x-inline-highlight\\\"\u003eGroundUnit\u003c/code\u003e类，表示地面单位，并且地面单位具有特有的伤害加成，用属性\u003ccode class=\\\"x-inline-highlight\\\"\u003ebuff\u003c/code\u003e定义。显然，会有大量的逻辑与\u003ccode class=\\\"x-inline-highlight\\\"\u003eUnit\u003c/code\u003e类是重复的。这时可以通过继承来实现：\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"class GroundUnit(Unit):\\n    def __init__(self, name, hp, damage, buff):\\n        super().__init__(name, hp, damage)\\n        # 子类新增的实例属性\\n        self.buff = buff\\n\\n    # 重写父类方法\\n    def attack(self, unit):\\n        unit.hp -= self.damage * (1 + self.buff)\\n        print(f\\\"{self.name} attacks {unit.name}, {unit.name}.hp = {unit.hp}\\\")\\n\\ngu1 = GroundUnit(\\\"gu1\\\", 100, 20, 0.2)\\ngu2 = GroundUnit(\\\"gu2\\\", 200, 10, 0.2)\\n\\ngu2.info()  # name: gu2, hp: 200, damage: 10\\ngu1.attack(gu2)  # gu1 attacks gu2, gu2.hp = 176.0\\ngu2.info()  # name: gu2, hp: 176.0, damage: 10\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":\"linear-gradient(180deg, transparent 72px, var(--bg-transparent-golden) 72px 96px, transparent 96px)\"},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$19\"}}]}]]}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"定义类时，用\u003ccode class=\\\"x-inline-highlight\\\"\u003eclass 子类(父类):\u003c/code\u003e表示继承。如果子类有自己的构造函数，会覆盖父类的构造函数；否则会继承父类的构造函数。\"}}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"代码中\u003ccode class=\\\"x-inline-highlight\\\"\u003esuper()\u003c/code\u003e函数可以找到父类，高亮的代码等价于\u003ccode class=\\\"x-inline-highlight\\\"\u003eUnit.__init__(self, name, hp, damage)\u003c/code\u003e。\"}}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"如果子类需要对父类的方法进行重写，只需要在子类下定义同名方法，然后重写逻辑。其他父类的方法会被继承到子类中，例如这个例子中的\u003ccode class=\\\"x-inline-highlight\\\"\u003einfo()\u003c/code\u003e。\"}}],[\"$\",\"h3\",null,{\"className\":\"x-h2\",\"children\":\"isinstance函数\"}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003ccode class=\\\"x-inline-highlight\\\"\u003eisinstance(实例,类)\u003c/code\u003e可以判断一个实例是否属于给定的类。\u003cspan class=\\\"x-inline-strong\\\"\u003e子类的实例同时也是父类的实例\u003c/span\u003e。\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"u1 = Unit(\\\"u1\\\", 100, 20)\\ngu1 = GroundUnit(\\\"gu1\\\", 100, 20, 0.2)\\n\\nprint(isinstance(u1, Unit))         # True\\nprint(isinstance(u1, GroundUnit))   # False\\nprint(isinstance(gu1, Unit))        # True\\nprint(isinstance(gu1, GroundUnit))  # True\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":null},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$1a\"}}]}]]}],[\"$\",\"h3\",null,{\"className\":\"x-h2\",\"children\":\"多继承\"}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"假设我们的游戏复杂起来，引入了稀有度系统，每个单位有一个所属的稀有度，例如普通、稀有、史诗、传奇等等。以史诗级为例，假设对于这些不同稀有度的单位有着其他独特的机制，以至于我们不得不新创建一个\u003ccode class=\\\"x-inline-highlight\\\"\u003eEpicRarity\u003c/code\u003e类：\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"class EpicRarity:\\n    def __init__(self, level):\\n        self.level = level\\n\\n    def info(self):\\n        print(f\\\"This is a lv.{self.level} epic unit\\\")\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":null},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$1b\"}}]}]]}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"当然，为了便于演示，我们只定义了一个\u003ccode class=\\\"x-inline-highlight\\\"\u003elevel\u003c/code\u003e属性和\u003ccode class=\\\"x-inline-highlight\\\"\u003einfo\u003c/code\u003e方法。\"}}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"现在，我们想实现\u003ccode class=\\\"x-inline-highlight\\\"\u003eEpicGroundUnit\u003c/code\u003e子类，表示史诗级地面单位。显然它需要同时继承父类\u003ccode class=\\\"x-inline-highlight\\\"\u003eEpicRarity\u003c/code\u003e和\u003ccode class=\\\"x-inline-highlight\\\"\u003eGroundUnit\u003c/code\u003e，这就是\u003cspan class=\\\"x-inline-strong\\\"\u003e多继承\u003c/span\u003e。\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"class EpicGroundUnit(EpicRarity, GroundUnit):\\n    def __init__(self, name, hp, damage, buff, level):\\n        GroundUnit.__init__(self, name, hp, damage, buff)\\n        EpicRarity.__init__(self, level)\\n\\negu1 = EpicGroundUnit(\\\"egu1\\\", 100, 20, 0.2, 1)\\n\\negu1.info()  # This is a lv.1 epic unit\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":\"linear-gradient(180deg, transparent 72px, var(--bg-transparent-golden) 72px 120px, transparent 120px)\"},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$1c\"}}]}]]}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"在构造函数中我们需要分别对父类进行初始化。\"}}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"注意到两个父类都实现了\u003ccode class=\\\"x-inline-highlight\\\"\u003einfo\u003c/code\u003e方法并且没有被子类重写。调用之后我们发现，子类继承的是\u003ccode class=\\\"x-inline-highlight\\\"\u003eEpicRarity\u003c/code\u003e的\u003ccode class=\\\"x-inline-highlight\\\"\u003einfo\u003c/code\u003e方法。如果代码改写为：\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"class EpicGroundUnit(GroundUnit, EpicRarity):\\n    def __init__(self, name, hp, damage, buff, level):\\n        GroundUnit.__init__(self, name, hp, damage, buff)\\n        EpicRarity.__init__(self, level)\\n\\negu1 = EpicGroundUnit(\\\"egu1\\\", 100, 20, 0.2, 1)\\n\\negu1.info()  # name: egu1, hp: 100, damage: 20\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":\"linear-gradient(180deg, transparent 24px, var(--bg-transparent-golden) 24px 48px, transparent 48px)\"},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$1d\"}}]}]]}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"就会发现，调换父类的顺序后，现在子类继承的是\u003ccode class=\\\"x-inline-highlight\\\"\u003eGroundUnit\u003c/code\u003e的\u003ccode class=\\\"x-inline-highlight\\\"\u003einfo\u003c/code\u003e方法。这就引出了下一节的内容：\u003cspan class=\\\"x-inline-strong\\\"\u003e方法解析顺序\u003c/span\u003e。\"}}],[\"$\",\"h3\",null,{\"className\":\"x-h2\",\"children\":\"方法解析顺序MRO\"}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"对于多继承情况下的同名方法，如何从父类中找应该优先使用哪个父类的方法就叫\u003cspan class=\\\"x-inline-strong\\\"\u003e方法解析顺序\u003c/span\u003e\u003ccode class=\\\"x-inline-highlight\\\"\u003e(Method Resolution Order, MRO)\u003c/code\u003e。 Python采用\u003ca href=\\\"https://zh.wikipedia.org/zh-cn/C3%E7%BA%BF%E6%80%A7%E5%8C%96\\\" target=\\\"_blank\\\" rel=\\\"noreferrer\\\" class=\\\"x-inline-link\\\"\u003eC3线性化\u003c/a\u003e算法来计算线性化列表，保证继承顺序列表中每个类只出现一次。\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"class A:\\n    def test(self):\\n        print('A')\\n\\nclass B:\\n    def test(self):\\n        print('B')\\n\\nclass C(A, B):\\n    pass\\n\\nclass D(C, B):\\n    pass\\n\\nobj = D()\\nobj.test()  # A\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":null},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$1e\"}}]}]]}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"上述代码描述了一个如下图所示的复杂继承关系：\"}}],[\"$\",\"$L1f\",null,{\"src\":\"mro.jpg\",\"width\":\"300px\",\"filterDarkTheme\":true}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"可以通过\u003ccode class=\\\"x-inline-highlight\\\"\u003emro()\u003c/code\u003e函数得到类的方法解析顺序：\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"# 注意是类名，不是实例名\\nprint(D.mro())  # [\u003cclass '__main__.D'\u003e, \u003cclass '__main__.C'\u003e, \u003cclass '__main__.A'\u003e, \u003cclass '__main__.B'\u003e, \u003cclass 'object'\u003e]\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":null},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"token comment\\\"\u003e# 注意是类名，不是实例名\u003c/span\u003e\\n\u003cspan class=\\\"token keyword\\\"\u003eprint\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eD\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003emro\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e  \u003cspan class=\\\"token comment\\\"\u003e# [\u0026lt;class '__main__.D'\u003e, \u0026lt;class '__main__.C'\u003e, \u0026lt;class '__main__.A'\u003e, \u0026lt;class '__main__.B'\u003e, \u0026lt;class 'object'\u003e]\u003c/span\u003e\\n\"}}]}]]}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"输出的列表中，从左到右的顺序为查找方法的顺序。上述例子中，\u003ccode class=\\\"x-inline-highlight\\\"\u003eD\u003c/code\u003e和\u003ccode class=\\\"x-inline-highlight\\\"\u003eC\u003c/code\u003e类都没有定义\u003ccode class=\\\"x-inline-highlight\\\"\u003etest\u003c/code\u003e方法，因此顺次使用了\u003ccode class=\\\"x-inline-highlight\\\"\u003eA\u003c/code\u003e类的\u003ccode class=\\\"x-inline-highlight\\\"\u003etest\u003c/code\u003e方法。\"}}],[\"$\",\"div\",null,{\"className\":\"x-highlightblock highlight-background-golden\",\"children\":[[\"$\",\"h4\",null,{\"className\":\"x-h3\",\"children\":\"注意\"}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"MRO顺序不是简单的深度优先或广度优先！\"}}]]}],[\"$\",\"h2\",null,{\"className\":\"x-h1\",\"children\":\"封装\"}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"在前面\u003ccode class=\\\"x-inline-highlight\\\"\u003eUnit\u003c/code\u003e类的例子中，我们可以通过直接访问\u003ccode class=\\\"x-inline-highlight\\\"\u003eu1.hp\u003c/code\u003e修改其值，这样并不安全（这岂不是像外挂一样）！\u003cspan class=\\\"x-inline-strong\\\"\u003e封装\u003c/span\u003e的目的是为了保护数据，不让外部直接访问和修改。在Python中，约定通过在属性名称前加两个下划线\u003ccode class=\\\"x-inline-highlight\\\"\u003e__\u003c/code\u003e来将属性私有化。这种命名约定会使Python解释器修改变量名为\u003ccode class=\\\"x-inline-highlight\\\"\u003e_类名__属性名\u003c/code\u003e的形式，使其在类外部变得难以访问。\"}}],[\"$\",\"h3\",null,{\"className\":\"x-h2\",\"children\":\"将实例属性私有化\"}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"class Unit:\\n    def __init__(self, name, hp, damage):\\n        self.name = name\\n        # 私有属性\\n        self.__hp = hp\\n        self.__damage = damage\\n\\n    def attack(self, unit):\\n        unit.__hp -= self.__damage\\n        print(f\\\"{self.name} attacks {unit.name}, {unit.name}.__hp = {unit.__hp}\\\")\\n\\n    # 通过公有方法访问私有属性\\n    def get_hp(self):\\n        return self.__hp\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":\"linear-gradient(180deg, transparent 120px, var(--bg-transparent-golden) 120px 168px, transparent 168px)\"},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$20\"}}]}]]}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"在定义私有属性后，对外开放一个公有方法\u003ccode class=\\\"x-inline-highlight\\\"\u003eget_hp\u003c/code\u003e，通过这个公有方法可以间接的访问到\u003ccode class=\\\"x-inline-highlight\\\"\u003e__hp\u003c/code\u003e属性。这样相当于让此属性对外部“只读”。\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"u1 = Unit(\\\"u1\\\", 100, 20)\\nprint(u1.get_hp())  # 100\\nprint(u1.__hp)  # AttributeError: 'Unit' object has no attribute '__hp'\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":null},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"u1 \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e Unit\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token string\\\"\u003e\\\"u1\\\"\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e \u003cspan class=\\\"token number\\\"\u003e100\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e \u003cspan class=\\\"token number\\\"\u003e20\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\\n\u003cspan class=\\\"token keyword\\\"\u003eprint\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eu1\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003eget_hp\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e  \u003cspan class=\\\"token comment\\\"\u003e# 100\u003c/span\u003e\\n\u003cspan class=\\\"token keyword\\\"\u003eprint\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eu1\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e__hp\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e  \u003cspan class=\\\"token comment\\\"\u003e# AttributeError: 'Unit' object has no attribute '__hp'\u003c/span\u003e\\n\"}}]}]]}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"通过\u003ccode class=\\\"x-inline-highlight\\\"\u003e_类名__属性名\u003c/code\u003e的形式可以强制访问私有属性：\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"print(u1._Unit__hp)  # 100\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":null},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"token keyword\\\"\u003eprint\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eu1\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e_Unit__hp\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e  \u003cspan class=\\\"token comment\\\"\u003e# 100\u003c/span\u003e\"}}]}]]}],[\"$\",\"div\",null,{\"className\":\"x-highlightblock highlight-background-golden\",\"children\":[[\"$\",\"h4\",null,{\"className\":\"x-h3\",\"children\":\"注意\"}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"在类外绑定的双下划线变量是公有的。\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"u1.__var = 1\\nprint(u1.__var)  # 1\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":null},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"u1\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e__var \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token number\\\"\u003e1\u003c/span\u003e\\n\u003cspan class=\\\"token keyword\\\"\u003eprint\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eu1\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e__var\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e  \u003cspan class=\\\"token comment\\\"\u003e# 1\u003c/span\u003e\\n\"}}]}]]}]]}],[\"$\",\"h3\",null,{\"className\":\"x-h2\",\"children\":\"类比于C++\"}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"C++中的封装有三种：\u003ccode class=\\\"x-inline-highlight\\\"\u003epublic\u003c/code\u003e、\u003ccode class=\\\"x-inline-highlight\\\"\u003eprotected\u003c/code\u003e、\u003ccode class=\\\"x-inline-highlight\\\"\u003eprivate\u003c/code\u003e；Python中没有这些关键字，但是可以通过属性名命名约定来实现。\"}}],[\"$\",\"div\",null,{\"className\":\"x-uli\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-uli-marker\",\"children\":[\"$\",\"div\",null,{\"className\":\"x-uli-marker-dot\"}]}],[\"$\",\"div\",null,{\"className\":\"x-uli-content-wrapper\",\"children\":[\"$\",\"p\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003ccode class=\\\"x-inline-highlight\\\"\u003epublic\u003c/code\u003e：公有变量，可以在\u003cspan class=\\\"x-inline-strong\\\"\u003e类的内部和外部\u003c/span\u003e访问，正常命名即可。\"}}]}]]}],[\"$\",\"div\",null,{\"className\":\"x-uli\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-uli-marker\",\"children\":[\"$\",\"div\",null,{\"className\":\"x-uli-marker-dot\"}]}],[\"$\",\"div\",null,{\"className\":\"x-uli-content-wrapper\",\"children\":[\"$\",\"p\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003ccode class=\\\"x-inline-highlight\\\"\u003eprotected\u003c/code\u003e：保护变量，只能在\u003cspan class=\\\"x-inline-strong\\\"\u003e类内和子类\u003c/span\u003e访问，属性名前加单下划线\u003ccode class=\\\"x-inline-highlight\\\"\u003e_\u003c/code\u003e。这只是一种命名约定，实际上是可以访问的。\"}}]}]]}],[\"$\",\"div\",null,{\"className\":\"x-uli\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-uli-marker\",\"children\":[\"$\",\"div\",null,{\"className\":\"x-uli-marker-dot\"}]}],[\"$\",\"div\",null,{\"className\":\"x-uli-content-wrapper\",\"children\":[\"$\",\"p\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003ccode class=\\\"x-inline-highlight\\\"\u003eprivate\u003c/code\u003e：私有变量，只能在\u003cspan class=\\\"x-inline-strong\\\"\u003e类的内部\u003c/span\u003e访问，属性名前加双下划线\u003ccode class=\\\"x-inline-highlight\\\"\u003e__\u003c/code\u003e，这样会使Python解释器修改变量名为\u003ccode class=\\\"x-inline-highlight\\\"\u003e_类名__属性名\u003c/code\u003e的形式。\"}}]}]]}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"class A:\\n    def __init__(self, x, y, z):\\n        # 公有变量\\n        self.x = x\\n        # 保护变量\\n        self._y = y\\n        # 私有变量\\n        self.__z = z\\n\\nclass B(A):\\n    def __init__(self, x, y, z):\\n        super().__init__(x, y, z)\\n\\n    def info_x(self):\\n        print(f\\\"x: {self.x}\\\")\\n\\n    def info_y(self):\\n        print(f\\\"y: {self._y}\\\")\\n\\n    def info_z(self):\\n        print(f\\\"z: {self.__z}\\\")\\n\\nb = B(1, 2, 3)\\nb.info_x()  # x: 1\\nb.info_y()  # y: 2\\nb.info_z()  # AttributeError: 'B' object has no attribute '_B__z'. Did you mean: '_A__z'?\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":null},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$21\"}}]}]]}],[\"$\",\"div\",null,{\"className\":\"x-highlightblock highlight-background-golden\",\"children\":[[\"$\",\"h4\",null,{\"className\":\"x-h3\",\"children\":\"注意\"}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"C++中的\u003ccode class=\\\"x-inline-highlight\\\"\u003eprotected\u003c/code\u003e关键字是一种严格的访问控制机制，而Python中的单下划线变量只是一种命名约定，不具有强制性，实际上是可以访问的。只不过有时违反了这样的约定时，有些代码编辑器会给出警告。\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"print(b._y)  # 2\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":null},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"token keyword\\\"\u003eprint\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eb\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e_y\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e  \u003cspan class=\\\"token comment\\\"\u003e# 2\u003c/span\u003e\"}}]}]]}]]}],[\"$\",\"h2\",null,{\"className\":\"x-h1\",\"children\":\"多态\"}],[\"$\",\"h3\",null,{\"className\":\"x-h2\",\"children\":\"举个例子\"}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"多态是当一个类继承自另一个类并重写了其方法时，可以在不改变原有接口的情况下，根据对象的实际类型来调用不同的方法实现。这听起来有些复杂，我们来举一个具体的例子：\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"class Unit:\\n    def __init__(self, name, hp, damage):\\n        self.name = name\\n        self.hp = hp\\n        self.damage = damage\\n\\n    def info(self):\\n        print(f\\\"name: {self.name}, hp: {self.hp}, damage: {self.damage}\\\")\\n\\nclass GroundUnit(Unit):\\n    def info(self):\\n        print(\\\"This is a ground unit.\\\")\\n\\nclass AirUnit(Unit):\\n    def info(self):\\n        print(\\\"This is an air unit.\\\")\\n\\ndef show_info(unit):\\n    unit.info()\\n\\ngu1 = GroundUnit(\\\"gu1\\\", 100, 20)\\nau1 = AirUnit(\\\"au1\\\", 100, 20)\\nshow_info(gu1)  # This is a ground unit.\\nshow_info(au1)  # This is an air unit.\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":null},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$22\"}}]}]]}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"这个例子中，\u003ccode class=\\\"x-inline-highlight\\\"\u003eshow_info\u003c/code\u003e函数接受一个\u003ccode class=\\\"x-inline-highlight\\\"\u003eUnit\u003c/code\u003e类型的参数，但是我们传入的是其子类\u003ccode class=\\\"x-inline-highlight\\\"\u003eGroundUnit\u003c/code\u003e和\u003ccode class=\\\"x-inline-highlight\\\"\u003eAirUnit\u003c/code\u003e类型的实例。子类重写了父类的\u003ccode class=\\\"x-inline-highlight\\\"\u003einfo\u003c/code\u003e方法，相当于共用了父类的接口，但是子类又通过继承重写了接口，从而实现了不同的功能。\"}}],[\"$\",\"h3\",null,{\"className\":\"x-h2\",\"children\":\"通过抽象类实现多态\"}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"x-inline-strong\\\"\u003e抽象类\u003c/span\u003e是指包含\u003cspan class=\\\"x-inline-strong\\\"\u003e抽象方法\u003c/span\u003e的类；抽象类只能被继承，不能被实例化。\u003cbr/\u003e抽象方法是指只有声明，没有实现的方法，它存在的意义是让子类重写这个方法。\"}}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"上面的例子中，如果我们将\u003ccode class=\\\"x-inline-highlight\\\"\u003eUnit\u003c/code\u003e类的\u003ccode class=\\\"x-inline-highlight\\\"\u003einfo\u003c/code\u003e方法定义为：\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"class Unit:\\n    def __init__(self, name, hp, damage):\\n        self.name = name\\n        self.hp = hp\\n        self.damage = damage\\n\\n    # 这是一个抽象方法，子类必须重写这个方法，否则在调用时会报错\\n    def info(self):\\n        raise NotImplementedError(\\\"Subclasses must implement abstract method.\\\")\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":\"linear-gradient(180deg, transparent 192px, var(--bg-transparent-golden) 192px 240px, transparent 240px)\"},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$23\"}}]}]]}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"这时子类如果没有重写\u003ccode class=\\\"x-inline-highlight\\\"\u003einfo\u003c/code\u003e方法，就会继承父类中的方法，在调用的时候就会报错。\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"class UnitWithoutInfo(Unit):\\n    pass\\n\\nu = UnitWithoutInfo(\\\"u\\\", 100, 20)\\nu.info()  # NotImplementedError: Subclasses must implement abstract method.\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":null},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"token keyword\\\"\u003eclass\u003c/span\u003e \u003cspan class=\\\"token class-name\\\"\u003eUnitWithoutInfo\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eUnit\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e:\u003c/span\u003e\\n    \u003cspan class=\\\"token keyword\\\"\u003epass\u003c/span\u003e\\n\\nu \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e UnitWithoutInfo\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token string\\\"\u003e\\\"u\\\"\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e \u003cspan class=\\\"token number\\\"\u003e100\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e \u003cspan class=\\\"token number\\\"\u003e20\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\\nu\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003einfo\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e  \u003cspan class=\\\"token comment\\\"\u003e# NotImplementedError: Subclasses must implement abstract method.\u003c/span\u003e\\n\"}}]}]]}],[\"$\",\"h3\",null,{\"className\":\"x-h2\",\"children\":\"Python中的abc模块\"}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"Python的\u003ccode class=\\\"x-inline-highlight\\\"\u003eabc\u003c/code\u003e模块中定义了\u003cspan class=\\\"x-inline-strong\\\"\u003e抽象基类\u003c/span\u003e\u003ccode class=\\\"x-inline-highlight\\\"\u003eABC (Abstract Base Classes)\u003c/code\u003e，可以强制其子类必须实现某些方法。\"}}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"上面的例子使用\u003ccode class=\\\"x-inline-highlight\\\"\u003eabc\u003c/code\u003e模块可以改写为：\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"from abc import ABC, abstractmethod\\n\\nclass Unit(ABC):\\n    def __init__(self, name, hp, damage):\\n        self.name = name\\n        self.hp = hp\\n        self.damage = damage\\n\\n    @abstractmethod\\n    def info(self):\\n        pass\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":\"linear-gradient(180deg, transparent 24px, var(--bg-transparent-golden) 24px 48px, transparent 48px, transparent 72px, var(--bg-transparent-golden) 72px 96px, transparent 96px, transparent 216px, var(--bg-transparent-golden) 216px 288px, transparent 288px)\"},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$24\"}}]}]]}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"这时子类如果没有重写\u003ccode class=\\\"x-inline-highlight\\\"\u003einfo\u003c/code\u003e方法，在实例化时就会报错！\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"class UnitWithoutInfo(Unit):\\n    pass\\n\\n# 在实例化时就会报错\\nu = UnitWithoutInfo(\\\"u\\\", 100, 20)  # TypeError: Can't instantiate abstract class UnitWithoutInfo with abstract method info\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":null},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"token keyword\\\"\u003eclass\u003c/span\u003e \u003cspan class=\\\"token class-name\\\"\u003eUnitWithoutInfo\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eUnit\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e:\u003c/span\u003e\\n    \u003cspan class=\\\"token keyword\\\"\u003epass\u003c/span\u003e\\n\\n\u003cspan class=\\\"token comment\\\"\u003e# 在实例化时就会报错\u003c/span\u003e\\nu \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e UnitWithoutInfo\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token string\\\"\u003e\\\"u\\\"\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e \u003cspan class=\\\"token number\\\"\u003e100\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e \u003cspan class=\\\"token number\\\"\u003e20\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e  \u003cspan class=\\\"token comment\\\"\u003e# TypeError: Can't instantiate abstract class UnitWithoutInfo with abstract method info\u003c/span\u003e\\n\"}}]}]]}],[\"$\",\"h2\",null,{\"className\":\"x-h1\",\"children\":\"三大方法\"}],[\"$\",\"h3\",null,{\"className\":\"x-h2\",\"children\":\"类方法\"}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"类方法用修饰器\u003ccode class=\\\"x-inline-highlight\\\"\u003e@classmethod\u003c/code\u003e定义，传入的第一个参数是类本身而不是实例，通常命名为\u003ccode class=\\\"x-inline-highlight\\\"\u003ecls\u003c/code\u003e。通过它可以访问到类属性。\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"class Unit:\\n    utype = \\\"unit\\\"\\n\\n    def __init__(self, name, hp, damage):\\n        self.name = name\\n        self.hp = hp\\n        self.damage = damage\\n\\n    @classmethod\\n    def show_type(cls):\\n        # 可以访问到类属性\\n        print(f\\\"This is a {cls.utype}.\\\")\\n\\nu1 = Unit(\\\"u1\\\", 100, 20)\\nu1.show_type()  # This is a unit.\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":\"linear-gradient(180deg, transparent 216px, var(--bg-transparent-golden) 216px 312px, transparent 312px)\"},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$25\"}}]}]]}],[\"$\",\"h4\",null,{\"className\":\"x-h3\",\"children\":\"类方法的应用：自动计算实例数\"}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"假如我们希望每创建一个类时，都可以自动计数当前类的实例数量。这个功能可以由类方法实现。\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"class Unit:\\n    type = \\\"unit\\\"\\n    __unit_num = 0  # 声明为私有类属性\\n\\n    def __init__(self, name, hp, damage):\\n        self.name = name\\n        self.hp = hp\\n        self.damage = damage\\n        self.add_unit_num()\\n\\n    @classmethod\\n    def add_unit_num(cls):\\n        cls.__unit_num += 1\\n\\n    @classmethod\\n    def get_unit_num(cls):\\n        return cls.__unit_num\\n\\nu1 = Unit(\\\"u1\\\", 100, 20)\\nu2 = Unit(\\\"u2\\\", 200, 10)\\nprint(u1.get_unit_num())  # 2\\nprint(u2.get_unit_num())  # 2\\n\\nu3 = Unit(\\\"u3\\\", 300, 30)\\nprint(u3.get_unit_num())  # 3\\nprint(Unit.get_unit_num())  # 3\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":\"linear-gradient(180deg, transparent 216px, var(--bg-transparent-golden) 216px 240px, transparent 240px)\"},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$26\"}}]}]]}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"我们在\u003ccode class=\\\"x-inline-highlight\\\"\u003e__init__\u003c/code\u003e方法中调用一次类方法\u003ccode class=\\\"x-inline-highlight\\\"\u003eadd_unit_num()\u003c/code\u003e，就可以把总实例数统计到类属性\u003ccode class=\\\"x-inline-highlight\\\"\u003e__unit_num\u003c/code\u003e中。\"}}],[\"$\",\"h3\",null,{\"className\":\"x-h2\",\"children\":\"静态方法\"}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"静态方法用修饰器\u003ccode class=\\\"x-inline-highlight\\\"\u003e@staticmethod\u003c/code\u003e定义。静态方法不能访问类属性，也不能访问实例属性。静态方法可以在类的命名空间内定义一些功能性代码，通常用于实现一些与类相关的工具函数。\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"class Unit:\\n    type = \\\"unit\\\"\\n\\n    def __init__(self, name, hp, damage):\\n        self.name = name\\n        self.hp = hp\\n        self.damage = damage\\n\\n    @staticmethod\\n    def calc_hp_after_attack(hp, damage):  # 没有隐式的第一参数\\n        return hp - damage\\n\\nu1 = Unit(\\\"u1\\\", 100, 20)\\nu2 = Unit(\\\"u2\\\", 200, 10)\\nprint(u1.calc_hp_after_attack(u1.hp, u2.damage))  # 90\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":\"linear-gradient(180deg, transparent 216px, var(--bg-transparent-golden) 216px 288px, transparent 288px)\"},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$27\"}}]}]]}],[\"$\",\"h3\",null,{\"className\":\"x-h2\",\"children\":\"属性方法\"}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"属性方法以方法的形式定义，但是可以像属性一样进行访问，其作用是支持对属性的灵活操作。\"}}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"属性方法相当于允许更细致的设置一个属性的\u003cspan class=\\\"x-inline-strong\\\"\u003e访问\u003c/span\u003e、\u003cspan class=\\\"x-inline-strong\\\"\u003e更改\u003c/span\u003e、\u003cspan class=\\\"x-inline-strong\\\"\u003e删除\u003c/span\u003e操作，具体的做法是：实现属性的\u003ccode class=\\\"x-inline-highlight\\\"\u003egetter\u003c/code\u003e、\u003ccode class=\\\"x-inline-highlight\\\"\u003esetter\u003c/code\u003e、\u003ccode class=\\\"x-inline-highlight\\\"\u003edeleter\u003c/code\u003e方法。\"}}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"假设我们有这样的需求：定义一个\u003ccode class=\\\"x-inline-highlight\\\"\u003eCircle\u003c/code\u003e类，它具有直径\u003ccode class=\\\"x-inline-highlight\\\"\u003ediameter\u003c/code\u003e和半径\u003ccode class=\\\"x-inline-highlight\\\"\u003eradius\u003c/code\u003e两个属性。我们希望修改其中一个属性时，另外一个属性也随之变化。也就是：\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"circle = Circle(5)\\nprint(circle.radius)  # 5\\nprint(circle.diameter)  # 10\\n\\ncircle.diameter = 14\\nprint(circle.radius)  # 7.0\\n\\ncircle.radius = 12\\nprint(circle.diameter)  # 24\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":null},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$28\"}}]}]]}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"用此前的知识似乎无法实现这样的功能，但属性方法可以解决：\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"class Circle:\\n    def __init__(self, radius):\\n        self.__radius = radius\\n        self.__diameter = 2 * radius\\n\\n    # 属性的getter方法\\n    @property\\n    def radius(self):\\n        return self.__radius\\n\\n    # 属性的setter方法\\n    @radius.setter\\n    def radius(self, value):\\n        self.__radius = value\\n        self.__diameter = value * 2\\n\\n    @property\\n    def diameter(self):\\n        return self.__diameter\\n\\n    @diameter.setter\\n    def diameter(self, value):\\n        self.__diameter = value\\n        self.__radius = value * 0.5\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":null},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$29\"}}]}]]}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"将访问、修改属性的操作定义为函数，就允许了我们除了获取、修改变量本身之外，还可以做一些其他的手脚。\"}}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"上面的例子没有体现属性的\u003ccode class=\\\"x-inline-highlight\\\"\u003edeleter\u003c/code\u003e方法。它的一般实现可以是：\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"class Circle:\\n    ...\\n\\n    # 属性的deleter方法\\n    @radius.deleter\\n    def radius(self):\\n        print(\\\"delete radius\\\")\\n        del self.__radius\\n\\n    @diameter.deleter\\n    def diameter(self):\\n        print(\\\"delete diameter\\\")\\n        del self.__diameter\\n\\ndel circle.diameter  # delete diameter\\n# print(circle.diameter)  # AttributeError: 'Circle' object has no attribute '_Circle__diameter'\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":null},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$2a\"}}]}]]}],[\"$\",\"h2\",null,{\"className\":\"x-h1\",\"children\":\"反射\"}],[\"$\",\"h3\",null,{\"className\":\"x-h2\",\"children\":\"Python中的反射\"}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"在计算机科学中\u003cspan class=\\\"x-inline-strong\\\"\u003e反射\u003c/span\u003e\u003ccode class=\\\"x-inline-highlight\\\"\u003e(reflection)\u003c/code\u003e是指计算机程序在运行时可以检查、访问、和修改它本身状态或行为的一种能力。表现在Python面向对象编程中有四个内置函数：\u003ccode class=\\\"x-inline-highlight\\\"\u003egetattr()\u003c/code\u003e、\u003ccode class=\\\"x-inline-highlight\\\"\u003esetattr()\u003c/code\u003e、\u003ccode class=\\\"x-inline-highlight\\\"\u003ehasattr()\u003c/code\u003e和\u003ccode class=\\\"x-inline-highlight\\\"\u003edelattr()\u003c/code\u003e，可以通过字符串的形式操作对象的属性和方法。\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"class A:\\n    def __init__(self, x, y, z):\\n        self.x = x\\n        self.y = y\\n        self.z = z\\n\\n    def info_x(self):\\n        print(f\\\"x: {self.x}\\\")\\n\\n    def info_y(self):\\n        print(f\\\"y: {self.y}\\\")\\n\\n    def info_z(self):\\n        print(f\\\"z: {self.z}\\\")\\n\\na = A(10, 20, 30)\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":null},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$2b\"}}]}]]}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003ccode class=\\\"x-inline-highlight\\\"\u003ehasattr()\u003c/code\u003e函数用于判断对象是否包含对应的属性或方法：\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"print(hasattr(a, \\\"x\\\"))  # True\\nprint(hasattr(a, \\\"info_x\\\"))  # True\\nprint(hasattr(a, \\\"info_w\\\"))  # False\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":null},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$2c\"}}]}]]}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003ccode class=\\\"x-inline-highlight\\\"\u003egetattr()\u003c/code\u003e函数用于获取对象的属性或方法：\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"print(getattr(a, \\\"x\\\"))  # 10\\ninfo_x = getattr(a, \\\"info_x\\\")\\ninfo_x()  # x: 10\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":null},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"token keyword\\\"\u003eprint\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token builtin\\\"\u003egetattr\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003ea\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e\\\"x\\\"\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e  \u003cspan class=\\\"token comment\\\"\u003e# 10\u003c/span\u003e\\ninfo_x \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token builtin\\\"\u003egetattr\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003ea\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e\\\"info_x\\\"\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\\ninfo_x\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e  \u003cspan class=\\\"token comment\\\"\u003e# x: 10\u003c/span\u003e\\n\"}}]}]]}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003ccode class=\\\"x-inline-highlight\\\"\u003esetattr()\u003c/code\u003e函数用于设置对象的属性或方法：\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"setattr(a, \\\"x\\\", 100)\\nprint(getattr(a, \\\"x\\\"))  # 100\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":null},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"token builtin\\\"\u003esetattr\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003ea\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e\\\"x\\\"\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e \u003cspan class=\\\"token number\\\"\u003e100\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\\n\u003cspan class=\\\"token keyword\\\"\u003eprint\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token builtin\\\"\u003egetattr\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003ea\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e\\\"x\\\"\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e  \u003cspan class=\\\"token comment\\\"\u003e# 100\u003c/span\u003e\\n\"}}]}]]}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003ccode class=\\\"x-inline-highlight\\\"\u003edelattr()\u003c/code\u003e函数用于删除对象的属性或方法：\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"delattr(a, \\\"y\\\")\\nprint(getattr(a, \\\"y\\\"))  # AttributeError: 'A' object has no attribute 'y'\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":null},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"token builtin\\\"\u003edelattr\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003ea\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e\\\"y\\\"\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\\n\u003cspan class=\\\"token keyword\\\"\u003eprint\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token builtin\\\"\u003egetattr\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003ea\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e\\\"y\\\"\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e  \u003cspan class=\\\"token comment\\\"\u003e# AttributeError: 'A' object has no attribute 'y'\u003c/span\u003e\\n\"}}]}]]}],[\"$\",\"h3\",null,{\"className\":\"x-h2\",\"children\":\"反射的应用\"}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"假如我们现在想创建一个类\u003ccode class=\\\"x-inline-highlight\\\"\u003eA2Z\u003c/code\u003e，它具有\u003ccode class=\\\"x-inline-highlight\\\"\u003ea\u003c/code\u003e-\u003ccode class=\\\"x-inline-highlight\\\"\u003ez\u003c/code\u003e\u003ccode class=\\\"x-inline-highlight\\\"\u003e26\u003c/code\u003e个属性与\u003ccode class=\\\"x-inline-highlight\\\"\u003einfo_a()\u003c/code\u003e到\u003ccode class=\\\"x-inline-highlight\\\"\u003einfo_z()\u003c/code\u003e\u003ccode class=\\\"x-inline-highlight\\\"\u003e26\u003c/code\u003e个方法，手动创建这些属性和方法是非常繁琐的。这时我们可以利用反射来动态的创建它们：\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"a_to_z = \\\"abcdefghijklmnopqrstuvwxyz\\\"\\n\\nclass A2Z:\\n    pass\\n\\na2z = A2Z()\\n\\nfor ch in a_to_z:\\n    # 动态的创建属性\\n    setattr(a2z, ch, ord(ch) - ord('a') + 1)\\n\\n    # 动态的创建方法\\n    def info_ch():\\n        print(f\\\"{ch}: {getattr(a2z, ch)}\\\")\\n\\n    setattr(a2z, f\\\"info_{ch}\\\", info_ch)\\n\\nprint(a2z.d)  # 4\\na2z.info_z()  # z: 26\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":\"linear-gradient(180deg, transparent 240px, var(--bg-transparent-golden) 240px 264px, transparent 264px, transparent 384px, var(--bg-transparent-golden) 384px 408px, transparent 408px)\"},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$2d\"}}]}]]}],[\"$\",\"h2\",null,{\"className\":\"x-h1\",\"children\":\"魔术方法\"}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"魔术方法通常以双下划线包围，用于实现类的特殊行为。下面以一个\u003ccode class=\\\"x-inline-highlight\\\"\u003eVector3d\u003c/code\u003e类为例，介绍一些常用的魔术方法。\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"class Vector3d:\\n    def __init__(self, x, y, z):\\n        self.x = x\\n        self.y = y\\n        self.z = z\\n\\nv1 = Vector3d(3, 4, 5)\\nv2 = Vector3d(1, 2, 3)\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":null},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$2e\"}}]}]]}],[\"$\",\"h3\",null,{\"className\":\"x-h2\",\"children\":\"__len__\"}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003ccode class=\\\"x-inline-highlight\\\"\u003elen(obj)\u003c/code\u003e时调用。\u003ccode class=\\\"x-inline-highlight\\\"\u003e__len__\u003c/code\u003e方法的返回值只能是整数。\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"class Vector3d:\\n    ...\\n\\n    def __len__(self):\\n        return 3\\n\\nprint(len(v1))  # 3\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":null},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"token keyword\\\"\u003eclass\u003c/span\u003e \u003cspan class=\\\"token class-name\\\"\u003eVector3d\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e:\u003c/span\u003e\\n    \u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\\n\\n    \u003cspan class=\\\"token keyword\\\"\u003edef\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003e__len__\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eself\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e:\u003c/span\u003e\\n        \u003cspan class=\\\"token keyword\\\"\u003ereturn\u003c/span\u003e \u003cspan class=\\\"token number\\\"\u003e3\u003c/span\u003e\\n\\n\u003cspan class=\\\"token keyword\\\"\u003eprint\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token builtin\\\"\u003elen\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003ev1\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e  \u003cspan class=\\\"token comment\\\"\u003e# 3\u003c/span\u003e\\n\"}}]}]]}],[\"$\",\"h3\",null,{\"className\":\"x-h2\",\"children\":\"__repr__和__str__\"}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003ccode class=\\\"x-inline-highlight\\\"\u003e__repr__\u003c/code\u003e方法的返回值应该是一个\u003cspan class=\\\"x-inline-strong\\\"\u003e可以用来重新创建对象\u003c/span\u003e的字符串。\u003cbr/\u003e\u003ccode class=\\\"x-inline-highlight\\\"\u003e__str__\u003c/code\u003e方法在\u003ccode class=\\\"x-inline-highlight\\\"\u003estr(obj)\u003c/code\u003e时调用，应当返回实例格式良好、可读性强的字符串表示。\"}}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"在\u003ccode class=\\\"x-inline-highlight\\\"\u003eprint(obj)\u003c/code\u003e时会优先使用\u003ccode class=\\\"x-inline-highlight\\\"\u003e__str__\u003c/code\u003e方法的返回值，如果没有定义\u003ccode class=\\\"x-inline-highlight\\\"\u003e__str__\u003c/code\u003e方法，则会使用\u003ccode class=\\\"x-inline-highlight\\\"\u003e__repr__\u003c/code\u003e方法。\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"class Vector3d:\\n    ...\\n\\n    def __repr__(self):\\n    return f\\\"Vector3d({self.x}, {self.y}, {self.z})\\\"\\n\\n    def __str__(self):\\n        return f\\\"({self.x}, {self.y}, {self.z})\\\"\\n\\nprint(str(v1))  # (3, 4, 5)\\nprint(repr(v1))  # Vector3d(3, 4, 5)\\n# 会优先调用__str__方法\\nprint(v1)  # (3, 4, 5)\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":null},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$2f\"}}]}]]}],[\"$\",\"h3\",null,{\"className\":\"x-h2\",\"children\":\"__call__\"}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003ccode class=\\\"x-inline-highlight\\\"\u003e__call__\u003c/code\u003e方法使得实例可以像函数一样被调用。\"}}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"这个例子中我们约定，调用\u003ccode class=\\\"x-inline-highlight\\\"\u003eobj(x, y, z)\u003c/code\u003e时设置向量的\u003ccode class=\\\"x-inline-highlight\\\"\u003ex\u003c/code\u003e，\u003ccode class=\\\"x-inline-highlight\\\"\u003ey\u003c/code\u003e，\u003ccode class=\\\"x-inline-highlight\\\"\u003ez\u003c/code\u003e分量。\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"class Vector3d:\\n    ...\\n\\n    def __call__(self, x, y, z):\\n        self.x = x\\n        self.y = y\\n        self.z = z\\n\\nv2(2, -2, 1)\\nprint(v2)  # (2, -2, 1)\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":null},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$30\"}}]}]]}],[\"$\",\"h3\",null,{\"className\":\"x-h2\",\"children\":\"运算符重载\"}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"我们为\u003ccode class=\\\"x-inline-highlight\\\"\u003eVector3d\u003c/code\u003e类定义加法、减法、乘法操作。这个例子中我们约定，加减法就是普通的按元素加减，而乘法满足：\"}}],[\"$\",\"div\",null,{\"className\":\"x-uli\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-uli-marker\",\"children\":[\"$\",\"div\",null,{\"className\":\"x-uli-marker-dot\"}]}],[\"$\",\"div\",null,{\"className\":\"x-uli-content-wrapper\",\"children\":[\"$\",\"p\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003ccode class=\\\"x-inline-highlight\\\"\u003eobj*常数\u003c/code\u003e时返回缩放后的向量\"}}]}]]}],[\"$\",\"div\",null,{\"className\":\"x-uli\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-uli-marker\",\"children\":[\"$\",\"div\",null,{\"className\":\"x-uli-marker-dot\"}]}],[\"$\",\"div\",null,{\"className\":\"x-uli-content-wrapper\",\"children\":[\"$\",\"p\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003ccode class=\\\"x-inline-highlight\\\"\u003eobj1*obj2\u003c/code\u003e时返回点乘数值\"}}]}]]}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"class Vector3d:\\n    ...\\n\\n    # 重载加号运算符，obj1+obj2时调用\\n    def __add__(self, other):\\n        return Vector3d(self.x + other.x, self.y + other.y, self.z + other.z)\\n\\n    # 重载减号运算符，obj1-obj2时调用\\n    def __sub__(self, other):\\n        return Vector3d(self.x - other.x, self.y - other.y, self.z - other.z)\\n\\n    # 重载乘号运算符\\n    def __mul__(self, other):\\n        if isinstance(other, (int, float)):\\n            return Vector3d(self.x * other, self.y * other, self.z * other)\\n        else:\\n            return self.x * other.x + self.y * other.y + self.z * other.z\\n\\nprint(v1)  # (3, 4, 5)\\nprint(v2)  # (2, -2, 1)\\nprint(v1 + v2)  # (5, 2, 6)\\nprint(v1 - v2)  # (1, 6, 4)\\nprint(v1 * v2)  # 3\\nprint(v1 * 2)  # (6, 8, 10)\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":null},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$31\"}}]}]]}],[\"$\",\"h3\",null,{\"className\":\"x-h2\",\"children\":\"反运算（右侧运算）\"}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"如果只有上述运算符重载，下面的代码会报错：\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"print(2 * v1)  # TypeError: unsupported operand type(s) for *: 'int' and 'Vector3d'\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":null},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"token keyword\\\"\u003eprint\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token number\\\"\u003e2\u003c/span\u003e \u003cspan class=\\\"token operator\\\"\u003e*\u003c/span\u003e v1\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e  \u003cspan class=\\\"token comment\\\"\u003e# TypeError: unsupported operand type(s) for *: 'int' and 'Vector3d'\u003c/span\u003e\"}}]}]]}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"这是因为整数类型的乘法不适用。解决这个问题需要定义\u003ccode class=\\\"x-inline-highlight\\\"\u003eVector3d\u003c/code\u003e类的右侧乘法\u003ccode class=\\\"x-inline-highlight\\\"\u003e__rmul__\u003c/code\u003e：\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"class Vector3d:\\n    ...\\n\\n    def __rmul__(self, other):\\n        return self.__mul__(other)\\n\\nprint(2 * v1)  # (6, 8, 10)\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":null},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"\u003cspan class=\\\"token keyword\\\"\u003eclass\u003c/span\u003e \u003cspan class=\\\"token class-name\\\"\u003eVector3d\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e:\u003c/span\u003e\\n    \u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\\n\\n    \u003cspan class=\\\"token keyword\\\"\u003edef\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003e__rmul__\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eself\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e other\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e:\u003c/span\u003e\\n        \u003cspan class=\\\"token keyword\\\"\u003ereturn\u003c/span\u003e self\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e__mul__\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eother\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\\n\\n\u003cspan class=\\\"token keyword\\\"\u003eprint\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token number\\\"\u003e2\u003c/span\u003e \u003cspan class=\\\"token operator\\\"\u003e*\u003c/span\u003e v1\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e  \u003cspan class=\\\"token comment\\\"\u003e# (6, 8, 10)\u003c/span\u003e\\n\"}}]}]]}],[\"$\",\"h3\",null,{\"className\":\"x-h2\",\"children\":\"__getitem__和__setitem__\"}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003ccode class=\\\"x-inline-highlight\\\"\u003e__getitem__\u003c/code\u003e在取\u003ccode class=\\\"x-inline-highlight\\\"\u003eobj[key]\u003c/code\u003e时调用，这个例子中我们约定\u003ccode class=\\\"x-inline-highlight\\\"\u003eobj[key]\u003c/code\u003e返回向量第\u003ccode class=\\\"x-inline-highlight\\\"\u003ei\u003c/code\u003e个分量；\"}}],[\"$\",\"p\",null,{\"className\":\"x-p\",\"dangerouslySetInnerHTML\":{\"__html\":\"\u003ccode class=\\\"x-inline-highlight\\\"\u003e__setitem__\u003c/code\u003e在设置\u003ccode class=\\\"x-inline-highlight\\\"\u003eobj[key]=value\u003c/code\u003e时调用，这个例子中我们约定\u003ccode class=\\\"x-inline-highlight\\\"\u003eobj[key]=value\u003c/code\u003e设置向量第\u003ccode class=\\\"x-inline-highlight\\\"\u003ei\u003c/code\u003e个分量。\"}}],[\"$\",\"div\",null,{\"className\":\"x-codeblock\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header\",\"children\":[[\"$\",\"div\",null,{\"className\":\"x-codeblock-header-language\",\"children\":\"Python\"}],[\"$\",\"$L14\",null,{\"className\":\"x-codeblock-header-copy\",\"text\":\"class Vector3d:\\n    ...\\n\\n    def __getitem__(self, key):\\n    if key == 0:\\n        return self.x\\n    elif key == 1:\\n        return self.y\\n    elif key == 2:\\n        return self.z\\n    else:\\n        raise IndexError(f\\\"index out of range: {key}\\\")\\n\\n    def __setitem__(self, key, value):\\n        if key == 0:\\n            self.x = value\\n        elif key == 1:\\n            self.y = value\\n        elif key == 2:\\n            self.z = value\\n        else:\\n            raise IndexError(f\\\"index out of range: {key}\\\")\\n\\nprint(v1[0], v1[1], v1[2])  # 18 -24 15\\nv1[0] = 2\\nprint(v1)  # (2, -24, 15)\\n\"}]]}],[\"$\",\"pre\",null,{\"style\":{\"background\":null},\"children\":[\"$\",\"code\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"$32\"}}]}]]}]]\n"])</script><script>self.__next_f.push([1,"11:[[\"$\",\"meta\",\"0\",{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],[\"$\",\"meta\",\"1\",{\"charSet\":\"utf-8\"}],[\"$\",\"title\",\"2\",{\"children\":\"Python面向对象编程 - 铃木的网络日记\"}],[\"$\",\"link\",\"3\",{\"rel\":\"canonical\",\"href\":\"https://1kuzus.github.io/24a/object-oriented-programming-python/\"}]]\n5:null\n"])</script><script>self.__next_f.push([1,""])</script></body></html>