1:HL["/_next/static/css/8ac0b0e7f508d966.css","style",{"crossOrigin":""}]
0:["aCGhGRfB6AbKUEnvQWAtS",[[["",{"children":["(blogs)",{"children":["24a",{"children":["git-merge-allow-unrelated-histories",{"children":["__PAGE__",{}]}]}]}]},"$undefined","$undefined",true],"$L2",[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/8ac0b0e7f508d966.css","precedence":"next","crossOrigin":""}]],"$L3"]]]]
4:HL["/_next/static/css/c84b60895b980f14.css","style",{"crossOrigin":""}]
5:HL["/_next/static/css/f70c26425a044d6b.css","style",{"crossOrigin":""}]
6:I[9226,["185","static/chunks/app/layout-e12e822557cc964c.js"],"GlobalProvider"]
7:I[9330,["185","static/chunks/app/layout-e12e822557cc964c.js"],""]
8:I[6954,[],""]
9:I[7264,[],""]
a:I[5285,["176","static/chunks/176-6509553bec92a789.js","135","static/chunks/app/(blogs)/layout-75f88dfdcbd0ba18.js"],""]
c:I[4484,["954","static/chunks/d3ac728e-1e5d8b71e3d43fec.js","202","static/chunks/202-7b9f876bcb1bf7b4.js","611","static/chunks/app/(blogs)/24a/git-merge-allow-unrelated-histories/page-a8a0e408b7e17dc3.js"],"Title"]
d:I[4484,["954","static/chunks/d3ac728e-1e5d8b71e3d43fec.js","202","static/chunks/202-7b9f876bcb1bf7b4.js","611","static/chunks/app/(blogs)/24a/git-merge-allow-unrelated-histories/page-a8a0e408b7e17dc3.js"],"H1"]
e:I[8411,["954","static/chunks/d3ac728e-1e5d8b71e3d43fec.js","202","static/chunks/202-7b9f876bcb1bf7b4.js","611","static/chunks/app/(blogs)/24a/git-merge-allow-unrelated-histories/page-a8a0e408b7e17dc3.js"],""]
f:I[9708,["954","static/chunks/d3ac728e-1e5d8b71e3d43fec.js","202","static/chunks/202-7b9f876bcb1bf7b4.js","611","static/chunks/app/(blogs)/24a/git-merge-allow-unrelated-histories/page-a8a0e408b7e17dc3.js"],""]
2:[null,["$","html",null,{"lang":"en","children":["$","body",null,{"children":["$","$L6",null,{"children":[["$","$L7",null,{}],["$","$L8",null,{"parallelRouterKey":"children","segmentPath":["children"],"loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","template":["$","$L9",null,{}],"templateStyles":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"childProp":{"current":[null,["$","$La",null,{"children":["$","$L8",null,{"parallelRouterKey":"children","segmentPath":["children","(blogs)","children"],"loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","template":["$","$L9",null,{}],"templateStyles":"$undefined","notFound":[["$","title",null,{"children":"404: This page could not be found."}],["$","div",null,{"style":{"fontFamily":"system-ui,\"Segoe UI\",Roboto,Helvetica,Arial,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\"","height":"100vh","textAlign":"center","display":"flex","flexDirection":"column","alignItems":"center","justifyContent":"center"},"children":["$","div",null,{"children":[["$","style",null,{"dangerouslySetInnerHTML":{"__html":"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}"}}],["$","h1",null,{"className":"next-error-h1","style":{"display":"inline-block","margin":"0 20px 0 0","padding":"0 23px 0 0","fontSize":24,"fontWeight":500,"verticalAlign":"top","lineHeight":"49px"},"children":"404"}],["$","div",null,{"style":{"display":"inline-block"},"children":["$","h2",null,{"style":{"fontSize":14,"fontWeight":400,"lineHeight":"49px","margin":0},"children":"This page could not be found."}]}]]}]}]],"notFoundStyles":[],"childProp":{"current":["$","$L8",null,{"parallelRouterKey":"children","segmentPath":["children","(blogs)","children","24a","children"],"loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","template":["$","$L9",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$","$L8",null,{"parallelRouterKey":"children","segmentPath":["children","(blogs)","children","24a","children","git-merge-allow-unrelated-histories","children"],"loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","template":["$","$L9",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$Lb",[["$","$Lc",null,{"children":"$undefined"}],["$","$Ld",null,{"children":"前情提要"}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"这个博客网站是一个<code class=\"x-inline-highlight\">Create React App</code>项目，因为只有我自己，就一直在Github仓库的<code class=\"x-inline-highlight\">master</code>分支开发。"}}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"之前为了配置路径别名进行了<code class=\"x-inline-highlight\">eject</code>，后来发现设置<code class=\"x-inline-highlight\">jsconfig.json</code>就可以解决问题，于是一直想还原成没有<code class=\"x-inline-highlight\">eject</code>的项目。当然，<code class=\"x-inline-highlight\">eject</code>操作是不可逆的，于是我把原来的<code class=\"x-inline-highlight\">master</code>分支备份到<code class=\"x-inline-highlight\">v1</code>分支，再另建一个新项目，把旧代码迁移过来，然后把新项目强制<code class=\"x-inline-highlight\">push</code>到<code class=\"x-inline-highlight\">master</code>分支，这样就可以在<code class=\"x-inline-highlight\">master</code>分支上继续新版本的开发。"}}],["$","$Ld",null,{"children":"问题"}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"在新版本（暂且叫他<code class=\"x-inline-highlight\">v2</code>）也就是现在的<code class=\"x-inline-highlight\">master</code>分支上提交了数次<code class=\"x-inline-highlight\">commit</code>后，我意识到一个问题：此前的做法导致原来<code class=\"x-inline-highlight\">v1</code>版本的提交记录并没有迁移到<code class=\"x-inline-highlight\">master</code>分支中，当前的<code class=\"x-inline-highlight\">master</code>分支相当于从零开始。"}}],["$","$Le",null,{"src":{"default":{"src":"/_next/static/media/fig1.e8ddb8d5.png","height":1954,"width":2508,"blurDataURL":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAGCAYAAAD+Bd/7AAAAmUlEQVR42mMAAg4gFgZiZgYEYIOL5fVfTFyy86nBjpOvvGGymw4/9d9+4o3+1mMvwxlyJlz1XLrzscW2Yy+SYQo2H3meAsT2W44+LwALbDv+UmPL0Rc5MAVbDj9J2XHytS1QrAwsADRKeNvxV0ZQeY5pa26nL97x1HD36deGDFuOvWSE6exYfIeFAQgKJ19Nye6/rMbAwMAAACbXQgGe3R4LAAAAAElFTkSuQmCC","blurWidth":8,"blurHeight":6}},"width":"600px","invertInDarkTheme":true}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"我希望<code class=\"x-inline-highlight\">master</code>分支仍然保留<code class=\"x-inline-highlight\">v1</code>版本的提交，同时也在此基础上记录<code class=\"x-inline-highlight\">v2</code>版本的提交。"}}],["$","$Ld",null,{"children":"解决步骤"}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"首先找一个文件夹克隆仓库："}}],["$","$Lf",null,{"language":"bash","code":"git clone https://github.com/1kuzus/1kuzus.github.io.git"}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"切换到<code class=\"x-inline-highlight\">v1</code>分支："}}],["$","$Lf",null,{"language":"bash","code":"git checkout v1"}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"然后使用<code class=\"x-inline-highlight\">--allow-unrelated-histories</code>参数合并两个没有公共祖先的分支："}}],["$","$Lf",null,{"language":"bash","code":"git merge master -X theirs --allow-unrelated-histories"}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"上面的参数<code class=\"x-inline-highlight\">-X theirs</code>是合并策略，在将<code class=\"x-inline-highlight\">master</code>分支合并到<code class=\"x-inline-highlight\">v1</code>分支发生冲突时选择<code class=\"x-inline-highlight\">master</code>分支的更改。现在，两个分支的提交记录都被保留了，但是目录下会多出仅在<code class=\"x-inline-highlight\">master</code>分支中存在的文件，删掉它们即可。或者更简单地，直接清空目录，把<code class=\"x-inline-highlight\">master</code>分支中的内容复制过来。"}}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"接下来在执行<code class=\"x-inline-highlight\">git add</code>、<code class=\"x-inline-highlight\">git commit</code>之后提交这次删除操作，也就是把本地的<code class=\"x-inline-highlight\">v1</code>分支提交到远程的<code class=\"x-inline-highlight\">master</code>："}}],["$","$Lf",null,{"language":"bash","code":"\n                git push origin v1:master\n                "}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"最后来到之前的开发目录，拉取最新的<code class=\"x-inline-highlight\">master</code>分支。这步操作实际上并没有改变文件内容，只是多了提交记录。"}}],["$","$Lf",null,{"language":"bash","code":"\n                cd path/to/work_dir\n                git pull origin master\n                "}]],null],"segment":"__PAGE__"},"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/f70c26425a044d6b.css","precedence":"next","crossOrigin":""}]]}],"segment":"git-merge-allow-unrelated-histories"},"styles":[]}],"segment":"24a"},"styles":[]}],"params":{}}],null],"segment":"(blogs)"},"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/c84b60895b980f14.css","precedence":"next","crossOrigin":""}]]}]]}]}]}],null]
3:[["$","meta","0",{"charSet":"utf-8"}],["$","title","1",{"children":"Create Next App"}],["$","meta","2",{"name":"description","content":"Generated by create next app"}],["$","meta","3",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","link","4",{"rel":"icon","href":"/favicon.ico","type":"image/x-icon","sizes":"48x48"}]]
b:null
