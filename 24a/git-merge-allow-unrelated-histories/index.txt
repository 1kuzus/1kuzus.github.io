2:I[55329,["481","static/chunks/457b8330-69f8bab043e7caf2.js","954","static/chunks/d3ac728e-0c798b3b8aa3bf53.js","250","static/chunks/250-0ef8476c0fa8ee24.js","612","static/chunks/612-c60a65f28e774a61.js","548","static/chunks/548-617600d488b129da.js","877","static/chunks/app/%5B...slug%5D/page-d9261e8748746071.js"],""]
3:I[93334,["481","static/chunks/457b8330-69f8bab043e7caf2.js","954","static/chunks/d3ac728e-0c798b3b8aa3bf53.js","250","static/chunks/250-0ef8476c0fa8ee24.js","612","static/chunks/612-c60a65f28e774a61.js","548","static/chunks/548-617600d488b129da.js","877","static/chunks/app/%5B...slug%5D/page-d9261e8748746071.js"],""]
4:"$Sreact.suspense"
6:I[30389,["481","static/chunks/457b8330-69f8bab043e7caf2.js","954","static/chunks/d3ac728e-0c798b3b8aa3bf53.js","250","static/chunks/250-0ef8476c0fa8ee24.js","612","static/chunks/612-c60a65f28e774a61.js","548","static/chunks/548-617600d488b129da.js","877","static/chunks/app/%5B...slug%5D/page-d9261e8748746071.js"],""]
7:I[5613,[],""]
9:I[31778,[],""]
a:I[25694,["250","static/chunks/250-0ef8476c0fa8ee24.js","185","static/chunks/app/layout-845a24f2dd022ac0.js"],"GlobalProvider"]
b:I[75383,["250","static/chunks/250-0ef8476c0fa8ee24.js","185","static/chunks/app/layout-845a24f2dd022ac0.js"],""]
8:["slug","24a/git-merge-allow-unrelated-histories","c"]
0:["OZbs-8KE0NeixINxPUSbV",[[["",{"children":[["slug","24a/git-merge-allow-unrelated-histories","c"],{"children":["__PAGE__?{\"slug\":[\"24a\",\"git-merge-allow-unrelated-histories\"]}",{}]}]},"$undefined","$undefined",true],["",{"children":[["slug","24a/git-merge-allow-unrelated-histories","c"],{"children":["__PAGE__",{},["$L1",[["$","$L2",null,{}],["$","div",null,{"id":"post-layout","children":[false,["$","div",null,{"id":"main","className":"center-wrapper","children":[["$","h1",null,{"className":"x-title","children":"记录：使用--allow-unrelated-histories"}],["$","$L3",null,{"path":"/24a/git-merge-allow-unrelated-histories/"}],["$","$4",null,{"fallback":["$","p",null,{"children":"Loading..."}],"children":["$","$4",null,{"fallback":["$","p",null,{"children":"Loading component..."}],"children":"$L5"}]}]]}],["$","$L6",null,{}]]}]],null]]},["$","$L7",null,{"parallelRouterKey":"children","segmentPath":["children","$8","children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L9",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/eff7dd468053d7cd.css","precedence":"next","crossOrigin":""}]]}]]},[null,["$","html",null,{"lang":"zh-CN","suppressHydrationWarning":true,"children":[["$","head",null,{"children":[["$","link",null,{"rel":"icon","href":"/favicon.ico","type":"image/x-icon"}],["$","script",null,{"async":true,"src":"https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"}],["$","script",null,{"async":true,"src":"https://www.googletagmanager.com/gtag/js?id=G-45BYSZ6WPY"}],["$","script",null,{"dangerouslySetInnerHTML":{"__html":"\nwindow.dataLayer = window.dataLayer || [];\nfunction gtag() {\n    dataLayer.push(arguments);\n}\ngtag('js', new Date());\ngtag('config', 'G-45BYSZ6WPY');\n"}}],["$","script",null,{"dangerouslySetInnerHTML":{"__html":"const a=z=>h.getItem(z),b=(y,z)=>h.setItem(y,z),c=(y,z)=>document.documentElement.setAttribute(y,z),d='theme',e='dark',f='light',g='class',h=localStorage;a(d)!==e&&a(d)!==f&&b(d,f);a(d)===e?c(g,e):c(g,f);"}}],["$","script",null,{"dangerouslySetInnerHTML":{"__html":"\nif (!Array.prototype.findLast) {\n    Array.prototype.findLast = function (callback) {\n        for (let i = this.length - 1; i >= 0; i--) {\n            if (callback(this[i])) return this[i];\n        }\n        return undefined;\n    };\n}\nif (!Array.prototype.findLastIndex) {\n    Array.prototype.findLastIndex = function (callback) {\n        for (let i = this.length - 1; i >= 0; i--) {\n            if (callback(this[i])) return i;\n        }\n        return -1;\n    };\n}\n"}}]]}],["$","body",null,{"children":["$","$La",null,{"children":[["$","$Lb",null,{}],["$","$L7",null,{"parallelRouterKey":"children","segmentPath":["children"],"loading":"$undefined","loadingStyles":"$undefined","loadingScripts":"$undefined","hasLoading":false,"error":"$undefined","errorStyles":"$undefined","errorScripts":"$undefined","template":["$","$L9",null,{}],"templateStyles":"$undefined","templateScripts":"$undefined","notFound":["$","div",null,{"id":"notfound","children":[["$","img",null,{"alt":"img","src":"/images/cry.gif"}],["$","code",null,{"id":"notfound-404","children":"404"}],["$","code",null,{"id":"notfound-text","children":"Page Not Found"}]]}],"notFoundStyles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/98e601cf5ba3633d.css","precedence":"next","crossOrigin":""}]],"styles":null}]]}]}]]}],null]],[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/6a51fcb2cf7b2968.css","precedence":"next","crossOrigin":""}]],"$Lc"]]]]
d:I[74365,["481","static/chunks/457b8330-69f8bab043e7caf2.js","954","static/chunks/d3ac728e-0c798b3b8aa3bf53.js","250","static/chunks/250-0ef8476c0fa8ee24.js","612","static/chunks/612-c60a65f28e774a61.js","548","static/chunks/548-617600d488b129da.js","877","static/chunks/app/%5B...slug%5D/page-d9261e8748746071.js"],""]
e:I[62029,["481","static/chunks/457b8330-69f8bab043e7caf2.js","954","static/chunks/d3ac728e-0c798b3b8aa3bf53.js","250","static/chunks/250-0ef8476c0fa8ee24.js","612","static/chunks/612-c60a65f28e774a61.js","548","static/chunks/548-617600d488b129da.js","877","static/chunks/app/%5B...slug%5D/page-d9261e8748746071.js"],""]
5:[["$","h2",null,{"className":"x-h1","children":"前情提要"}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"这个博客网站曾经是一个<code class=\"x-inline-highlight\">Create React App</code>项目，此前一直在Github仓库的<code class=\"x-inline-highlight\">master</code>分支开发。"}}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"之前为了配置路径别名进行了<code class=\"x-inline-highlight\">eject</code>，后来发现设置<code class=\"x-inline-highlight\">jsconfig.json</code>就可以解决问题，于是一直想还原成没有<code class=\"x-inline-highlight\">eject</code>的项目。当然，<code class=\"x-inline-highlight\">eject</code>操作是不可逆的，于是我把原来的<code class=\"x-inline-highlight\">master</code>分支备份到<code class=\"x-inline-highlight\">v1</code>分支，再另建一个新项目，把旧代码迁移过来，然后把新项目强制<code class=\"x-inline-highlight\">push</code>到<code class=\"x-inline-highlight\">master</code>分支，这样就可以在<code class=\"x-inline-highlight\">master</code>分支上继续新版本的开发。"}}],["$","h2",null,{"className":"x-h1","children":"问题"}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"在新版本（暂且叫它<code class=\"x-inline-highlight\">v2</code>）也就是现在的<code class=\"x-inline-highlight\">master</code>分支上提交了数次<code class=\"x-inline-highlight\">commit</code>后，我意识到一个问题：此前的做法导致原来<code class=\"x-inline-highlight\">v1</code>版本的提交记录并没有迁移到<code class=\"x-inline-highlight\">master</code>分支中，当前的<code class=\"x-inline-highlight\">master</code>分支相当于从零开始。"}}],["$","$Ld",null,{"src":"fig1.png","width":"600px","filterDarkTheme":true}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"我希望<code class=\"x-inline-highlight\">master</code>分支仍然保留<code class=\"x-inline-highlight\">v1</code>版本的提交，同时也在此基础上记录<code class=\"x-inline-highlight\">v2</code>版本的提交。"}}],["$","h2",null,{"className":"x-h1","children":"解决步骤"}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"首先找一个文件夹克隆仓库："}}],["$","div",null,{"className":"x-codeblock","children":[["$","div",null,{"className":"x-codeblock-header","children":[["$","div",null,{"className":"x-codeblock-header-language","children":"Bash"}],["$","$Le",null,{"className":"x-codeblock-header-copy","text":"git clone https://github.com/1kuzus/1kuzus.github.io.git"}]]}],["$","pre",null,{"style":{"background":null},"children":["$","code",null,{"dangerouslySetInnerHTML":{"__html":"<span class=\"token function\">git</span> clone https://github.com/1kuzus/1kuzus.github.io.git"}}]}]]}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"切换到<code class=\"x-inline-highlight\">v1</code>分支："}}],["$","div",null,{"className":"x-codeblock","children":[["$","div",null,{"className":"x-codeblock-header","children":[["$","div",null,{"className":"x-codeblock-header-language","children":"Bash"}],["$","$Le",null,{"className":"x-codeblock-header-copy","text":"git checkout v1"}]]}],["$","pre",null,{"style":{"background":null},"children":["$","code",null,{"dangerouslySetInnerHTML":{"__html":"<span class=\"token function\">git</span> checkout v1"}}]}]]}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"然后使用<code class=\"x-inline-highlight\">--allow-unrelated-histories</code>参数合并两个没有公共祖先的分支："}}],["$","div",null,{"className":"x-codeblock","children":[["$","div",null,{"className":"x-codeblock-header","children":[["$","div",null,{"className":"x-codeblock-header-language","children":"Bash"}],["$","$Le",null,{"className":"x-codeblock-header-copy","text":"git merge master -X theirs --allow-unrelated-histories"}]]}],["$","pre",null,{"style":{"background":null},"children":["$","code",null,{"dangerouslySetInnerHTML":{"__html":"<span class=\"token function\">git</span> merge master <span class=\"token parameter variable\">-X</span> theirs --allow-unrelated-histories"}}]}]]}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"上面的参数<code class=\"x-inline-highlight\">-X theirs</code>是合并策略，在将<code class=\"x-inline-highlight\">master</code>分支合并到<code class=\"x-inline-highlight\">v1</code>分支发生冲突时选择<code class=\"x-inline-highlight\">master</code>分支的更改。现在，两个分支的提交记录都被保留了，但是目录下会多出仅在<code class=\"x-inline-highlight\">master</code>分支中存在的文件，删掉它们即可。或者更简单地，直接清空目录，把<code class=\"x-inline-highlight\">master</code>分支中的内容复制过来。"}}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"接下来在执行<code class=\"x-inline-highlight\">git add</code>、<code class=\"x-inline-highlight\">git commit</code>之后提交这次删除操作，也就是把本地的<code class=\"x-inline-highlight\">v1</code>分支提交到远程的<code class=\"x-inline-highlight\">master</code>："}}],["$","div",null,{"className":"x-codeblock","children":[["$","div",null,{"className":"x-codeblock-header","children":[["$","div",null,{"className":"x-codeblock-header-language","children":"Bash"}],["$","$Le",null,{"className":"x-codeblock-header-copy","text":"git push origin v1:master\n"}]]}],["$","pre",null,{"style":{"background":null},"children":["$","code",null,{"dangerouslySetInnerHTML":{"__html":"<span class=\"token function\">git</span> push origin v1:master\n"}}]}]]}],["$","p",null,{"className":"x-p","dangerouslySetInnerHTML":{"__html":"最后来到之前的开发目录，拉取最新的<code class=\"x-inline-highlight\">master</code>分支。这步操作实际上并没有改变文件内容，只是多了提交记录。"}}],["$","div",null,{"className":"x-codeblock","children":[["$","div",null,{"className":"x-codeblock-header","children":[["$","div",null,{"className":"x-codeblock-header-language","children":"Bash"}],["$","$Le",null,{"className":"x-codeblock-header-copy","text":"cd path/to/work_dir\ngit pull origin master\n"}]]}],["$","pre",null,{"style":{"background":null},"children":["$","code",null,{"dangerouslySetInnerHTML":{"__html":"<span class=\"token builtin class-name\">cd</span> path/to/work_dir\n<span class=\"token function\">git</span> pull origin master\n"}}]}]]}]]
c:[["$","meta","0",{"name":"viewport","content":"width=device-width, initial-scale=1"}],["$","meta","1",{"charSet":"utf-8"}],["$","title","2",{"children":"记录：使用--allow-unrelated-histories - 铃木的网络日记"}],["$","link","3",{"rel":"canonical","href":"https://1kuzus.github.io/24a/git-merge-allow-unrelated-histories/"}]]
1:null
